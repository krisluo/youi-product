!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
!function(t,e){"use strict";function i(e,i){var n="youi_loading",s=t("#"+n);s.length||(s=t('<div class="youi-loading" id="'+n+'"></div>').appendTo(t("body",document))),i=i||t.youi.resourceUtils.get("loading"),t("body",document).addClass("show-loading"),s.show().html('<span class="icon-sun icon-3x icon-spin"></span><span class="loading-text">'+i+"</span>")}function n(){t("#youi_loading").hide("slow"),t("body",document).removeClass("show-loading")}function s(e,i,n){var s=t("#"+e+":first"),a=(new Date).getTime();n=t.youi.stringUtils.xssClean(n),0==s.length&&(s=t('<a tabindex="0" id="'+e+'" data-trigger="focus" class="btn page-message-alert" role="button" data-toggle="popover" title="提示信息" data-content=""></a>').insertBefore(t(".page-container:first",document))),s.attr("data-timestamp",a).popover({template:'<div class="popover '+e.replace(/_/g,"-")+'"><div class="arrow"></div><div class="page-alert-header"><span class="youi-icon icon-info-sign"></span><span class="title">'+i+'</span><span onclick="$(this).parents(\'.popover:first\').hide();" class="pull-right youi-icon icon-remove"></span></div><div class="popover-content"></div></div>',trigger:"focus",content:n,delay:{show:300,hide:5e3}}).popover("show"),s.next().find(".popover-content").html(n),window.setTimeout(function(){t("#"+e+"[data-timestamp="+a+"]:first").popover("hide")},5e3)}window.require=window.require||function(){},t.youi=t.youi||{},t.extend(t.youi,{version:"3.0.0",defaultAjaxType:"json",serverConfig:{contextPath:"",convertArray:[],params:{},pageUrls:{}},getMessage:function(e,i){return 1==arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.youi.getMessage.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),""+i)}),e)},resource:{},resourceUtils:{get:function(e){var i=t.youi.resource[e];return i?t.isFunction(i)?i(Array.prototype.slice.call(arguments,1)):i:""}},timerUtils:{countdown:function(e,i,n){var s=function(e,i,n){return function(){var a=t.trim(e.text()),o=0;isNaN(a)||(o=parseInt(a),o--),o<=0?t.isFunction(n)&&(n(),e=null):e.delay(i).show(s).text(o)}}(e,i,n);s()}},pageHashPrefix:"#p",pageUtils:{loadUiScript:function(e,i,n){if(!t.youi[e])try{t.ajax({url:i,dataType:"script",success:function(){n()},error:function(e,n,s){t.youi.messageUtils.showError(i+"["+e+"]:"+s)}})}catch(t){}},loadPage:function(e,s,a){t(this).addClass("loading"),s=t.youi.serverConfig.contextPath+""+s,i(0,t.youi.resourceUtils.get("page.loading")),e.load(s,function(e,i,s){"error"===i?t(this).html(e):("true"==s.getResponseHeader("X-LOGIN")&&(window.location.href="index.html"),t.youi.pageUtils.resizePageHeight(this),t(this).removeClass("loading").addClass("loaded"),t.isFunction(a)&&a.apply(this)),n()})},resizePageHeight:function(e){var i=t(e).innerHeight();if(i>0){var n=0;t(">.youi-page>.fixed-height:visible",e).each(function(){n+=t(this).outerHeight()}),t(">.youi-page>.page-inner-height",e).height(i-n-40)}},element:function(e,i){var n=e;return i&&(n="P_"+i+"_"+e),t("#"+n)},doPageFunc:function(e,i,n){var s="P_"+i+"_"+e;if(t.isFunction(window[s]))return window[s].apply(n,Array.prototype.slice.call(arguments,3))},getWidgetPageHash:function(t){var e=window.location.hash;if(e)return e.split("|")[t.parents("[data-hash]").length]||""},parsePageUrl:function(e,i){return t.youi.recordUtils.replaceByRecord(e,i)},goPage:function(e){t.youi.pageUtils.checkDirty()&&(window.location.href=e)},goBackPage:function(){t.youi.pageUtils.checkDirty()&&window.history.go(-1)},goForwardPage:function(){t.youi.pageUtils.checkDirty()&&window.history.go(1)},checkDirty:function(){return!t("[data-dirty=1]").length||(t.youi.messageUtils.showMessage("页面数据尚未保存"),!1)},pageRedirect:function(t){window.location.hash="#p:"+t},closeAndRefreshSubpage:function(e,i){var n=t("#P_"+e).parents(".youi-subpage:first");n.dialog("close"),n.trigger("pagechange",i)},getFuncUrls:function(e,i){var n={};if(i&&t.youi.serverConfig.urls)for(var s=i.split(","),a=0;a<s.length;a++)if(s[a]){var o=(e?"P_"+e+"_":"")+s[a];t.youi.serverConfig.urls[o]&&(n[s[a]]=t.youi.serverConfig.urls[o])}return n}},logLevel:1,log:{debug:function(e){t.youi.logLevel<1&&console&&console.log(e)},info:function(e){t.youi.logLevel<2&&console&&console.log(e)},error:function(e){t.youi.logLevel<3&&console&&console.log(e)}},widgetUtils:{funcApply:function(e,i){var n=e.getAttribute("id");if(t.isFunction(window[n+"_"+i])){var s=[];return arguments.length>2&&(s=t.makeArray(arguments).slice(2)),window[n+"_"+i].apply(e,s)}},bindResize:function(e,i){e.attr("data-resize",!0).bind("widget.resize",function(n,s){e.is(":hidden")||(s&&!0===s.forceResize&&t.youi.log.debug("force resize "+i),t.isFunction(e.resize)&&(e[i]("resize"),e.data("resizekey",[e.height(),e.width()].join("|"))),n.stopPropagation())})},triggerResize:function(e,i){if(e&&e.length);else{var n=t("body",document);n.is('[data-resize="true"]')&&n.trigger("widget.resize"),e=n}e.find(':visible[data-resize="true"]').trigger("widget.resize",{forceResize:i})}},stringUtils:{isEmpty:function(e){return!t.youi.stringUtils.notEmpty(e)},xssClean:function(t){return xssFilters&&t?xssFilters.inHTMLData(t):t},notEmpty:function(e){return!!(e=t.trim(e))||(0===e||!1===e)},fixValue:function(e,i){var n=e;return t.youi.stringUtils.isEmpty(e)&&(t.youi.stringUtils.isEmpty(i)&&(i=""),n=i),n},convertDataProperty:function(t,e){return t.replace(/[A-Z]/g,function(t){return(e||"-")+t.toLowerCase()})},getStrValue:function(e){return t.isArray(e)&&e.length?e[0]:e}},htmlUtils:{buildIconHtml:function(t,e){var i=[];return i.push("<span "),e&&(i.push('data-command="'+e+'" '),i.push('data-name="'+t+'" ')),i.push('class="youi-icon icon-'+t+'"></span>'),i.join("")}},recordUtils:{replaceByRecord:function(e,i,n){if("object"==typeof i)for(var s in i){var a=i[s];t.youi.stringUtils.isEmpty(a)&&(a=""),e=e.replace(new RegExp("\\{"+s+"\\}","g"),n?a:encodeURIComponent(a))}return e=e.replace(new RegExp("\\{.*\\}","g"),"")},getPropertyValue:function(e,i){if(i){var n,s=i.split(".");if(s.length>1){n=e;for(var a=0;a<s.length;a++)if(n=n[s[a]],t.youi.stringUtils.isEmpty(n))return}else n=e[i];return n}},setPropertyValue:function(t,e,i){if(e){var n=e.split(".");if(n.length>1){var s=t[n[0]]||{};t[n[0]]=s;for(var a=1;a<n.length;a++)a==n.length-1?s[n[a]]=i:s=s[n[a]]||{}}else t[e]=i}},recordToParameters:function(e,i){i=i||"";var n=[];if(e||0===e)if(t.isArray(e))t(e).each(function(e){"string"==typeof this||"number"==typeof this?-1==i.indexOf(".")?n.push({property:i,value:this}):n=n.concat(t.youi.recordUtils.recordToParameters(this,i+"["+e+"]")):n=n.concat(t.youi.recordUtils.recordToParameters(this,i+"["+e+"]."))});else if("object"==typeof e)for(var s in e){var a=i+s;"object"!=typeof e[s]||t.isArray(e[s])||(a+="."),n=n.concat(t.youi.recordUtils.recordToParameters(e[s],a))}else"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e||t.youi.stringUtils.notEmpty(e)&&n.push({property:i,value:e});return n},recordToAjaxParamStr:function(e){return e?t.youi.parameterUtils.toParams(t.youi.recordUtils.recordToParameters(e)).join("&"):""}},parameterUtils:{toParams:function(e){for(var i=[],n=0;n<e.length;n++){var s=t.youi.parameterUtils.propertyParameter(e[n].property,e[n].value);s&&i.push(s)}return i},propertyParameter:function(e,i){var n=[];return t.isArray(i)?t(i).each(function(){null!=this&&e&&n.push(e+"="+encodeURIComponent(this))}):e&&t.youi.stringUtils.notEmpty(i)&&n.push(e+"="+encodeURIComponent(i)),n.join("&")},connectParameter:function(e,i,n){return e+(-1==e.indexOf("?")?"?":"&")+t.youi.parameterUtils.propertyParameter(i,n)}},buttonUtils:{createButtons:function(e,i,n){var s=[];if(e.sort(function(t,e){return(t.order||0)-(e.order||0)}),e&&e.length)for(var a=0;a<e.length;a++)s.push(t.youi.buttonUtils.createButton(e[a],n));return s.join("")},createButton:function(t,e){var i=[];if(t&&t.name){var n=t.active?"active-"+t.active:"active-0",s=["youi-button btn btn-default",t.disabled?"disabled":""].concat(t.buttonStyles);e=t.command||e;s.push(n),i.push('<button type="button" '),i.push('data-name="'+t.name+'" '),e&&i.push('data-command="'+e+'" '),t.tooltips&&i.push(' title="'+t.tooltips+'" '),"close"==t.name&&i.push(' data-dismiss="modal" '),i.push(' class="'+s.join(" ")+'">'),t.icon&&i.push('<span class="youi-icon icon-'+t.icon+'"></span> '),t.tooltips||i.push(t.caption),i.push("</button>")}return i.join("")}},messageUtils:{showMessage:function(t){s("page_alert_message","提示信息",t)},showError:function(t){s("page_alert_error","提示信息",t)},confirm:function(e,i){e&&arguments.length>1&&function(e,i,n,s){if(e){var a=t("#youi-dialog-confirm");a.length||(a=t('<div id="youi-dialog-confirm"></div>')),a.html(t.youi.stringUtils.xssClean(e)).dialog({autoOpen:!1,modal:!0,width:600,position:["center",100],title:"确认提示",minHeight:300,zIndex:9999,buttons:[{name:"confirm",caption:"确认",icon:"submit"}],buttonActions:{confirm:function(){this.close(),i.apply(this,n)}}}).dialog("open").show()}}(e,i,t.makeArray(arguments).slice(2))}},ajaxUtils:{ajax:function(e){if(e.url){!0!==e.notShowLoading&&i(0,e.loadingText),t.youi.serverConfig.contextPath&&"/"==e.url.substring(0,1)&&-1==e.url.indexOf(t.youi.serverConfig.contextPath)&&(e.url=t.youi.serverConfig.contextPath+e.url.substring(1));var s=t.extend({},{dataType:t.youi.defaultAjaxType||"json",jsonp:"data:jsonp",type:"POST",contentType:"application/x-www-form-urlencoded;charset=UTF-8",headers:{Authorization:t.youi.serverConfig.authorization,"X-CSRF-TOKEN":t.youi.serverConfig.csrfToken},error:function(e,i,n){if("error"==i){"401"==e.status&&console.log(e.status);var a=t.youi.resourceUtils.get("urlNotFound",this.url);t.youi.log.info(a+n),o.apply(s,[a])}}},e),a=s.success||function(){},o=s.error||function(){},r=s.domainValidator||function(){};return"jsonp"==s.dataType&&t.youi.serverConfig.authorization&&(s.data=s.data||"",s.data="data:authorization="+t.youi.serverConfig.authorization+"&"+s.data),s.complete=function(t,e,i){n()},s.success=function(e){t.youi.ajaxUtils.resultsCheck(e,t.extend({},this,{error:o,domainValidator:r}))&&a.apply(s,[e])},t.ajax(s)}t.youi.messageUtils.showError("没有ajax url参数！")},resultsCheck:function(e,i){if(null==e)return!1;if(e.hasError)return t.youi.log.info(e.errorMsg),i.error.apply(i,[e.errorMsg]),!1;var n=e.message,s=!0;if(n&&n.code){var a=n.code;switch(a){case"000000":null==n.passed&&t.youi.messageUtils.showMessage(n.info);break;case"111111":return t.youi.messageUtils.showMessage(a+":"+n.info),s=!1,void(window.location.href=t.youi.serverConfig.contextPath);case"111112":return i.domainValidator.apply(i,[e]),void(s=!1);default:return"系统异常"==n.info?t.youi.log.info(i.url+":"+n.info):t.youi.messageUtils.showError(n.info),i.error.apply(i,[n.info]),void(s=!1)}}return s}},command:{_initCommands:function(){this.commands=[],this.undoCommands=[],this.registedCommands=[]},executeCommand:function(e){var i=Array.prototype.slice.call(arguments,1);if("redo"==e||"undo"==e)return this[e](),void(t.isFunction(this.options.afterCommand)&&this.options.afterCommand.apply(this.element[0],[this.commands,this.undoCommands]));if("string"==typeof e&&this.registedCommands[e]){var n=t.extend({params:i,execResult:{}},this.registedCommands[e]);this.commands.push(n),this._commandChanged();var s=this.exec();n.execResult=s,null!==s&&!1===s?this.commands.pop():(t.youi.log.info("执行动作："+n.getTitle.apply(n)),t.youi.log.info(i),this.undoCommands=[],t.isFunction(this.options.afterCommand)&&this.options.afterCommand.apply(this.element[0],[this.commands,this.undoCommands]))}},exec:function(t){if(this.commands.length>0){var e=this.commands[this.commands.length-1];return e.isRedo=t,e.exec.apply(this,[].concat(e.params).concat([e.isRedo]))}},undo:function(){if(this.commands.length>0){var e=this.commands.pop();t.isFunction(e.undo)&&(this.undoCommands.push(e),this._commandChanged(),e.undo.apply(this,[e.params,e.execResult||{}]),t.youi.log.info("撤销动作："+e.getTitle.apply(e)))}},redo:function(){if(this.undoCommands.length>0){var e=this.undoCommands.pop();this.commands.push(e),e.execResult=this.exec(!0),this._commandChanged(),t.youi.log.info("重做动作："+e.getTitle.apply(e))}},_commandChanged:function(){},_getCommandGroups:function(){var t=[];return this.undoCommands&&this.undoCommands.length>0&&t.push("redo"),this.commands&&this.commands.length>0&&t.push("undo"),t},registerCommand:function(e,i,n){return"string"==typeof i&&(n=i,i=null),!i&&t.isFunction(this[e])&&(i=t.extend({},{name:e,shortcutKey:n,getTitle:function(){return this.name},exec:this[e],undo:this[e+"Undo"]})),i&&(i.name=e,this.registedCommands[e]=i),this},getCommands:function(){return[].concat(this.commands)},getUndoCommands:function(){return[].concat(this.undoCommands)}}}),t.widget("youi.abstractWidget",t.ui.mouse,{_create:function(){this.element.addClass("youi-"+this.widgetName),this.options=t.extend({},this.element.data(),this.options),this.options.id=this.element.attr("id")||this.widgetName+"_"+this.uuid,this.element.attr("id")||this.element.attr("id",this.options.id),this._initModel(),!1!==this.options.initHtml&&this._defaultHtmls(),this.options.bindResize&&t.youi.widgetUtils.bindResize(this.element,this.widgetName),this._initAction(),this._initWidget()},execCommand:function(e,i){if(i.name){var n=i.name+"Command",s=Array.prototype.slice.call(arguments,0);if(t.isFunction(this[n]))this[n].apply(this,s);else if(t.isFunction(this[i.name]))this[i.name].apply(this,s);else if(this.options.buttonActions&&this.options.buttonActions[i.name]){var a=this.options.buttonActions[i.name];"string"==typeof a&&(a=window[a]),t.isFunction(a)&&a.apply(this,s)}else this._callGloablFunc.apply(this,[i.name].concat(s))}},_bindWidgetCommand:function(){this._on({widgetCommand:function(t,e){return this.execCommand(null,e),!1}})},_callGloablFunc:function(t){var e=this.options.id+"_"+t.replace(/\./g,"_");return this.__callGloablFunc.apply(this,[e].concat(Array.prototype.slice.call(arguments,1)))},__callGloablFunc:function(e){if(t.isFunction(window[e])){var i=Array.prototype.slice.call(arguments,1);try{return window[e].apply(this.element[0],i)}catch(t){}}return!0},_proxy:function(e){return function(e,i,n){return function(){return t.isFunction(e[i])?e[i].apply(e,t.makeArray(arguments).concat(n)):e.options.actions&&t.isFunction(e.options.actions[i])?e.options.actions[i].apply(e,t.makeArray(arguments).concat(n)):void 0}}(this,e,t.makeArray(arguments).slice(1))},_resizePageHeight:function(){if(this.element.hasClass("page-inner-height")){var e=this.element.innerHeight();if(e>0){var i=0;this.element.find(">.fixed-height").each(function(){i+=t(this).outerHeight()}),this.element.find(">.auto-height").height(e-i-10)}}},resize:function(){this.options.bindResize&&(this._resizePageHeight(),this._resize(),this.element.addClass("resized"))},goBackPage:function(){t.youi.pageUtils.goBackPage()},_initModel:function(){},_defaultHtmls:function(){},_initAction:function(){},_initWidget:function(){},_resize:function(){}})}(jQuery)},function(module,exports,__webpack_require__){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
__webpack_require__(0),function($){function _getLength(t,e){return t.length}$.youi.fieldUtils={getInstance:function(t){var e=$(t);return e&&e.is(".youi-field")?$.data(e[0],"youi-"+e.data("fieldType")):null},getFieldId:function(t,e){return t?(e=e||"field")+"_"+t.replace(/\./g,"_"):null},validateMethod:{email:function(t,e){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return/^\d+$/.test(t)},phone:function(t,e){if(/[^0-9\-]+/.test(t))return!1},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,n,s=0,a=0,o=!1;if((t=t.replace(/\D/g,"")).length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)n=t.charAt(i),a=parseInt(n,10),o&&(a*=2)>9&&(a-=9),s+=a,o=!o;return s%10==0},minlength:function(t,e,i){return($.isArray(t)?t.length:_getLength(t,e))>=i},maxlength:function(t,e,i){return($.isArray(t)?t.length:_getLength(t,e))<=i},rangelength:function(t,e,i){var n=$.isArray(t)?t.length:_getLength(t,e);return n>=i[0]&&n<=i[1]},min:function(t,e,i){return t>=i},max:function(t,e,i){return t<=i},range:function(t,e,i){return t>=i[0]&&t<=i[1]},equalTo:function(t,e,i){var n=$(i);return this.settings.onfocusout&&n.off(".validate-equalTo").on("blur.validate-equalTo",function(){$(e).valid()}),t===n.val()}}},$.extend(jQuery.fn,{fieldValue:function(t,e){var i=$.youi.fieldUtils.getInstance(this);if(i){if(0==arguments.length)return i.getValue();i.setValue(t,e)}return null},fieldDefaultValue:function(t){var e=$.youi.fieldUtils.getInstance(this);e&&t&&(e.options.defaultValue=t)},fieldShow:function(){var t=$.youi.fieldUtils.getInstance(this);return t?t.getText()||t.getValue():null},fieldReset:function(t){this.each(function(){var e=$.youi.fieldUtils.getInstance(this);if(e){if(!0===t&&!0===e.options.escapeReset)return;e.reset&&e.reset()}})},fieldFocus:function(){var t=$.youi.fieldUtils.getInstance(this);t&&t.focus()},fieldValidate:function(t){this.each(function(){var e=$.youi.fieldUtils.getInstance(this);e&&e.validate&&e.validate(t)})},fieldClear:function(){this.each(function(){var t=$.youi.fieldUtils.getInstance(this);t&&t.clear()})},fieldWidth:function(t){var e=$.youi.fieldUtils.getInstance(this);if(e){if(0==arguments.length)return e.getWidth();e.setWidth(t)}return null},fieldDisabled:function(){this.each(function(){var t=$.youi.fieldUtils.getInstance(this);t&&t.disabled()})},fieldEnable:function(){this.each(function(){var t=$.youi.fieldUtils.getInstance(this);t&&t.enable()})},fieldNotNull:function(t){this.each(function(){var e=$.youi.fieldUtils.getInstance(this);e&&e.setNotNull(t)})}}),$.youi.field={_initWidget:function(){this.options.id=this.options.id||$.youi.fieldUtils.getFieldId(this.options.property,this.options.prefix),this.element.data("fieldType",this.widgetName).data("property",this.options.property),this._initField(),this.options.defaultValue&&(this.options.defaultValue=decodeURIComponent(this.options.defaultValue),this.orgValue=this.options.defaultValue,this.setValue(this.options.defaultValue))},_initField:function(){},_initAction:function(){this._on({"change input.textInput":function(t){this._doChange()}})},_doChange:function(){if(this.validate(),!this.element.hasClass("validate-error")){var t=this.getValue();$.isFunction(this.options.change)?this._trigger("change",this.options.change,{property:this.options.property,value:t}):this._callGloablFunc("change",t,this.element[0]),this.element.trigger("resetChildren",{value:t})}},_validateNotNull:function(t){if(null==this.options.notNull)return!0;if(!0===this.options.notNull){var e=$.trim(t);if($.isArray(t)&&0==t.length)return this._validateError("不能为空"),!1;if(""==e||null==e)return this._validateError("不能为空"),!1}return!0},_validateSuccess:function(t){this.element.removeClass("validate-error").addClass("validate-success").removeAttr("title")},_validateError:function(t){t=t||"",this.element.removeClass("validate-success").addClass("validate-error").attr("title","【"+(this.options.caption||this.options.property)+"】"+t)},getValue:function(){},setValue:function(t){},getText:function(){},setText:function(t){},clear:function(){},focus:function(){},validate:function(t){this.element.removeClass("validate-success").removeClass("validate-error").removeAttr("title");var e=this.getValue();this._validateNotNull(e),this._doFieldValidate(e,t)},_doFieldValidate:function(t,e){},reset:function(){this.element.removeClass("validate-success").removeClass("validate-error").removeAttr("title"),null!=this.options.defaultValue?(this.setValue(this.options.defaultValue,this.options.defaultShow),this._doChange("",this.options.defaultValue)):this.clear()},setWidth:function(t){this.element.width(t),this.element.find(">table").width(t);var e=t-22;e-=0==$(".select-down:first",this.element).length?6:20,this.element.find(".textInput,field-input,field-input-full").width(e)},disabled:function(){this.element.addClass("disabled").find(".textInput").attr("disabled","disabled")},enable:function(){this.element.removeClass("disabled").find(".textInput").removeAttr("disabled","disabled")},setNotNull:function(t){var e=this.element.parents(".field-group:first");!0===t?e.addClass("notNull"):e.removeClass("notNull")},_filterXss:function(t){return $.youi.stringUtils.xssClean(t)},destroy:function(){this.element.removeClass("youi-field").removeAttr("fieldType").removeAttr("property"),$.Widget.prototype.destroy.apply(this,arguments)}},$.youi.fieldInputValidate={_doFieldValidate:function(t,e){var i,n=this._getValidateParams(),s=this._callGloablFunc("validate",n);if(s&&s.errorMessage)i=s.errorMessage;else if(this.options.dataType&&$.isFunction($.youi.fieldUtils.validateMethod[this.options.dataType]))!1===$.youi.fieldUtils.validateMethod[this.options.dataType].apply(this.element,[t,this.element[0],n[this.options.dataType]])&&(i=$.youi.resourceUtils.get("field."+this.options.dataType,n));else if(this.options.expression&&this.options.expressionMessage){new RegExp(this.options.expression).test(t)||(i=$.youi.recordUtils.replaceByRecord(this.options.expressionMessage,e||{}))}i&&this._validateError(i)},_getValidateParams:function(){return{}}},$.youi.fieldSource={_initSource:function(){this.dropMenu=$(".dropdown-menu",this.element),this.options.parents&&"string"==typeof this.options.parents&&(this.options.parents=this.options.parents.split(",")),this._bindParentFields()},_bindParentFields:function(){var t=this;this._parentFieldsVisit(function(){$(this).bind("resetChildren",function(){t._resetByParent()})})},_resetByParent:function(){if(this.dropMenu&&this.dropMenu.removeClass("loaded"),this.clear(),this.options.expression)try{var expression=$.youi.recordUtils.replaceByRecord(this.options.expression,this._getParentRecord());expression=expression.replace(new RegExp("\\{\\w*\\}","g"),"");var value=eval(expression);$.youi.stringUtils.notEmpty(value)&&this.setValue(value)}catch(t){console.log(t)}this.element.trigger("resetChildren")},_bindDropdownAction:function(){var t=this;this.element.bind("show.bs.dropdown",function(e){var i=$(e.target);$(".dropdown-menu",i).width(i.width()-2).hasClass("loaded")||t._loadSrc()})},_loadSrc:function(){if(this.options.src&&this.dropMenu.length){var t=this;this.dropMenu.empty();var e=[];e=e.concat(this._getParentParams()),$.youi.ajaxUtils.ajax({url:this.options.src,data:e.join("&"),success:function(e){e&&e.records&&t._parseItems(e.records)}})}else this.options.convert&&this.dropMenu.length&&this._parseItems(this._convert2Records())},_convert2Records:function(){var t=$.youi.serverConfig.convertArray[this.options.convert];if(t){var e=[];for(var i in this.options.code="code",this.options.show="show",t)e.push({code:i,show:t[i]});return e}},_getParentParams:function(){return $.youi.parameterUtils.toParams($.youi.recordUtils.recordToParameters(this._getParentRecord()))},_getParentRecord:function(){var t={},e=this.options.parentsAlias||[];return this._parentFieldsVisit(function(i){var n=$(this);e[i]?t[e[i]]=n.fieldValue():t[n.data("property")]=n.fieldValue()}),t},_parentFieldsVisit:function(t){if(this.options.parents){var e=this.element.parents(".field-block-container:first");if(e.length){var i=this.options.parents;$(i).each(function(i){var n=$('.youi-field[data-property="'+this+'"]',e);n.length&&$.isFunction(t)&&t.apply(n,[i])})}}},_parseItems:function(t){t=t||[];var e=this.getValue();"string"==typeof e&&(e=[e]);var i=[],n=[];!0!==this.options.notNull&&i.push(this._buildEmptyItemHtml());for(var s=0;s<t.length;s++)-1!=$.inArray(t[s][this.options.code],e)&&n.push(t[s][this.options.show]),i.push(this._buildItemHtml(t[s],e));this.dropMenu.html(i.join("")),this.dropMenu.addClass("loaded"),n.length?this._setText(n.join(",")):this.clear()},_setText:function(t){this.element.find(".textInput").text(t||"")},_buildEmptyItemHtml:function(){if(!0===this.options.multiple)return'<div class="select-all"><span class="youi-icon icon-item"></span>全选</div>';var t={};return t[this.options.show]=this.options.emptyItemCaption||"",t[this.options.code]="",this._buildItemHtml(t,[])},_buildItemHtml:function(t,e){return""}},$.widget("youi.fieldCustom",$.extend({},$.youi.field,{_initField:function(){},setValue:function(t){this.options.setValue(t)},getValue:function(){return this.options.getValue(value)},clear:function(){this.options.clear(value)}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-5
 */
i(0),(n=jQuery).youi&&n.youi.resource&&n.extend(n.youi.resource,{loading:"数据加载中，请稍候...","page.loading":"页面努力加载中，请稍后...",urlNotFound:n.youi.getMessage("地址【{0}】访问异常!"),close:"关闭",all:"全部",years:20,"grid.submit":"查询","grid.reset":"重置","grid.add":"新增","grid.notFound":"未找到记录.","grid.edit":"修改","grid.remove":"删除","grid.pagestat":n.youi.getMessage("{0}/{1}页,{2}条,显示{3}-{4}."),"grid.confirm.remove":n.youi.getMessage("确认删除选中的{0}条记录?"),"grid.noSelectMsg":"请选择一条记录","grid.confirm.reload.notSubmit":"刷新表格会丢失未提交的数据,是否继续?","grid.records.notFount":"未找到符合条件的记录!","grid.editor.errorMessage":n.youi.getMessage("第{0}行，第{1}列：{2}."),"tabs.maxOpenTab":n.youi.getMessage("最大允许打开{0}个标签."),"tabs.close":"关闭页面","form.invalid":n.youi.getMessage("校验提示：{0}."),error:"异常","field.notNull":"不能为空.","field.remote":"Please fix this field.","field.email":"请输入正确的邮箱地址.","field.url":"请输入正确的URL地址.","field.date":"请输入正确的日期格式.","field.dateISO":"Please enter a valid date ( ISO ).","field.number":"请输入数字.","field.digits":"请输入正整数.","field.phone":"请输电话号码.","field.creditcard":"Please enter a valid credit card number.","field.equalTo":"Please enter the same value again.","field.maxlength":n.youi.getMessage("最大不能超过 {0}字符."),"field.minlength":n.youi.getMessage("Please enter at least {0} characters."),"field.rangelength":n.youi.getMessage("Please enter a value between {0} and {1} characters long."),"field.range":n.youi.getMessage("Please enter a value between {0} and {1}."),"field.max":n.youi.getMessage("Please enter a value less than or equal to {0}."),"field.min":n.youi.getMessage("Please enter a value greater than or equal to {0}.")})},function(t,e,i){i(0),function(t,e){"use strict";var i=t.youi.log;function n(){this.editors=[]}t.extend(n.prototype,{createHtml:function(t,e,i,n){return this.editors[t].createHtml(e,i,n)},getEditorValue:function(t,e){return this.editors[t].getValue(t,e)},closeEditor:function(t,e){return this.editors[t].closeEditor(e)},isSupportEditor:function(t){return this.editors[t]},registerEditor:function(e,i){return this.editors[e]=t.extend({createHtml:function(t,e,i){return'<div class="youi-field editor fieldSpinner input-group"></div>'},getValue:function(t,e){return e[t]?e.fieldValue():""},closeEditor:function(t){t.remove()}},i),this}}),t.youi.editorFactory=new n,t.youi.editorFactory.registerEditor("fieldText",{createHtml:function(t,e,i){return'<input style="width:100%;" class="editor fieldText" value="'+t+'"/>'},getValue:function(t,e){return e.val()},closeEditor:function(t){t.remove()}}).registerEditor("fieldSelect",{createHtml:function(e,i,n){var s=t.youi.serverConfig.convertArray[n.convert],a=[];for(var o in a.push('<div class="editor open fieldSelect dropdown">'),a.push('<div class="dropdown-property" data-toggle="dropdown" aria-haspopup="false"  aria-expanded="true">'+i+'<span class="caret"></span></div>'),a.push('<ul class="dropdown-menu">'),s)a.push('<li data-value="'+o+'" class="option-item">'+s[o]+"</li>");return a.push("</ul>"),a.push("</div>"),a.join("")}}),t.widget("youi.editor",t.youi.abstractWidget,t.extend({},{options:{editOptions:function(t){return{}}},_initAction:function(){this._on({"mouseout input.editor":function(e){return this._closeEditor(this._getEditElement(t(e.currentTarget))),!1},"click [data-editor]":function(e){var n=t(e.currentTarget),s=n.data("editor"),a=n.data("value"),o=n.text();if(!n.parents(".readonly").length)if(t.youi.editorFactory.isSupportEditor(s)){var r=this.element.find("[data-editor].editing");if(e.stopPropagation(),n[0]!==r[0]){this._closeEditor(r);var l=this.options.editOptions(n);n.empty().addClass("editing").html(t.youi.editorFactory.createHtml(s,a,o,l)),"fieldText"!==s&&"fieldSelect"!==s&&n.find(">.editor")[s](t.extend({},l,{property:"editor-value",defaultValue:a,initHtml:!0},l.editorOptions))}}else i.info("不支持的编辑组件："+s)},"click .editor .option-item":function(e){var i=t(e.currentTarget),n=this._getEditElement(i),s=i.data("value"),a=n.data("value");return n.data("value",s).text(i.text()).removeClass("editing"),s!==a&&this._valueChange(n,s,a),!1},click:function(){this._closeEditor(this.element.find("[data-editor].editing:first"))}})},_closeEditor:function(e){if(e&&e.hasClass("editing")){var i=e.data("editor"),n=e.data("value");if(t.youi.editorFactory.isSupportEditor(i))if(0===e.find(".editor.dropdown").length){var s=t.youi.editorFactory.getEditorValue(i,e.find(">.editor"));s||0===s||(s=""),e.data("value",s).text(s),s!==n&&this._valueChange(e,s,n)}else e.text(e.find(".dropdown-property").text());e.removeClass("editing")}},_getEditElement:function(t){return t.parents("[data-editor]:first")},_valueChange:function(t,e,i){e!==i&&this._callGloablFunc("valueChange",t,e,i)}}))}(jQuery)},function(module,exports,__webpack_require__){
/*!
 * giui JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-2-18
 */
__webpack_require__(0),function($){"use strict";$.youi.dateUtils={dateToStr:function(t,e,i){return t?"millis"==e?t.getTime():t.igFormat(e):""},strToDate:function(t,e,i){if(null==e||null==t)throw"Invalid arguments";var n=new Date;return"millis"!=e?n.igParse(e,t):(n.setTime(t),n)}};var _command="datepickerCommand",_panelStyle="d-panel";function _buildOtherPanel(t,e,i,n){var s=[];s.push('<div data-name="showOtherTimeMenu" data-command="'+_command+'" class="dropdown-toggle pull-left" data-toggle="dropdown"><span class="other-time-value '+t+'">0</span>'+e+"</div>"),s.push('<ul class="dropdown-menu">');for(var a=n=n||0;a<=i;a++)s.push('<li class="select-other-time" data-name="selectOtherTime" data-command="'+_command+'" data-value="'+a+'">'+a+"</li>");return s.push("</ul>"),s.join("")}function Tokenizer(t){this.value="",this.pos=0,this.string=t,this.len=t.length,this.fmts=["yyyy","yy","y","MMMM","MMM","NNN","MM","M","dd","d","EEEE","EE","E","hh","h","HH","H","KK","K","kk","k","mm","m","ss","s","a"],this.parse_string=function(t,e){for(var i=0;i<t.length;++i){var n=t[i].length,s=e?t[i]:t[i].toLowerCase();if(this.len>=this.pos+n)if((e?this.string.substr(this.pos,n):this.string.substr(this.pos,n).toLowerCase())==s)return this.value=this.string.substr(this.pos,n),this.pos=this.pos+n,i}return-1},this.parse_char=function(){return this.len>=this.pos+1?(this.value=this.string.substr(this.pos,1),this.pos=this.pos+1,0):-1},this.parse_space=function(){for(;" "==this.string.charAt(this.pos)||"\t"==this.string.charAt(this.pos);)++this.pos;return 0},this.parse_number=function(t,e,i){if(this.len>=this.pos+t){for(var n=0;n<t;++n)if(parseInt(this.string.charAt(this.pos+n),10)!=this.string.charAt(this.pos+n))return-1;this.value=this.string.substr(this.pos,t);var s=parseInt(this.value,10);if(s>=e&&s<=i)return this.pos+=t,s}return-1},this.parse_format=function(){return-1==this.parse_string(this.fmts,!0)?this.parse_char():0}}$.widget("youi.datepicker",$.youi.abstractWidget,$.extend({},{options:{format:"yyyy-MM-dd",showIcon:!1},_initWidget:function(){this.panelContainer=this.element.find(".datepicker-content:first"),this.labelContainer=this.element.find(".datepicker-label:first")},_defaultHtmls:function(){this.currentDate=new Date,this.selectedDate=new Date;var t=new Date,e=t.getFullYear(),i=t.getMonth(),n=[];n.push('<div class="datepicker-header datepicker-row">'),n.push('<div class="cell addon"><span class="youi-icon icon-circle-arrow-left" data-command="'+_command+'" data-name="left" ></span>'),n.push("</div>"),n.push('<span class="cell datepicker-label">'),n.push('<span data-command="'+_command+'" data-name="expandMonth" class="header header-date show" data-month="'+i+'" data-year="'+e+'">'+$.youi.dateUtils.dateToStr(t,"yyyy-MM")+"</span>"),n.push('<span data-command="'+_command+'" data-name="expandYear" class="header header-month">month</span>'),n.push('<span class="header header-year">year</span>'),n.push('<span class="header header-hour">hour</span>'),n.push('<span class="header header-time">time</span>'),n.push("</span>"),n.push('<div class="cell addon"><span class="youi-icon icon-circle-arrow-right" data-command="'+_command+'" data-name="right" ></span>'),n.push("</div>"),n.push("</div>"),n.push('<div class="datepicker-content">'),n.push('<div class="panel-date '+_panelStyle+' show">'),n.push(this._generateContentHtml(e,i)),n.push("</div>"),n.push("</div>"),n.push('<div class="datepicker-footer datepicker-row">'),n.push('<div class="cell addon"><span data-command="'+_command+'" data-name="today"  class="youi-icon icon-calendar" title="今天"></span> &nbsp;<span class="youi-icon icon-reply" data-command="'+_command+'" data-name="clear"  title="清空"></span>'),n.push(this._buildOtherTimesHtml()),n.push("</div>"),this.element.html(n.join(""))},_generateContentHtml:function(t,e){var i=this._getDaysInMonth(t,e),n=this._getFirstDayOfMonth(t,e),s=new Date(t,e,1);n=7==n?"-1":n;var a,o,r=['<table width="100%" border="0" cellpadding="0" cellspacing="1"><tbody>'];r.push("<tr><th>"+["日","一","二","三","四","五","六"].join("</th><th>")+"</th></tr>"),r.push("<tr>");for(var l=0;l<7;l++){if(o=l-n+1,r.push("<td>"),l>=n)r.push('<a data-command="'+_command+'" data-name="selectDate" data-value="'+o+'" id="'+o+'" class="'+this._getDateTdClass(t,e,o,i)+'">'+o+"</a>"),6==l&&(a=o);else{var d=this._dateAdd(s,"d",l-n);r.push('<a data-command="'+_command+'" data-name="selectOtherDate" data-year="'+d.getFullYear()+'" data-month="'+d.getMonth()+'" data-value="'+d.getDate()+'" class="other-day datapicker-days">'+d.getDate()+"</a>")}r.push("</td>"),o=null}r.push("</tr>");var u=i-a,h=Math.ceil(u/7),c=a;for(l=0;l<h;l++){r.push("<tr>");for(var p=0;p<7;p++){if(r.push("<td>"),++c<=i)r.push('<a data-command="'+_command+'" data-name="selectDate" data-value="'+c+'" class="'+this._getDateTdClass(t,e,c,i)+'">'+c+"</a>");else{d=this._dateAdd(s,"d",c-1);r.push('<a data-command="'+_command+'" data-name="selectOtherDate" data-year="'+d.getFullYear()+'" data-month="'+d.getMonth()+'" data-value="'+d.getDate()+'" class="other-day datapicker-days small">'+d.getDate()+"</a>")}r.push("</td>")}r.push("</tr>")}return r.push("</tbody></table>"),r.join("")},_yearPanelHtml:function(t){for(var e=[],i=parseInt(t.year),n=0;n<12;n++){var s=i-6+n;e.push('<div data-value="'+s+'" data-year="'+s+'"  data-command="'+_command+'" data-name="expandMonth" class="col-sm-4 year">'+s+"</div>")}return e.join("")},_monthPanelHtml:function(){for(var t=[],e=0;e<12;e++)t.push('<div data-value="'+e+'"  data-command="'+_command+'" data-name="selectedMonth" class="col-sm-3 month">'+_formatNum(e+1)+"月</div>");return t.join("")},_datePanelHtml:function(t){return this._generateContentHtml(t.year,t.month)},_hourPanelHtml:function(){for(var t=[],e=0;e<24;e++)t.push('<div data-value="'+e+'" data-command="'+_command+'" data-name="expandTime" class="col-sm-2 hour">'+_formatNum(e)+"</div>"),11==e&&t.push('<div class="col-sm-12 line"></div>');return t.join("")},_timePanelHtml:function(){for(var t=[],e=0;e<60;e++)t.push('<div data-value="'+1*e+'" data-command="'+_command+'" data-name="selectTime" class="col-sm-2 time">'+_formatNum(1*e)+"</div>");return t.join("")},_buildOtherTimesHtml:function(){var t=[];return t.push('<div class="pull-right">'),t.push(_buildOtherPanel("HH","点",23)),t.push(_buildOtherPanel("mm","分",59)),t.push(_buildOtherPanel("ss","秒",59)),t.push("</div>"),t.join("")},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_getDaysInMonth:function(t,e){return 32-new Date(t,e,32).getDate()},_getYearMonthStr:function(t,e,i){return t+"年"+(e+1)+"月"+(i?i+"日":"")},_getDateTdClass:function(t,e,i,n){var s=[];i>0&&i<=n&&s.push("datapicker-days");var a=this.selectedDate.getFullYear(),o=this.selectedDate.getMonth(),r=this.selectedDate.getDate();a==t&&o==e&&i==r&&s.push("selected"),i<10&&s.push("small");var l=new Date;return l.getFullYear()==t&&l.getMonth()==e&&i==l.getDate()&&s.push("today"),s.join(" ")},_initAction:function(){this.element.hasClass("readonly")||(this._on({"click [data-command=datepickerCommand]":function(t){var e=$.extend({},$(t.currentTarget).data(),{ctrlKey:t.ctrlKey});this.execCommand(t.currentTarget,e),t.stopPropagation()}}),this.element.bind("click",function(t){return!1}).bind("mousedown",function(t){t.stopPropagation()}))},_moveDispatcher:function(t,e,i){var n=this.element.find(".datepicker-label .header:visible:last"),s="";n.hasClass("header-date")?s="_"+t+"_month":n.hasClass("header-month")?s="_"+t+"_year":n.hasClass("header-year")?s="_"+t+"_year_group":n.hasClass("header-hour")?s="_"+t+"_date":n.hasClass("header-time")&&(s="_"+t+"_hour"),$.isFunction(this[s])&&this[s](n,i)},_next_month:function(t,e){this._execMove(t,"date","m",1,!0)},_prev_month:function(t,e){this._execMove(t,"date","m",-1,!0)},_next_year:function(t,e){this._execMove(t,"month","y",1,!1)},_prev_year:function(t,e){this._execMove(t,"month","y",-1,!1)},_next_year_group:function(t,e){this._execMove(t,"year","y",12,!0)},_prev_year_group:function(t,e){this._execMove(t,"year","y",-12,!0)},_next_date:function(t,e){this._execMove(t,"hour","d",1,!1)},_prev_date:function(t,e){this._execMove(t,"hour","d",-1,!1)},_next_hour:function(t,e){this._execMove(t,"time","h",1,!1)},_prev_hour:function(t,e){this._execMove(t,"time","h",-1,!1)},_execMove:function(t,e,i,n,s){var a=t.data(),o=new Date(a.year,a.month||0,a.date||1,a.hour||0),r=this._dateAdd(o,i,n),l=$.extend({},{year:r.getFullYear(),month:r.getMonth(),date:r.getDate(),hour:r.getHours()});this._showPanel(e,null,l,s)},_dateAdd:function(date,interval,number){$.youi._date=new Date(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours());var k={y:"FullYear",q:"Month",m:"Month",w:"Date",d:"Date",h:"Hours",n:"Minutes",s:"Seconds",ms:"MilliSeconds"},n={q:3,w:7};return eval("$.youi._date.set"+k[interval]+"($.youi._date.get"+k[interval]+"()+"+(n[interval]||1)*number+")"),$.youi._date},_showPanel:function(t,e,i,n){this.panelContainer.find(".show").removeClass("show");var s=$.extend({},$(e).data(),i);this._getPanel(t,s,n).addClass("show"),this.labelContainer.find(".show").removeClass("show"),this._showHeaderPanel(t,s)},_showHeaderPanel:function(t,e){var i=this.element.find(".header.header-"+t);i.addClass("show");var n="_"+t+"PanelHeaderData";if($.isFunction(this[n])){var s=this[n](e);for(var a in i.html(s.text),s)i.data(a,s[a])}},_hourPanelHeaderData:function(t){return{year:t.year,month:t.month,date:t.date,text:this._formatText(t.year,t.month,t.date)}},_timePanelHeaderData:function(t){return{year:t.year,month:t.month,date:t.date,hour:t.hour,text:this._formatText(t.year,t.month,t.date,t.hour)}},_formatText:function(t,e,i,n){var s=[];return s.push(t),(e||0==e)&&s.push("-"+_formatNum(e+1)),(i||0==i)&&s.push("-"+_formatNum(i)),(n||0==n)&&s.push(" "+_formatNum(n)+":00"),s.join("")},_monthPanelHeaderData:function(t){return{year:t.year,text:t.year}},_yearPanelHeaderData:function(t){var e=parseInt(t.year);return{year:e,text:e-6+" - "+(e+5)}},_datePanelHeaderData:function(t){return{year:t.year,month:t.month,text:this._formatText(t.year,t.month)}},_getPanel:function(t,e,i){var n=this.element.find("."+_panelStyle+".panel-"+t);if(1==i&&n.remove(),1==i||0==n.length){var s=['<div class="'+_panelStyle+" panel-"+t+'">'],a="_"+t+"PanelHtml";$.isFunction(this[a])&&s.push(this[a](e)),s.push("</div>"),n=$(s.join("")).appendTo(this.panelContainer)}return n},_selectDate:function(t,e){var i=new Date(t.year,t.month,t.date),n=this.element.find(".other-time-value.HH").text(),s=this.element.find(".other-time-value.mm").text(),a=this.element.find(".other-time-value.ss").text();i.setHours(n||0),i.setMinutes(s||0),i.setSeconds(a||0),this.selectedDate=i;var o=$.youi.dateUtils.dateToStr(i,this.options.format);(this.element.find(".datepicker-content .selected").removeClass("selected"),e&&$(e).addClass("selected"),this.options.bind)&&($(this.options.bind).val(o),this.close());$.isFunction(this.options.onSelect)&&this._trigger("onSelect",null,{selectDate:i})},leftCommand:function(t,e){this._moveDispatcher("prev",t,e)},rightCommand:function(t,e){this._moveDispatcher("next",t,e)},expandMonthCommand:function(t,e){this._showPanel("month",t,e)},expandYearCommand:function(t,e){this._showPanel("year",t,e,!0)},expandDateCommand:function(t,e){this._showPanel("date",t,e)},expandHourCommand:function(t,e){var i=this.labelContainer.find(".header-date");e.date=$(t).attr("id"),this._showPanel("hour",t,$.extend({},i.data(),e))},expandTimeCommand:function(t,e){var i=this.labelContainer.find(".header-hour");this._showPanel("time",t,$.extend({},i.data(),e,{hour:$(t).data("value")}))},selectTimeCommand:function(t,e){var i=this.labelContainer.find(".header-time"),n=$.extend({},i.data(),$(t).data());n.minute=n.value,this._selectDate(n)},selectDateCommand:function(t,e){var i=this.labelContainer.find(".header-date"),n=$.extend({},e,i.data(),{date:$(t).data("value")});this.options.bind&&this.options.bind.hasClass("timable")?this._showPanel("hour",t,n):this._selectDate(n,t)},selectOtherDateCommand:function(t,e){var i=$.extend({},e,{date:$(t).data("value"),year:$(t).data("year"),month:$(t).data("month")||0});this._selectDate(i,t)},clearCommand:function(t,e){this._trigger("onClear")},todayCommand:function(t,e){var i=new Date;this._showPanel("date",t,{year:i.getFullYear(),month:i.getMonth()},!0),this._trigger("onToday",null,{selectDate:i})},showOtherTimeMenu:function(t,e){$(t).next(".dropdown-menu").show().css({top:0,left:0,width:this.element.width()+36,height:this.element.height()+42})},selectOtherTime:function(t,e){$(t).parent().hide().prev().find(">.other-time-value").text(e.value);var i=this.element.find(".other-time-value.HH").text(),n=this.element.find(".other-time-value.mm").text(),s=this.element.find(".other-time-value.ss").text();return this.selectedDate.setHours(i||0),this.selectedDate.setMinutes(n||0),this.selectedDate.setSeconds(s||0),$.isFunction(this.options.onSelect)&&this._trigger("onSelect",null,{selectDate:this.selectedDate,close:!1}),!1},selectedMonthCommand:function(t,e){var i=this.labelContainer.find(".header-month"),n=$.extend({month:$(t).data("value")},i.data(),e);this._showPanel("date",t,n,!0)}})),Date.prototype.igSetLocale=function(t,e,i,n,s){this.mnths=null===t?this.en_mnths:t.split(","),this.months=null===e?this.en_months:e.split(","),this.dys=null===i?this.en_dys:i.split(","),this.days=null===n?this.en_days:n.split(","),this.ampms=null===s?this.en_ampms:s.split(",")},Date.prototype.itoa=function(t,e){for(var i=""+t,n=i.length,s=0;s<e-n;++s)i="0"+i;return n>e&&(i=i.substr(n-e)),i},Date.prototype.igFormat=function(t){for(var e=this.getFullYear(),i=this.getMonth(),n=this.getDate(),s=this.getDay(),a=this.getHours(),o=this.getMinutes(),r=this.getSeconds(),l=new Tokenizer(t),d="";-1!=l.parse_format();)switch(l.value){case"yyyy":d+=this.itoa(e,4);break;case"yy":d+=this.itoa(e,2);break;case"y":d+=this.itoa(e,4);break;case"MMMM":d+=this.months[i];break;case"MMM":case"NNN":d+=this.mnths[i];break;case"MM":d+=this.itoa(1+i,2);break;case"M":d+=1+i;break;case"dd":d+=this.itoa(n,2);break;case"d":d+=n;break;case"EEEE":case"EE":d+=this.days[s];break;case"E":d+=this.dys[s];break;case"hh":d+=this.itoa(a%12==0?12:a%12,2);break;case"h":d+=a%12==0?12:a%12;break;case"HH":d+=this.itoa(a,2);break;case"H":d+=a;break;case"KK":d+=this.itoa(a%12,2);break;case"K":d+=a%12;break;case"kk":d+=this.itoa(0===a?24:a,2);break;case"k":d+=0===a?24:a;break;case"mm":d+=this.itoa(o,2);break;case"m":d+=o;break;case"ss":d+=this.itoa(r,2);break;case"s":d+=r;break;case"a":d+=a<12?this.ampms[0]:this.ampms[1];break;case"W":d+=this.getWeekInMonth(n);break;case"w":d+=this.getWeekInYear(this);break;default:d+=l.value}return d},Date.prototype.getWeekInMonth=function(t){return Math.ceil(t/7)},Date.prototype.getWeekInYear=function(t){var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+e.getDay())/7)},Date.prototype.igParse=function(t,e){e=e||"yyyy-MM-dd";for(var i=new Tokenizer(t),n=new Tokenizer(e),s=-1,a=-1,o=-1,r=-1,l=-1,d=-1,u=-1,h=0;-1!=i.parse_format();)switch(i.value){case"yyyy":if((s=n.parse_number(4,0,9999))<0)return null;break;case"yy":if((s=n.parse_number(2,0,99))<0)return null;s+=s>50?1900:2e3;break;case"y":if((s=n.parse_number(4,0,9999))<0&&(s=n.parse_number(2,0,99))>=0&&(s+=2e3),s<0)return null;break;case"MMM":case"MMMM":case"NNN":if((a=n.parse_string(this.mnths,!1))<0&&(a=n.parse_string(this.months,!1)),a<0)return null;break;case"MM":if((a=n.parse_number(2,1,12))<0)return null;--a;break;case"M":if((a=n.parse_number(2,1,12))<0&&(a=n.parse_number(1,1,12)),a<0)return null;--a;break;case"dd":if((o=n.parse_number(2,1,31))<0)return null;break;case"d":if((o=n.parse_number(2,1,31))<0&&(o=n.parse_number(1,1,31)),o<0)return null;break;case"EEEE":case"EE":if((r=n.parse_string(this.days,!1))<0)return null;break;case"E":if((r=n.parse_string(this.dys,!1))<0)return null;break;case"hh":if((l=n.parse_number(2,1,12))<0)return null;12==l&&(l=0);break;case"h":if((l=n.parse_number(2,1,12))<0&&(l=n.parse_number(1,1,12)),l<0)return null;12==l&&(l=0);break;case"HH":if((l=n.parse_number(2,0,23))<0)return null;break;case"H":if((l=n.parse_number(2,0,23))<0&&(l=n.parse_number(1,0,23)),l<0)return null;break;case"KK":if((l=n.parse_number(2,0,11))<0)return null;break;case"K":if((l=n.parse_number(2,0,11))<0&&(l=n.parse_number(1,0,11)),l<0)return null;break;case"kk":if((l=n.parse_number(2,1,24))<0)return null;24==l&&(l=0);break;case"k":if((l=n.parse_number(2,1,24))<0&&(l=n.parse_number(1,1,24)),l<0)return null;24==l&&(l=0);break;case"mm":if((d=n.parse_number(2,0,59))<0)return null;break;case"m":if((d=n.parse_number(2,0,59))<0&&(d=n.parse_number(1,0,59)),d<0)return null;break;case"ss":if((u=n.parse_number(2,0,59))<0)return null;break;case"s":if((u=n.parse_number(2,0,59))<0&&(u=n.parse_number(1,0,59)),u<0)return null;break;case"a":if((h=n.parse_string(this.ampms,!1))<0)return null;break;case" ":n.parse_space();break;case"w":case"W":break;default:if(n.parse_char()<0)return null;if(i.value!=n.value)return null}if(-1!=s&&this.setFullYear(s),-1!=a){if(-1==o)var c=this.getDate();this.setDate(1),this.setMonth(a),-1!=o?this.setDate(o):this.setDate(c)}else-1!=o&&this.setDate(o);return-1!=l&&this.setHours(0===h?l:l+12),-1!=d&&this.setMinutes(d),-1!=u&&this.setSeconds(u),-1!=r&&this.getDay()!=r?null:this};var en_mnths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],en_months=["January","February","March","April","May","June","July","August","September","October","November","December"],en_dys=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],en_days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],en_ampms=["am","pm"];function _formatNum(t){return(t<10?"0":"")+t}Date.prototype.mnths=en_mnths,Date.prototype.months=en_months,Date.prototype.dys=en_dys,Date.prototype.days=en_days,Date.prototype.ampms=en_ampms}(jQuery)},function(t,e,i){i(0),i(2),i(3),i(6),i(7),i(8),i(4),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34),i(35),t.exports=i(36)},function(t,e,i){i(0),function(t){t.youi.log;t.widget("youi.mousable",t.ui.mouse,{options:{delay:0,distance:1},_create:function(){this.element.disableSelection(),this._mouseInit()},_mouseStart:function(t){if(!this._trigger("start",t))return!1},_mouseDrag:function(t){this._trigger("drag",t)},_mouseStop:function(t){this._trigger("stop",t)},_mouseCapture:function(t){return!0}})}(jQuery)},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),function(t){t.widget("youi.dialog",t.youi.abstractWidget,t.extend({},{options:{bindResize:!0},_initModel:function(){this.buttons=[].concat(this.options.buttons),this.options.submit&&"NOT"!=this.options.submit&&this.options.submitAction&&this.buttons.push({name:"submit",command:"dialogCommand",order:101,caption:this.options.submit,buttonStyles:["btn-primary"]}),"NOT"!=this.options.close&&this.buttons.push({command:"dialogCommand",name:"close",order:201,caption:"关闭"})},_initWidget:function(){this.uiDailogContainer=this._getDialogContainer(),this.uiDailogContainer.modal({show:!1,backdrop:"static"});this.options.width&&this.element.parents(".modal-dialog:first").width(this.options.width),this.options.height&&this.element.height(this.options.height)},_getDialogContainer:function(){var e,i,n=this,s=this.element.parents(".modal");return 0===s.length&&((s=t((e=t.extend({},this.options,{buttons:this.buttons}),(i=[]).push('<div class="modal" id="modal_'+e.id+'" tabindex="-1" role="dialog">'),i.push('  <div class="modal-dialog modal-lg" role="document">'),i.push('    <div class="modal-content">'),i.push('      <div class="modal-header">'),i.push('        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),i.push('        <h4 class="modal-title" id="myModalLabel">'+(e.title||"")+"</h4>"),i.push("      </div>"),i.push('      <div class="modal-body">'),i.push("      </div>"),i.push('      <div class="modal-footer">'),i.push(t.youi.buttonUtils.createButtons(e.buttons,"","dialogCommand")),i.push("      </div>"),i.push("    </div>"),i.push("  </div>"),i.push("</div>"),i.join("")))).insertAfter(this.element),this.element.appendTo(s.find(".modal-body:first"))),s.on("click",'.youi-button[data-command="dialogCommand"]',function(e){var i=t(e.currentTarget).data();n.execCommand(e.currentTarget,i)}),s},_initAction:function(){},widget:function(){return this.uiDailogContainer},open:function(t){t=t||{};var e=this.element.parents(".modal-dialog:first");t.width&&(e.width(t.width),this.element.width(t.width-10)),t.height&&(this.element.height(t.height),e.height(t.height)),t.title&&e.find(".modal-title:first").html(t.title),this.element.show(),this.uiDailogContainer.modal("show")},loadPage:function(e){this.options.pages&&this.options.pages[e]&&(this.pageIndex=e,this.options.pageTitles[e]&&this.uiDailogContainer.find(".modal-title:first").html(this.options.pageTitles[e]),t.youi.pageUtils.loadPage(this.element,this.options.pages[e]))},goNextPage:function(){this.pageIndex=this.pageIndex||0,this.options.pages&&this.options.pages[this.pageIndex+1]&&this.loadPage(this.pageIndex+1)},goPrevPage:function(){this.pageIndex=this.pageIndex||0,this.pageIndex>0&&this.options.pages&&this.options.pages[this.pageIndex-1]&&this.loadPage(this.pageIndex-1)},submit:function(){this._trigger("submitAction")},maxWindow:function(){var e=t(window);this.uiDailogContainer.find(".modal-dialog:first").width(e.width()).height(e.height()-60),this.element.height(e.height()-160),this.element.width("100%")},close:function(){this.uiDailogContainer.modal("hide")}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),(n=jQuery).widget("youi.accordion",n.youi.abstractWidget,n.extend({},{options:{bindResize:!0},_initWidget:function(){if(this.element.find(".collapse:first").addClass("in"),this.options.height>0){var t=0;n(">.youi-panel>.panel-header",this.element).each(function(){t+=n(this).height()+25}),this.showPanelHeight=this.options.height-t,this.element.find(".collapse").height(this.showPanelHeight)}},_initAction:function(){if(this.options.height>0){var t=this;this.element.delegate(".collapse","shown.bs.collapse",function(e){n(this).height(t.showPanelHeight)})}}}))},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),i(2),i(3),function(t){var e="grow";function i(i,a,o,r,l,d){var u=[],h=[e];if(d&&(i[r]==t.youi.serverConfig.loginName&&(i._currentUserStyle="current-user"),h.push(t.youi.recordUtils.replaceByRecord(d,i))),o%2==1&&h.push("old"),u.push('<tr class="'+h.join(" ")+'"'),r)for(var c=0;c<r.length;c++){var p=t.youi.stringUtils.fixValue(t.youi.recordUtils.getPropertyValue(i,r[c]));u.push("data-"+s(r[c])+'="'+p+'" ')}t.isArray(l)&&t(l).each(function(){t.youi.stringUtils.notEmpty(i[this])&&u.push("data-"+s(this)+'="'+i[this]+'" ')}),u.push(">");for(c=0;c<a.length;c++)u.push(n(i,a[c],o,c==a.length-1));return u.push("</tr>"),u.join("")}function n(e,i,n,s){var a=[],o=["cell"],r=function(e,i,n){var s,a,o="";a=!(r=t.youi.recordUtils.getPropertyValue(e,i.property))&&t.isFunction(i.defaultValue)?i.defaultValue(e,i,n):i.defaultValue;r=null==r?a:r;var r,l=t.youi.serverConfig.convertArray[i.convert];s=t.isFunction(i.renderer)?i.renderer(i,e,l):i&&i.convert&&l&&(l[r]||i.notConvertValue)||r;switch(i.type){case"checkbox":case"radio":o=t.youi.htmlUtils.buildIconHtml(i.type);break;case"num":o=n+1;break;case"tree":o='<span class="youi-icon tree-toggle-handler"></span><span class="tree-node-text">'+(s||"")+"</span>";break;case"date":if(r){i.format=i.format||"millis",i.textFormat=i.textFormat||"yyyy-MM-dd HH:mm:ss";var d=t.youi.dateUtils.strToDate(r,i.format);o=t.youi.dateUtils.dateToStr(d,i.textFormat),d=null}break;case"link":var u=[];u.push('<a  data-command="gridCommand" data-name="cellLink"'),u.push(' data-property="'+i.property+'" '),u.push(" >"),u.push(s),u.push("</a>"),o=u.join("");break;case"button":if(t.isArray(i.buttons)){var h=[];t(i.buttons).each(function(){if(this.disableProperty&&-1!==t.inArray(e[this.disableProperty],["1","true"]))return"";var i=["youi-icon",this.name,"icon-"+(this.icon||this.name)],n="";this.action&&(i.push("page-link"),n='href="'+(this.action?t.youi.pageUtils.parsePageUrl(this.action,e):"")+'"'),h.push("<a "+n+' title="'+(this.caption||this.tooltips||"")),h.push('" class="'+i.join(" ")+'"'),this.method&&h.push(' target="'+this.method+'" '),h.push(' data-command="gridCommand" '),h.push(' data-name="'+this.name+'" '),h.push(">"+(this.caption||"")+"</a>")}),o=h.join("")}break;case"image":o='<img height="28px"  src="'+r+'"/>';break;case"selection":var c=["youi-icon fa"];!0===r||1===r?c.push("fa-check-square-o"):c.push("fa-square-o"),o='<span class="'+c.join(" ")+'"></span>';break;default:o=s}return{value:r=t.youi.stringUtils.fixValue(r),html:o||r}}(e,i,n);s&&o.push("last"),i.type&&o.push(i.type),i.editor&&o.push("editable "+i.editor),i.renderer&&o.push(i.property),i.align&&o.push(i.align),!1===i.nowrap&&o.push("wrap");var l=t("<i>"+r.html+"</i>").text();return a.push('<td title="'+l+'" data-value="'+r.value+'" class="'+o.join(" ")+'"'),i.editor&&a.push(' data-editor="'+i.editor+'" '),a.push(">"),a.push(r.html),a.push("</td>"),a.join("")}function s(t){var e=t.match(/[A-Z]/g);if("string"==typeof e&&(e=[e]),e)for(var i=0;i<e.length;i++)t=t.replace(e[i],"-"+e[i].toLowerCase());return t.replace(/\./g,"_")}function a(e,i,n,s,a){var o=t.youi.recordUtils.recordToParameters(s);t.youi.ajaxUtils.ajax({url:e,loadingText:"正在删除数据...",data:t.youi.parameterUtils.toParams(o).join("&"),success:function(e){t(i).parents("tr.grow:first").remove(),a.totalCount--,a._showPagination(a.totalCount),a.element.data("records",null),a._callGloablFunc("afterRemoveRow",s),i=null,a=null}})}function o(e,i){var n={};return e.length&&(n=t.extend({},e.data()),e.find("td.cell").each(function(e){var s,a=i[e];a&&(n[a.property]=(s=t(this).data("value"),t.youi.stringUtils.fixValue(s)))})),n}function r(){if(!t.youi.detectedPageSize){var e=t(window).height();t.youi.detectedPageSize=e<700?10:e>=700&&e<1200?15:20}return t.youi.detectedPageSize}function l(t){var e=t.hasClass("desc")?"desc":"asc",i=t.data("sortProperty");return i?"orderBy="+e+":"+i:""}t.widget("youi.grid",t.youi.abstractWidget,t.extend({},{options:{bindResize:!0,pageSize:r(),asyncPager:!1,rowStyle:""},currentPageIndex:1,cols:[],_initModel:function(){this.cols=[],1===this.options.pageSize&&(this.options.pageSize=r()),this.idKeys=this.options.idKeys,"string"==typeof this.idKeys&&(this.idKeys=this.idKeys.split(",")),this._initCurrentPageIndex();var t=this.options.cols||[];this.options.showNum&&this.cols.push({property:"num",value:"num",type:"num",caption:"",width:30}),this.options.showCheckbox&&this.cols.push({property:"checkbox",type:"checkbox",caption:"",width:24});for(var e=0;e<t.length;e++)t[e].property&&this.cols.push(t[e])},_initCurrentPageIndex:function(){this.currentPageIndex=this.currentPageIndex||1},_defaultHtmls:function(){var t=[];t.push('<table class="table table-striped table-bordered table-hover table-condensed"><thead>'),t.push(this._buildHeaderHtmls()),t.push("</thead>"),t.push(this._buildDataContentHtmls()),t.push("</table>"),t.push(this._buildFooterHtmls()),this.element.append(t.join(""))},_buildHeaderHtmls:function(){var e=[];return t(this.cols).each(function(t){e.push("<th>"),e.push(this.caption||this.property),e.push("</th>")}),e.join("")},_buildDataContentHtmls:function(){return"<tbody></tbody>"},_buildFooterHtmls:function(){var t=[];return t.push('<div class="grid-footer">'),t.push('<nav><ul class="pagination grid-navigator">'),t.push('</ul><span class="pPageStat"></span></nav>'),t.push("</div>"),t.join("")},_buildPaginationHtml:function(t){var e=[];if(t>0){var i="",n="";t<=1?(i=" disabled",n=" disabled"):1==this.currentPageIndex?n=" disabled":this.currentPageIndex==t&&(i=" disabled"),e.push('<li><a class="pButton pFirst'+n+'" data-command="gridCommand" data-name="first"  aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>'),e.push('<li><a class="pButton pPrev'+n+'" data-command="gridCommand" data-name="prev"  aria-label="Previous"><span aria-hidden="true">‹</span></a></li>');var s=Math.max(this.currentPageIndex,3);s+2>t&&(s=t-2);for(var a=s-2;a<=Math.min(s+2,t);a++){var o=a;o>0&&(e.push("<li"),this.currentPageIndex==o&&e.push(' class="active" '),e.push('><a data-command="gridCommand" data-name="goPage" data-index="'+o+'"  >'+o+(this.currentPageIndex==o?'<span class="sr-only">(current)</span>':"")+"</a></li>"))}e.push('<li><a class="pButton pNext'+i+'" data-command="gridCommand" data-name="next"  aria-label="Previous"><span aria-hidden="true">›</span></a></li>'),e.push('<li><a class="pButton pLast'+i+'" data-command="gridCommand" data-name="last"  aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>'),e.push('<li><a class="pIcon refresh" data-command="gridCommand" data-name="refresh"  ><span aria-hidden="true" class="youi-icon icon-refresh"></span></a></li>')}return e.join("")},_initWidget:function(){if(this.element.addClass("table-responsive"),this.options.pageHash&&this.element.attr("data-hash",""),this.options.editable){var t=this.cols;this.element.editor({editOptions:function(e){return t[e.prevAll().length]}})}this._createPageSizeSelector(),this._initModel(),this._bindWidgetCommand(),this.options.pageHash||0==this.options.load||this._ajaxData({refresh:!0})},_createPageSizeSelector:function(){var t=[this.options.pageSize,30,50,100,200],e=['<div class="pull-left page-size-handler dropdown dropup" style="line-height: 36px;">'];e.push('每页<span class="dropdown-toggle" data-toggle="dropdown" >'+this.options.pageSize+'<span class="caret"></span></span>'),e.push('<ul class="dropdown-menu">');for(var i=0;i<t.length;i++)e.push('<li data-command="gridCommand" data-name="selectPageSize" class="option-item" data-value="'+t[i]+'">'+t[i]+"</li>");e.push("</ul>条,</div>"),this.element.find(".grid-footer>nav:first").prepend(e.join(""))},selectPageSize:function(e,i){if(i.value&&parseInt(i.value)){var n=t(e);n.parent().prev().html(i.value+'<span class="caret"></span>'),n.parent().parent().removeClass("open"),this.options.pageSize=i.value,this.refresh()}},_initAction:function(){this._on({'click [data-command="gridCommand"]:not(.disabled)':function(e){var i=t(e.currentTarget),n=t.extend({ctrlKey:e.ctrlKey},i.data());this.execCommand(e.currentTarget,n,this._getRecordByDom(e.currentTarget));var s=i.parents(".grow:first");s.length&&this._selectedRow(s,e),e.stopPropagation()},"click .grid-hcell.dropdown>.dropdown-menu>.option-item":function(e){var i=t(e.currentTarget),n=t.extend({caption:i.text()},i.parents(".grid-hcell:first").data(),i.data());i.hasClass("selected")||(i.parents(".grid-hcell:first").data("value",n.value).addClass("querying").find(".selected-item:first").text(n.caption),t(".selected",i.parent()).removeClass("selected"),i.addClass("selected"),this._doSingleQuery(n))},"click .single-property.dropdown>.dropdown-menu>.option-item":function(e){var i=t(e.currentTarget);i.parents(".single-property:first").find(".query-property").attr("data-property",i.data("value")).data("property",i.data("value")).text(i.text())},"keydown .query-value":function(e){13==e.keyCode&&t(e.currentTarget).next().click()},"keydown .youi-fieldLayout .textInput":function(t){13==t.keyCode&&this._ajaxData()},"click .grow":function(e){var i=t(e.currentTarget);this._selectedRow(i,e)},"click .cell.checkbox>.icon-checkbox":function(e){var i=t(e.currentTarget.parentNode.parentNode);return this._selectedRow(i,e,!0),!1},pagehash:function(t,e){if(e.hash){var i=-1==e.hash.indexOf("?")?"init":e.hash.substring(e.hash.indexOf("?")+1);this._ajaxData({},i)}return!1},setpagehash:function(t,e){if(this.options.pageHash){var i=window.location.hash,n=-1!=i.indexOf("?")?i.substring(0,i.indexOf("?")):i;e.hash&&(window.location.hash=n+"?"+e.hash)}return!1}}),this.options.editable||this.element.delegate(".grid-hcell.dropdown","show.bs.dropdown",function(e){var i=t(e.target);i.hasClass("loaded")||(i.find(".dropdown-menu").html(function(e){var i=[];if(e){var n=t.youi.serverConfig.convertArray[e.convert];if(n)for(var s in i.push('<li data-value="" class="option-item selected">全部</li>'),n)i.push('<li data-value="'+s+'" class="option-item">'+n[s]+"</li>")}return i.join("")}(i.data())),i.addClass("loaded"))})},_selectedRow:function(t,e,i){i||this.element.find(".selected").not(t).removeClass("selected"),this.options.showCheckbox?t.toggleClass("selected"):(t.addClass("selected"),this.element.find(".selected").not(t).removeClass("selected")),this._activeButtons(),t.hasClass("selected")&&this._callGloablFunc("select",t,o(t,this.cols))},_getRecordByDom:function(e){var i=t(e).parents("tr.grow:first"),n=this.element.data("records");return n?n[i.prevAll().length]:o(i,this.cols)},closeEditor:function(){this.currentEditorElem&&(this.currentEditorElem.trigger("closeEditor"),this.currentEditorElem=null)},getRecord:function(t){return t?this._getRecordByDom(t):this.getSelectedRecord()},removeRecord:function(e,i,n){this.options.removeSrc&&n&&t.youi.messageUtils.confirm("确认删除记录!",a,this.options.removeSrc,e,i,n,this)},_doSingleQuery:function(t){this.element.find("th.querying[data-property],.query-property.querying[data-property]").not('[data-property="'+t.property+'"]').removeClass("querying").find(".selected-item").text("全部"),this._ajaxData(t)},_ajaxData:function(e,i){if(this.options.src){e=e||{};var n=this._getParams(e);this.element.find(".grid-navigator .youi-icon.icon-refresh").addClass("icon-spin");var s=n.join("&");if(!this.options.pageHash||i||e.refresh){if(i)if(this.currentPageIndex=function(t){for(var e=t.split("&"),i=0;i<e.length;i++)if(0==e[i].indexOf("pager:pageIndex="))return e[i].split("=")[1];return 1}(i),"init"!=i)s=i;else if(0==this.options.load)return this.parseRecords([],0),void this.element.find(".grid-content tbody").empty();var a=[].concat(n);this.options.asyncPager&&(a.push("pager:pageType=1"),this.element.find(".pPageStat:last").empty(),this.element.find(".pagination:first").html("分页信息加载中，请稍后..."),t.youi.ajaxUtils.ajax({url:this.options.src,data:["pager:pageType=2"].concat(n).join("&"),success:this._proxy("_showAsyncPager")})),t.youi.ajaxUtils.ajax({url:this.options.src,data:a.join("&"),success:this._proxy("_afterAjaxData")})}else this.element.trigger("setpagehash",{hash:s})}},_showAsyncPager:function(t){this._showPagination(t.totalCount)},_afterAjaxData:function(t){t&&t.records&&this.parseRecords(t.records,t.totalCount,this.options.asyncPager)},_getParams:function(t){var e=[];return e=(e=(e=e.concat(this._getPagerParams())).concat(this._getQueryParams())).concat(this._getSortParams())},_getQueryParams:function(e){var i=[],n=this.element.find(".querying[data-property]:first");if(n.length){var s=n.data();s.property&&t.youi.stringUtils.notEmpty(s.value)&&i.push(s.property+"="+s.value)}var a=[];return this.element.find(".youi-fieldLayout").each(function(){var e=t(this).fieldLayout("getFieldValues");t.isArray(e)&&(a=a.concat(e)),t(this).find(".youi-field").each(function(t){var e=this.getAttribute("operator"),n=this.getAttribute("data-property");e&&i.push("operator:"+n+"="+e)})}),this.element.find("input[data-grid-query]").each(function(){var e=t(this);a.push({property:e.data("gridQuery"),value:e.val()})}),a&&t(a).each(function(){this.value&&i.push(t.youi.parameterUtils.propertyParameter(this.property,this.value))}),i},_getPagerParams:function(){var t=[];return t.push("pager:pageIndex="+this.currentPageIndex),t.push("pager:pageSize="+(this.options.pageSize<0?10:this.options.pageSize)),t},_getSortParams:function(){var e=[],i=this.element.find(".col-sort.sorting");return i.length&&e.push(l(i)),this.element.find(".col-sort").not(i).each(function(){e.push(l(t(this)))}),e},_showPagination:function(e){if(this.totalCount=e,0!=this.options.usePager&&!this.options.editable)if(e&&0!=e){var i,n=this.currentPageIndex,s=this.options.pageSize,a=Math.ceil(e/s);this.pageCount=a,n>a&&(this.currentPageIndex=n,n=a);var o=(n-1)*s+1,r=n*s;r>e&&(r=e),i=t.youi.resourceUtils.get("grid.pagestat",n,a,e,o,r),this.element.find(".pPageStat:last").html(i),this.element.find(".pageIndex:last").text(n),this.currentPageIndex=n,this.element.find(".pagination").html(this._buildPaginationHtml(a)),this.element.find(".grid-footer,.grid-footer>nav").show()}else this.element.find(".table:first>tbody").html('<tr><td align="center" class="no-records" colspan="'+this.cols.length+'"><span class="youi-icon icon-info-sign"></span>'+t.youi.resourceUtils.get("grid.records.notFount")+"</td></tr>"),this.element.find(".grid-footer>nav").hide()},parseRecords:function(t,e,n){if(0==(t=t||[]).length&&this.currentPageIndex>1)return this.currentPageIndex=1,void this.refresh();this.options.editable||this.element.data("records",t),this.currentEditorElem&&this.currentEditorElem.remove(),this.currentEditorElem=null,e=e||t.length;for(var s=this.element.find(".table:first>tbody"),a=[],o=0;o<t.length;o++)a.push(i(t[o],this.cols,o,this.idKeys,this.options.dataProperties,this.options.rowStyle));s.html(a.join("")),n||this._showPagination(e),this._activeButtons(),this._resize(),this._callGloablFunc("afterLoad",e,t)},checkbox:function(e,i){var n=t(e).parents(".grow:first");this._selectedRow(n)},first:function(e,i){this.goPage(e,t.extend({},i,{index:1}))},last:function(e,i){this.goPage(e,t.extend({},i,{index:this.pageCount}))},prev:function(e,i){this.goPage(e,t.extend({},i,{index:this.currentPageIndex-1}))},next:function(e,i){this.goPage(e,t.extend({},i,{index:this.currentPageIndex+1}))},goPage:function(t,e){var i=e.index||1;this.currentPageIndex=i,this._ajaxData()},singleQuerySubmit:function(e,i){var n=t(".query-property",e.parentNode).data("value",t(".query-value",e.parentNode).val()).addClass("querying").data();this._doSingleQuery(t.extend({},i,n))},insertRow:function(e,n,s){var a;if(s=s||{},(n=n||{}).ids&&this.options.idKeys){var o=n.ids.split(","),r=this.options.idKeys.split(",");if(o.length==r.length)for(var l=["tr.grow"],d=0;d<o.length;d++)l.push("[data-"+t.youi.stringUtils.convertDataProperty(r[d])+"="+o[d]+"]");a=this.element.find(l.join(""))}a?a.before(i(s,this.cols)):this.element.find("tbody").append(i(s,this.cols))},removeRow:function(t,e){var i=this.element.find("tbody .grow.selected"),n=o(i,this.cols),s=i.next();s.length||(s=i.prev()),this.element.find("tbody .grow.selected").remove(),s.addClass("selected"),this._callGloablFunc("afterRemoveRow",n)},checkAll:function(e,i){t(e).toggleClass("checked").hasClass("checked")?this.element.find(".grow").addClass("selected"):this.element.find(".grow").removeClass("selected"),this._activeButtons(),this._callGloablFunc("change")},sort:function(e,i){var n=t(e).addClass("sorting").toggleClass("desc");n.hasClass("desc")?n.addClass("icon-sort-by-alphabet-alt").removeClass("icon-sort-by-alphabet"):n.addClass("icon-sort-by-alphabet").removeClass("icon-sort-by-alphabet-alt"),this.element.find(".sorting").not(e).removeClass("sorting"),this._ajaxData()},getRecords:function(){var e=[],i=this.cols;return this.element.find(".grow").each(function(){e.push(o(t(this),i))}),e},getSelectedRecords:function(){var e=[],i=this.cols;return this.element.find(".grow.selected").each(function(){e.push(o(t(this),i))}),e},appendCols:function(e){this.cols=this.cols.concat(e||[]);var i=[];t(e).each(function(){i.push('<th data-property="'+this.property+'" data-convert="" class="grid-hcell dropdown" width="'+(this.width?this.width:"10%")+'"><div class="col-title col-label">'+this.caption),this.orderBy&&i.push('<span title="点击排序" data-sort-property="'+this.property+'" data-command="gridCommand" data-name="sort" class="col-sort sorting '+this.orderBy+' icon-sort-by-alphabet-alt"></span>'),i.push("</div></th>")}),this.element.find(".grid-content>table:first>thead>tr").append(i.join(""))},_activeButtons:function(){var t=this.element.find(".grow.selected").length;0===t?this.element.find("button.active-1,button.active-2").addClass("disabled"):1===t?this.element.find("button.active-1,button.active-2").removeClass("disabled"):t>1&&(this.element.find("button.active-1").addClass("disabled"),this.element.find("button.active-2").removeClass("disabled"))},refresh:function(){this._ajaxData({refresh:!0})},resetQuery:function(t){t?this.element.find(".youi-fieldLayout .youi-field:not(.youi-fieldHidden)").fieldReset():this.element.find(".youi-fieldLayout .youi-field").fieldReset()},_resize:function(){this._resizePageHeight()}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),i(2),(n=jQuery).widget("youi.gridList",n.youi.abstractWidget,n.extend({},{options:{bindResize:!0,load:!0,rowStyle:"list-item",pageSize:15},_initModel:function(){this.currentPageIndex=1,this.queryParams={},this.paginationElem=this.element.next(".grid-list-pagination").length?this.element.next(".grid-list-pagination"):this.element.next().next(".grid-list-pagination")},_initWidget:function(){!1!==this.options.load&&this._loadSrc(),this._bindWidgetCommand()},_parseRecords:function(t,e){for(var i=[],s='<div class="list-item '+this.options.rowStyle+'">'+this.options.template+"</div>",a=0;a<t.length;a++){var o="";o=n.isFunction(window[this.options.id+"_rowParser"])?this._callGloablFunc("rowParser",t[a]):n.youi.recordUtils.replaceByRecord(s,n.extend({_contextPath:n.youi.serverConfig.contextPath},t[a])),i.push(o)}if(this.options.footerTemplate){var r={totalCount:e,pageSize:this.options.pageSize};i.push('<div class="grid-list-footer">'+n.youi.recordUtils.replaceByRecord(this.options.footerTemplate,r)+"</div>"),this.element.addClass("showFooter")}this.element.html(i.join("")),this._showPagination(e),this._callGloablFunc("afterLoad",e,t)},_showPagination:function(t){if(this.paginationElem.length){var e=Math.ceil(t/this.options.pageSize);this.paginationElem.find(".pageStats").html("第"+this.currentPageIndex+"页,共"+t+"条，每页"+this.options.pageSize+"条."),this.currentPageIndex<=1?this.paginationElem.find(".pPrev").addClass("disabled"):this.paginationElem.find(".pPrev").removeClass("disabled"),this.currentPageIndex>=e?this.paginationElem.find(".pNext").addClass("disabled"):this.paginationElem.find(".pNext").removeClass("disabled")}},_initAction:function(){var t=this;this._on({"click .list-item":function(t){this._triggerSelect(t.currentTarget),t.stopPropagation()},"click [data-command=gridlistCommand]":function(t){var e=n(t.currentTarget).data();this.execCommand(t.currentTarget,e),t.stopPropagation()}}),this.paginationElem&&this.paginationElem.length&&this.paginationElem.on("click",'[data-command="gridListCommand"]:not(.disabled)',function(e){var i=n(e.currentTarget).data();t.execCommand(e.currentTarget,i),e.stopPropagation()})},_triggerSelect:function(t){n(t).toggleClass("selected"),this._callGloablFunc("click",t)},addQueryParam:function(t,e,i){this.queryParams[t]=e,i&&(this.queryParams["operator:"+t]=i)},removeQueryParam:function(t){t&&this.queryParams&&(delete this.queryParams[t],delete this.queryParams["operator:"+t])},_loadSrc:function(){var t=this,e=this._getParams();n.youi.ajaxUtils.ajax({url:this.options.src,data:e.join("&"),success:function(e){e&&e.records&&t._parseRecords(e.records,e.totalCount)}})},reload:function(){this.currentPageIndex=1,this._loadSrc()},prev:function(){this.currentPageIndex--,this._loadSrc()},next:function(){this.currentPageIndex++,this._loadSrc()},_getParams:function(){var t=[];if(t=t.concat(this._getPagerParams()),this.queryParams)for(var e in this.queryParams)t.push(n.youi.parameterUtils.propertyParameter(e,this.queryParams[e]));return t},_getPagerParams:function(){var t=[];return t.push("pager:pageIndex="+this.currentPageIndex),t.push("pager:pageSize="+(this.options.pageSize<0?10:this.options.pageSize)),t},_destroy:function(){this._callGloablFunc("destroy")}}))},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),function(t){var e=t.youi.log;t.widget("youi.form",t.youi.abstractWidget,t.extend({},{options:{bindResize:!0},_initWidget:function(){if(!0===this.options.dialog){this.element.dialog({width:(this.options.width||800)+28,title:this.options.caption,modal:!0,zIndex:this.options.zIndex,close:this.options.close});var e=this.element.parents(".modal-dialog:first").find(".modal-footer");e.empty().append(this.element.find(".form-buttons"));var i=this;e.delegate(".youi-button","click",function(e){var n=t(e.currentTarget).data();i.execCommand(e.currentTarget,n,i.getFormRecord())})}this._bindWidgetCommand()},_initAction:function(){this.element.bind("submit.form",function(){return t(this).form("submit"),!1}),this._on({"keydown input.textInput":function(t){if(13==t.keyCode)return this.submit(),!1},"click  .form-buttons>.btn-group>.youi-button:not(.disabled)":function(e){var i=t(e.currentTarget).data();if(i.property&&t.youi.stringUtils.notEmpty(i.value)){var n=[];n[i.property]=i.value,this.submit(null,null,n)}else this.execCommand(e.currentTarget,i,this.getFormRecord());return!1}})},validate:function(t){return this.element.find(".youi-field:visible").fieldValidate(t),0==this.element.find(".youi-field.validating:visible,.youi-field.validate-error:visible,.edited.validate-error:visible").length},getFormRecord:function(){var e={};return this.element.find(".youi-field").each(function(i){var n,s=t(this).data("property");s&&(((n=t(this).fieldValue())||0===n)&&(e[s]=n),n=null)}),e},reset:function(){this.element.find(".youi-field").fieldReset(),this._callGloablFunc("afterReset")},formReset:function(){this.record?this.fillRecord(this.record):this.element.find(".youi-field").fieldReset()},clear:function(){this.element.find(".youi-field").fieldClear()},submit:function(e,i,n){var s=this,a=t.extend({},this.getFormRecord(),n);if(!1===this.validate(a)){var o=[];return this.element.find(".youi-field.validating:visible,.youi-field.validate-error:visible,.edited.validate-error:visible").each(function(){this.title&&o.push(this.title)}),t.youi.messageUtils.showError("<pre>"+o.join("\n")+"</pre>"),this._releaseSubmitButton(),!1}if(this.options.confirmMessage){var r=t.youi.recordUtils.replaceByRecord(this.options.confirmMessage,a,!0);t.youi.messageUtils.confirm(r,function(){s._submit(a)})}else this._submit(a)},_submit:function(i){if(!1===this._callGloablFunc("beforeSubmit",i))return!1;var n=[],s=t.youi.recordUtils.recordToParameters(i);n=n.concat(t.youi.parameterUtils.toParams(s));var a=t.trim(this.element.attr("action"));if(a){a=(a=(a.match(/^([^#]+)/)||[])[1])||window.location.href||"";var o=this,r={url:a,data:n.join("&"),dataType:this.options.dataType||"json",success:function(t){o._afterSubmit(t)},domainValidator:this._proxy("_showValidatorError"),error:function(e){"string"==typeof e?t.youi.messageUtils.showError(e):alert("后台页面"+this.url+"访问异常!"),o._releaseSubmitButton()}};this.element.find("[data-name=submit]").addClass("disabled");var l=!1;if(t(".youi-field input:file",this.element).each(function(){this.value&&(l=!0)}),l){var d=t.extend({},r,{iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",extraData:{}});t(s).each(function(){d.extraData[this.property]=this.value,o.element.find("[name="+this.property+"]").removeAttr("name")}),function(i,n){var s=i[0];if(t(":input[name=submit]",s).length)return void alert('Error: Form elements must not be named "submit".');var a=t.extend({},t.ajaxSettings,n),o=t.extend(!0,{},t.extend(!0,{},t.ajaxSettings),a),r="jqFormIO"+(new Date).getTime(),l=t('<iframe id="'+r+'" name="'+r+'" src="'+a.iframeSrc+'" />'),d=l[0];l.css({position:"absolute",top:"-1000px",left:"-1000px"});var u={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1,l.attr("src",a.iframeSrc)}},h=a.global;h&&!t.active++&&t.event.trigger("ajaxStart");h&&t.event.trigger("ajaxSend",[u,a]);if(o.beforeSend&&!1===o.beforeSend(u,o))return void(o.global&&t.active--);if(u.aborted)return;var c=0,p=0,f=s.clk;if(f){var m=f.name;m&&!f.disabled&&(n.extraData=n.extraData||{},n.extraData[m]=f.value,"image"==f.type&&(n.extraData[name+".x"]=s.clk_x,n.extraData[name+".y"]=s.clk_y))}setTimeout(function(){var e=i.attr("target"),o=i.attr("action");s.setAttribute("target",r),"POST"!=s.getAttribute("method")&&s.setAttribute("method","POST"),s.getAttribute("action")!=a.url&&s.setAttribute("action",a.url),n.skipEncodingOverride||i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),a.timeout&&setTimeout(function(){p=!0,v()},a.timeout);var u=[];try{if(t.extend(n.extraData,{"data:authorization":t.youi.serverConfig.authorization}),n.extraData)for(var h in n.extraData)i.find('input[name="'+h+'"]').length||u.push(t('<input type="hidden" name="'+h+'" value="'+n.extraData[h]+'" />').appendTo(s)[0]);l.appendTo("body"),d.attachEvent?d.attachEvent("onload",v):d.addEventListener("load",v,!1),s.submit()}finally{s.setAttribute("action",o),e?s.setAttribute("target",e):i.removeAttr("target"),t(u).remove()}},10);var g=50;function v(){if(!c++){d.detachEvent?d.detachEvent("onload",v):d.removeEventListener("load",v,!1);var i=!0;try{if(p)throw"timeout";var n,s;s=d.contentWindow?d.contentWindow.document:d.contentDocument?d.contentDocument:d.document;var o="xml"==a.dataType||s.XMLDocument||t.isXMLDoc(s);if(!o&&(null==s.body||""==s.body.innerHTML))return--g?(c=0,void setTimeout(v,100)):void e.info("Could not access iframe DOM after 50 tries.");if(u.responseText=s.body?s.body.innerHTML:null,u.responseXML=s.XMLDocument?s.XMLDocument:s,u.getResponseHeader=function(t){var e={"content-type":a.dataType};return e[t]},"json"==a.dataType||"script"==a.dataType){var r=s.getElementsByTagName("textarea")[0];if(r)u.responseText=r.value;else{var f=s.getElementsByTagName("pre")[0];f&&(u.responseText=f.innerHTML)}}else"xml"!=a.dataType||u.responseXML||null==u.responseText||(u.responseXML=function(t,e){window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml");return e&&e.documentElement&&"parsererror"!=e.documentElement.tagName?e:null}(u.responseText));n=jQuery.parseJSON(u.responseText)}catch(t){i=!1,a.error.apply(a,[t])}if(i){if(!t.youi.ajaxUtils.resultsCheck(n,{error:a.error,domainValidator:n.domainValidator}))return;a.success(n,"success"),h&&t.event.trigger("ajaxSuccess",[u,a])}h&&t.event.trigger("ajaxComplete",[u,a]),h&&!--t.active&&t.event.trigger("ajaxStop"),a.complete&&a.complete(u,i?"success":"error"),setTimeout(function(){l.remove(),u.responseXML=null},100)}}}(this.element,d)}else t.youi.ajaxUtils.ajax(r)}else this._afterSubmit({record:i})},_showValidatorError:function(e){var i={};this.element.find(".youi-field[data-property]").each(function(){var e=t(this),n=e.data("property");i[n]=e.prev(".field-label").text()||n});var n=t.youi.recordUtils.replaceByRecord(e.message.info,i,!0);t.youi.messageUtils.showError(t.youi.resourceUtils.get("form.invalid",n))},goback:function(){window.history.go(-1)},fillRecord:function(i){this.record=i;var n=","+(this.options.idKeys||"")+",";this.element.find(".youi-field").each(function(s){var a=this.getAttribute("data-property"),o=t(".textInput:first",this).attr("showProperty"),r=t.youi.recordUtils.getPropertyValue(i,a);if(null!=r&&0!=r.length)try{var l=o?t.youi.recordUtils.getPropertyValue(i,o):null,d=t(this);d.fieldValue(r,l),-1!=n.indexOf(","+a+",")&&d.fieldDisabled()}catch(t){e.info("设置值异常："+t)}})},find:function(e,i,n){this.element.find(".youi-field").fieldReset();t.youi.ajaxUtils.ajax({url:e,widgetId:this.options.id,afterFind:i,success:function(e){e&&e.record&&(t("#"+this.widgetId).form("fillRecord",t.extend({},e.record,n)),t.isFunction(this.afterFind)&&this.afterFind.apply(this,[e.record]))}})},_afterSubmit:function(e){if(this._releaseSubmitButton(),"html"===this.options.dataType){var i=this.options.id+"_dialog_html",n=t("#"+i);0===n.length&&(n=t('<div id="'+i+'"/>').appendTo(t("body",document))).dialog({title:this.options.caption,width:parseInt(this.options.width)+24}),n.html(e).dialog("open")}1==this.options.dialog&&this.element.dialog("close"),this._callGloablFunc("afterSubmit",e)},close:function(){this.element.dialog("close")},_releaseSubmitButton:function(){this.element.find("[data-name=submit]").removeClass("disabled")},disableButton:function(e){if(e){var i=[];t.isArray(e)?i=e:i.push(e);for(var n=0;n<i.length;n++)this.element.find("button[data-name="+i[n]+"]").addClass("disabled")}},enableButton:function(e){if(e){var i=[];t.isArray(e)?i=e:i.push(e);for(var n=0;n<i.length;n++)this.element.find("button[data-name="+i[n]+"]").removeClass("disabled")}}}))}(jQuery)},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),function(t){"use strict";t.widget("youi.tabs",t.youi.abstractWidget,t.extend({},{options:{bindResize:!0},_initWidget:function(){var e=this.element.prev(".tab-content").before(this.element);this.tabContent=e,!0===this.options.pageHash?0==window.location.hash.indexOf(t.youi.pageHashPrefix+":")&&this._activeTabItem(0):this._activeTabItem(0)},_activeTabItem:function(t){var e=this.element.find("li:eq("+t+")");e.length&&!e.is(".active")&&e.find(">a").tab("show")},_loadPanePage:function(e,i){var n=this.tabContent.find('>[data-id="'+e+'"]'),s=i.src||this.options.itemSrc;if(s&&n.length&&!n.is(".loaded")){var a=t.extend({},n.data(),this._callGloablFunc("paramRecord"),{id:e}),o=t.youi.pageUtils.parsePageUrl(s,a);this._resize(n),t.youi.pageUtils.loadPage(n,o,function(){t(this).addClass("loaded").find(">.youi-page:first").trigger("pageResize")})}},_initAction:function(){var e=this;this.element.delegate(">li>a","shown.bs.tab",function(i){var n=i.currentTarget.getAttribute("data-id");!0===e.options.pageHash&&t(i.delegateTarget).trigger("setpagehash",{hash:n}),e._loadPanePage(n,t(i.currentTarget).parent().data())}),!0===this.options.pageHash&&this._on({setpagehash:function(e,i){if(i.hash){var n=[];this.element.parents("[data-hash]").each(function(){n.push(t(this).data("hash"))}),window.location.hash="p_"+i.hash+":"+n.join("|")}else this._activeTabItem(0);return!1},pagehash:function(t,e){if(e.partHash){var i=this.element.find('>li a[data-id="'+e.partHash+'"]');i.parent().is(".active")||i.tab("show")}return!1}})},openTabitem:function(e){if(e&&"string"==typeof e){var i=this.element.find("#"+e);i.tab("show");var n=i.data("src")||this.options.itemSrc;if(n){var s=t(i.attr("href"));if(s.length&&!s.hasClass("loaded")){var a=t.extend({},this._callGloablFunc("paramRecord"),{id:i.attr("id")}),o=t.youi.pageUtils.parsePageUrl(n,a);t.youi.pageUtils.loadPage(s,o,function(){t(">.youi-page",this).height(300).addClass("inner-page").trigger("pageResize")})}}}},_resize:function(e){if(this.element.hasClass("resize-height")){var i=this.element.parent().innerHeight()-this.element.height()-16;e?e.height(i):((e=this.tabContent.find(".tab-pane.active:first")).height(i),t.youi.pageUtils.resizePageHeight(e))}}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2015, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2015-6-24
 */
i(0),(n=jQuery).youi.log,n.widget("youi.progressbar",{options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=n("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change",null,{percentage:e})),t===this.options.max&&this._trigger("complete")}})},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-3-3
 */
i(0),function(t){"use strict";t.youi.log;function e(e){e&&0!=e.length&&(e.addClass("last"),!t.support.boxModel&&e.hasClass("expandable")&&(e.hasClass("expanded")?e.addClass("lastExpanded"):e.addClass("lastExpandable")))}function i(e,n,s,a){s=s||{};var o=['<li id="'+e+'"'],r=["treeNode"],l=["tree-span"],d="",u=!0===(a=a||{}).leaf||"1"===a.leaf||"NOT"==s.src,h=t.isArray(a.children)&&a.children.length;if(u||!s.src&&!h||(r.push("expandable"),l.push("expandable"),d='<div class="tree-trigger"></div>'),a.check&&(r.push("check"),l.push("check"),1!=a.check&&(r.push(a.check),l.push(a.check))),a.group&&(r.push(a.group),l.push(a.group),s.group=a.group),a.icon&&r.push("use-icon"),a.expanded&&r.push("expanded"),u&&r.push("leaf"),o.push(' class="'+r.join(" ")+'" '),s)for(var c in s)t.youi.stringUtils.notEmpty(s[c])&&(o.push(" data-"+c),o.push('="'),o.push(s[c]+'" '));if(o.push(">"),o.push(d),o.push('<span title="'+(a.tooltips||n)+'" '+(l?'class="'+l.join(" ")+'"':"")+">"),a.icon&&o.push('<i class="youi-icon icon-'+a.icon+'"></i>'),o.push('<a class="tree-a" href="#">'),o.push(n),o.push("</a>"),a.tooltips&&o.push('<span class="tree-node-hint">['+a.tooltips+"]</span>"),o.push("</span>"),h){o.push("<ul "+(a.expanded?"":'style="display:none;"')+">");for(var p=0;p<a.children.length;p++){var f=a.children[p];f.check=f.check||(a.check?"check":""),o.push(i(f.id,f.text,t.extend({src:f.src,code:f.code,check:f.check},f.datas),f)),f=null}o.push("</ul>")}return o.push("</li>"),o.join("")}function n(t){return{src:t.data("src"),idAttr:t.data("idattr"),textAttr:t.data("textattr")}}function s(t){return t.find(">span>a").text()}function a(t){null!=t&&t.removeClass("loading").addClass("loaded").find(">span>.loading").remove()}t.widget("youi.tree",t.youi.abstractWidget,t.extend({},{options:{serverPath:"",srcDataType:"json",dataParse:function(e,s){s=t.extend({},s,n(this.treeNodeElement));var a=n(this.treeNodeElement);return"xml"==s.srcDataType?parseXml(this.treeNodeElement,s,a,e):"json"==s.srcDataType&&function(e,n,s,a){var o=a.records,r=["<ul>"],l=s.leaf?null:n.iteratorSrc,d=n.iteratorParentAttr,u=s.idAttr||n.idAttr,h=s.textAttr||n.textAttr||"",c=h.split(".");if(!o||0==o.length)return void e.removeClass("expandable").removeClass("expanded").removeClass("lastExpandable").find(">span").removeClass("expandable").removeClass("expanded");t(o).each(function(){var e;e=c.length>1?this[c[0]][c[1]]:this[h]||this.text,this.datas=this.datas||{};var s=this[u]||this.id,a=this.src||(l?t.youi.parameterUtils.connectParameter(l,d,s):null),o={code:this.code},p={leaf:this.leaf||this.datas.leaf,check:this.check||n.check,group:this.group,tooltips:this.tooltips,icon:this.icon,expanded:this.expanded,children:this.children};if(a&&t.extend(o,{src:this.src||a,idAttr:this.idAttr||u,textAttr:this.textAttr||h}),s&&e){var f=1==n.mixed?"("+s+")"+e:e;r.push(i(s,f,t.extend({},this.datas,o),p))}o=null,p=null}),r.push("</ul>"),e.append(r.join(""))}(this.treeNodeElement,s,a,e),""},root:"根节点",idAttr:"value",textAttr:"show",autoLoad:!0,checkedChildren:!0,checkedParents:!0,dragDrop:!1,dragStyles:["treeNode"],delay:0,distance:1,mixed:!1},_initWidget:function(){if(this.options.after=this.options.after||window[this.options.id+"_afterLoad"],this.options.children){var e=i(this.options.rootId||"root_"+(new Date).getTime(),this.options.rootText,{},{group:"root",children:this.options.children});this.element.html("<ul>"+e+"</ul>")}else this.options.iteratorSrc&&1==this.options.autoLoad?this.loadIteratorRoot():this.element.find("li.treeNode.expandable:not(.expanded)>ul").hide();this.options.iteratorSrc||this.options.notExpand||this._expandNode(this.element.find("li:first:not(.expanded)"),{},this.options.after),!0===this.options.dragable&&(this.options.container=this.options.container||t("body",document),this._mouseInit()),this.options.hideRoot&&this.element.find("span.root:first").hide(),this._bindWidgetCommand()},loadIteratorRoot:function(){if(this.options.iteratorSrc&&0==this.element.find("li.root").length){var t=this.options,e=this.options.iteratorSrc;e=e+(-1==e.indexOf("?")?"?":"&")+this.options.iteratorParentAttr+"=",this.element.html("").append('<ul><li class="treeNode root" src="'+e+'" code="'+t.idAttr+'" show="'+t.textAttr+'"><span class="root"><a class="tree-a">'+t.root+"</a></span></li></ul>");var i=this.element.find("li:first");this._loadSrc(i,this.options.after)}},_initAction:function(){this._on({"dblclick li.treeNode>span":function(t){this._triggleNode(t.currentTarget.parentNode)},"click li.treeNode>span":function(t){return this._selectedNode(t.currentTarget.parentNode,t.ctrlKey),!1},"click li.treeNode>.tree-trigger":function(t){return this._triggleNode(t.currentTarget.parentNode),!1},"contextmenu li.treeNode>span":function(e){return this._selectedNode(e.currentTarget.parentNode,e.ctrlKey),this.options.xmenu&&this._showContextmenu(e,t(e.currentTarget.parentNode)),!1},"contextmenuAction li.treeNode":function(e,i){return i.name&&this._callGloablFunc("xmenu_"+i.name,t(e.currentTarget),i),!1}})},_showContextmenu:function(e,i){if(this.options.xmenu){var n=t("#"+this.options.xmenu),a=["property:"+s(i)].concat(i[0].className.split(" ")),o=n.parents(".page-container:first").offset();n.trigger("open",{bind:i[0],left:e.pageX-o.left-25,top:e.pageY-o.top-15,groups:a})}},_mouseStart:function(e){var i=t(e.target),n=i.is("li.treeNode")?i:i.parents(".treeNode:first");if(n.hasClass(this.options.dragStyles)){this.currentDrag=n;var a=n.parent().parent();this.currentDragData=t.extend({},{parentData:t.extend({id:a.attr("id"),text:s(a)},a.data()),id:this.currentDrag.attr("id"),text:this.currentDrag.find(">span>a").text(),groups:this.currentDrag[0].className.split(" ")},this.currentDrag.data()),this.helper=this._createHelper(e,n.find(">span"))}},_mouseDrag:function(e){var i=t(e.target);this.helper&&(this.position=this._generatePosition(e),this.helper.css(this.position)),i.hasClass(this.options.dropStyle)?this.currentDrop&&this.currentDrop[0]!==i[0]?this._releaseDrop():(i.addClass("dropping"),this.currentDrop=i,i.trigger("dropping",this.currentDragData)):this._releaseDrop()},_releaseDrop:function(){this.currentDrop&&(this.currentDrop.removeClass("dropping"),this.currentDrop.trigger("dropout",{}),this.currentDrop=null)},_mouseStop:function(e){this.helper&&this.currentDrag&&this.currentDrop&&(this.currentDragData=t.extend({},{id:this.currentDrag.attr("id"),text:s(this.currentDrag),parentText:s(this.currentDrag.parent().parent()),groups:this.currentDrag[0].className.split(" ")},this.currentDrag.data()),this.currentDrop.trigger("dropStop",this.currentDragData),this.currentDrop.removeClass("dropping")),this.helper&&this.helper.remove(),this.helper=null,this.currentDrop=null,this.currentDrag=null,this.currentDragData=null},_createHelper:function(e,i){var n=t('<span class="drop-yes" id="tree-drop-helper"></span>').append(i.clone());return n.parents("body").length||n.appendTo(this.options.container?this.options.container:this.currentDrag),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n.css("zIndex","9999"),n},_generatePosition:function(t){var e=t.pageX,i=t.pageY,n=this.options.container?this.options.container.offset():this.element.offset();return{top:i+10-n.top,left:e+5-n.left}},_triggleNode:function(e){var i=t(e);i.hasClass("leaf")||(i.toggleClass("expanded"),i.hasClass("expanded")?this._expandNode(i):this._collapseNode(i))},_collapseNode:function(t){t.find(">ul").hide()},_expandNode:function(e,i,n){this.options;var s=e.data("src")||e.attr("src");i=(n=n||i)&&i,e.find(">ul").show(),s&&!e.hasClass("loaded")?(e.addClass("loaded"),this._loadSrc(e,i,n)):t.isFunction(n)&&n.apply(e[0],[i]),e.addClass("expanded"),t.support.boxModel||this.element.find(">tree-trigger").css({position:"absolute"})},_selectedNode:function(e,i){var n=t(e);if(t.isFunction(this.options.clickNode)&&this._trigger("clickNode",this.options.clickNode,{clickNodeElement:n}),n.hasClass("selected")||(n.addClass("selected"),this.element.find(".selected").not(n).removeClass("selected"),this._callGloablFunc("select",n),t.isFunction(this.options.select)&&this._trigger("select",this.options.select,{selectedNode:n})),n.hasClass("check")){if(n.toggleClass("checked"),i)return;n.hasClass("checked")?(this.options.checkedChildren&&n.find("li.treeNode").addClass("checked"),this.options.checkedParents&&n.parents("li.treeNode").addClass("checked")):this.options.checkedChildren&&n.find("li.treeNode.checked").removeClass("checked")}},_loadSrc:function(e,i,n){var s=this.options,a=e.data("src")||e.attr("src");i=(n=n||i)&&i,e.addClass("loading").find(">span:first").prepend('<span class="loading icon-refresh icon-spin"></span>'),t.youi.ajaxUtils.ajax({url:a,dataType:s.srcDataType,contentType:"application/x-www-form-urlencoded;charset=UTF-8",success:this._proxy("_loadSuccess",e,n,i),error:this._proxy("_loadError",e)})},_loadError:function(t,e,i,n){a(n)},_loadSuccess:function(e,i,n,s){a(i),t.isFunction(this.options.dataParse)&&i.hasClass("loaded")&&this.options.dataParse.apply({treeNodeElement:i},[e,this.options]);var o=i.find(">ul>li:last");o.addClass("last"),i.find("ul:first").show(),o.hasClass("expandable")&&o.addClass("lastExpandable"),t.isFunction(n)&&n.apply(i[0],[s,e])},_addChild:function(i,n){var s=i.find(">ul");0==s.length?s=t("<ul></ul>").appendTo(i):function(t){if(!t||0==t.length)return;t.removeClass("last").removeClass("lastExpanded").removeClass("lastExpandable")}(s.find(">li:last")),0==s.children().length&&(i.addClass("expandable expanded").children("span:first").addClass("expandable expanded"),i.hasClass("last")&&i.addClass("lastExpanded"),i.prepend('<div class="tree-trigger"></div>')),e(n),s.append(n)},_addBefore:function(t,e){t.before(e)},_addAfter:function(t,e){t.after(e),t.is(".last")&&(t.removeClass("last").removeClass("lastExpandable").removeClass("lastExpanded"),e.addClass("last"))},_removeNode:function(t){0==t.length||t.hasClass("root")||(this._relativeNodeByRemove(t),this.selectedNode(null,this._nextNode(t)),t.remove())},removeNode:function(t){this._removeNode(t)},selectedNode:function(t,e){this._selectedNode(e)},_nextNode:function(t){var e=t.next();return 0==e.length&&(e=t.parent().parent()),e.hasClass("root")&&(e=e.find("li.treeNode:first")),e},_relativeNodeByRemove:function(i){if(i.is(".last")){var n=i.prev(),s=i.parent().parent();n.length>0?e(n):(s.removeClass("expandable").removeClass("expanded"),s.children("span:first").removeClass("expandable").removeClass("expanded"),s.removeClass("lastExpanded").removeClass("lastExpandable"),t.support.boxModel||s.find(">ul").hide()),i.removeClass("last")}},checkedTreeNodes:function(e,i){this.clearCheckedTreeNodes(),t.isArray(e)&&this.expandAll(null,function(){t(this);t("li.treeNode",this).each(function(){var i=this.getAttribute("id");-1!=t.inArray(i,e)&&t(this).addClass("checked").find(">span:first").addClass("checked")})},!i&&e)},clearCheckedTreeNodes:function(){this.element.find(".checked").removeClass("checked"),this.element.find(".partchecked").removeClass("partchecked")},expandAll:function(e,i,n){e||(e=this.element.find("li:first")),this._expandNode(e,{treeElement:this.element},function(e){var s=e.treeElement;t(">ul>li",this).each(function(){s.tree("expandAll",t(this),i,n)}),t.isFunction(i)&&i.apply(this)})},openPath:function(e){if(e){0==e.indexOf("/")&&(e=e.substring(1));var i=e.split("/"),n=i.shift(),s=this.element.find("li#"+n);0!=s.length&&(0==i.length?(this._selectedNode(s),s.find("a:first").focus()):this._expandNode(s,{treeElement:this.element[0],subPath:i.join("/")},function(e){t(e.treeElement).tree("openPath",e.subPath)}))}},getSelected:function(){var t=this.element.find("li.treeNode.selected");return 0==t.length?null:t},ajaxRemoveNode:function(e,i,n,s,a,o){if(i){var r=this._proxy("_afterRemove",e,o);t.youi.messageUtils.confirm(a||"确认删除？",function(){t.youi.ajaxUtils.ajax({url:i,data:t.youi.parameterUtils.propertyParameter(n,s),success:r})})}},_afterRemove:function(e,i,n){this._removeNode(i),t.isFunction(n)&&n("")},addNode:function(e,n,s,a,o,r,l){var d=i(n,s,a,o),u=e||this.getSelected()||this.element.find("li:first"),h=!0;if(u&&0!=u.length){var c=t(d);switch(l){case"before":this._addBefore(u,c);break;case"after":this._addAfter(u,c);break;default:if(!u.hasClass("expandable")||u.hasClass("expanded"))this._addChild(u,c);else{h=!1;o={tree:this,treeNode:u,addNodeHtml:d,afterAdd:r};this._expandNode(u,o,function(e){!t(this).data("src")||t(this).hasClass("loaded"),t.isFunction(e.afterAdd)&&e.afterAdd.apply(this,[n]),e=null}),o=null}}return h&&t.isFunction(r)&&r.apply(u[0],[n]),c}},moveNode:function(t,e){this._expandNode(e,this._proxy("_moveNode",t,e))},_moveNode:function(t,e,i){var n=e.clone().removeClass("selected").removeClass("dropping");this.removeNode(e),this._addChild(i,n)},visitParents:function(t,e){t.parents("li.treeNode:not(.root)").each(function(){e(this)})}})),t.youi.treeUtils={treeNodeHtml:i,getNodeText:s}}(jQuery)},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),function(t){t.youi.timerInterval=t.youi.timerInterval||5,t.youi.timerCount=0,function e(){t(".youi-page:visible").each(function(){var e=this.getAttribute("id")+"_page_timer";t.isFunction(window[e])&&window[e].apply(this,[t.youi.timerCount])});t.youi.timerCount++;var i=1e3*parseInt(t.youi.timerInterval);window.setTimeout(e,i||5e3)}(),t.widget("youi.page",t.youi.abstractWidget,t.extend({},{options:{bindResize:!0},_initWidget:function(){this.options.pageId;var e=this.element.data("caption")||"",i=this.element.parent();i.hasClass("youi-subpage")||i.hasClass("second-page")||t("body",document).trigger("pagetitle",{title:e}),this.options.dataSrc?t.youi.ajaxUtils.ajax({url:this.options.dataSrc,success:this._proxy("_doPageInit")}):this._doPageInit(),t(window).trigger("resize")},_doPageInit:function(t){this.__callGloablFunc("P_"+this.options.pageId+"_init",t||{})},_getPageFuncName:function(t){return function(t,e){return"P_"+t+"_"+e}(this.options.pageId,t)},_initAction:function(){this._on({"setpagehash [data-hash]":function(t,e){return!1},'click [data-command="pageCommand"]:not(.disabled)':function(e){var i=t(e.currentTarget).data();this.execCommand(e.currentTarget,i),e.stopPropagation()}})},_destroy:function(){delete window[this._getPageFuncName("init")],delete window[this._getPageFuncName("page_timer")],this._callGloablFunc("destroy")}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
i(0),(n=jQuery).widget("youi.subpage",n.youi.abstractWidget,n.extend({},{options:{bindResize:!0,width:800},_initWidget:function(){if("dialog"===this.options.type){this.options.formConfirm;var t=this.element.parents(".modal:first:visible");t.length&&(this.element.attr("parent-dialog",t.attr("id")),t.after(this.element)),this.element.dialog({title:this.options.caption,width:parseInt(this.options.width)+24,buttons:this.options.buttons,submit:this.options.formSubmit||"提交",confirmMessage:this.options.formConfirm,submitAction:this.options.formAction?function(){n(this).form("submit")}:null}),this.options.formAction&&this.element.addClass("youi-form").form({id:this.options.id,findAction:this.options.editSrc,idKeys:this.options.idKeys,initHtml:!1}),this.element.parents(".modal-content:first").delegate("button[data-property]","click",function(t){var e=n(t.currentTarget).data();if(e.property&&!n.youi.stringUtils.isEmpty(e.value)){var i={};i[e.property]=e.value,e.confirm?n.youi.messageUtils.confirm(e.confirm,function(){n(".youi-form:first",t.delegateTarget).form("submit",null,e,i)}):n(".youi-form:first",t.delegateTarget).form("submit",null,e,i)}})}},_initAction:function(){this._on({pagechange:function(t,e){this._callGloablFunc("change",e)}})},open:function(t,e,i,n){switch(n=n||"",this.options.type){case"page":this._openPage(t,i);break;case"secondPage":this._openSecondPage(t,i);break;case"window":break;case"dialog":this._openDialog(t,i,n)}},_openSecondPage:function(t,e){var i,s=this.element.parents(".page-container:first").addClass("hide");s.hasClass("second-page")?i=s:0==(i=s.next(".second-page")).length&&(i=n('<div class="page-container second-page"></div>').insertAfter(s)),n.youi.pageUtils.loadPage(i,n.youi.pageUtils.parsePageUrl(this.options.src,e),function(){n("body",document).trigger("openSecondPage",{title:n(">.youi-page",this).data("caption")})})},_openPage:function(t,e){this.element.parents(".page-container:first").length&&(window.location.hash="p:"+n.youi.pageUtils.parsePageUrl(this.options.src,e))},_openDialog:function(t,e,i){this.element.dialog("open",t);var s=this,a=n.youi.pageUtils.parsePageUrl(this.options.src,e);if(a==this.options.src&&this.element.hasClass("loaded")||(n(".youi-dialog[parent-dialog=modal_"+this.options.id+"]").parent().parent().parent().parent().remove(),this.element.hide(),n.youi.pageUtils.loadPage(this.element,a,function(){n(">.youi-page:first",this).data("parentPageId",i),s._renderPropertyButtons(n(">.youi-page>button[data-property]",this)),n(this).show()})),this.options.formAction){var o=n.youi.pageUtils.parsePageUrl(this.options.formAction,e);this.element.attr("action",o)}},_renderPropertyButtons:function(t){var e=this.element.parents(".modal-content:first").find(".modal-footer:last");e.find("button[data-property]").remove(),e.prepend(t)},_destroy:function(){this._callGloablFunc("destroy")}}))},function(t,e){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2015, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2015-1-26
 */
!function(t){"use strict";t.widget("youi.xmenu",t.youi.abstractWidget,t.extend({},{options:{},_initModel:function(){},_initWidget:function(){this.element.addClass("dropdown-menu")},_defaultHtmls:function(){var e=[],i=this.options.menus;if(t.isArray(i))for(var n=0;n<i.length;n++)e.push('<li data-groups="'+(i[n].groups||"")+'" data-name="'+i[n].name+'" class="xmenu-item '+i[n].name+" "),i[n].widgets&&e.push(i[n].widgets.join(" ")),e.push('"><a data-command="menuCommand" '+(i[n].value?' data-value="'+i[n].value+'" ':"")+' href="#">'),i[n].icon?e.push('<span class="youi-icon icon-'+i[n].icon+'"/>'):e.push('<span class="youi-icon icon-empty"/>'),e.push(i[n].caption.replace(/{[0-9]}/g,'<span class="value"></span>')),e.push("</a></li>");this.element.html(e.join(""))},_initAction:function(){this.element.bind("mouseleave",function(e){t(this).hide()}),this._on({open:function(t,e){return this.open(e,e.groups),!1},'click [data-command="menuCommand"]':function(e){return this.bindOptions&&this.bindOptions.bind&&t(this.bindOptions.bind).trigger("contextmenuAction",t(e.currentTarget.parentNode).data()),this.element.hide(),!1}})},execCommand:function(e,i){if(this.bindOptions){if(t.isFunction(this.bindOptions.commandAction))this.bindOptions.commandAction(e,i);else{var n=this.element.data("bindWidget");t(this.bindOptions.bindWidget).trigger(n+".contextmenu",t.extend({},this.bindOptions,i))}this.element.hide()}},open:function(e,i){this.bindOptions=e;for(var n=[],s=(this.options.group,0);s<i.length;s++)0==i[s].indexOf("property:")&&n.push(i[s].substring("property:".length,i[s].length));this.bindOptions.properties=n,this.element.find(".xmenu-item.show").removeClass("show"),this.element.find(".xmenu-item").each(function(e){for(var s=t(this),a=(s.data("groups")||"").split(","),o=!1,r=0;r<a.length;r++)if(-1!=t.inArray(a[r],i)){o=!0;break}o&&(s.addClass("show"),n&&n.length&&t(".value",this).each(function(e){n[e];t(this).text(n[e])}))}),this.element.find(".xmenu-item.show:first").length>0&&this.element.css({left:Math.max(e.left,0),top:e.top}).show()},_resize:function(){},_destroy:function(){}}))}(jQuery)},function(t,e){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2015, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2015-1-26
 */
!function(t){"use strict";t.widget("youi.toolbar",t.youi.abstractWidget,t.extend({},{options:{},_initModel:function(){},_initWidget:function(){},_defaultHtmls:function(){var e=[],i=this.options.items;if(t.isArray(i))for(var n=0;n<i.length;n++)e.push('<li data-groups="'+(i[n].groups||"")+'" data-name="'+i[n].name+'" class="toolbar-item '+i[n].name+" "),i[n].widgets&&e.push(i[n].widgets.join(" ")),t.isArray(i[n].groups)&&i[n].groups.length&&e.push(" disabled"),e.push('"><a data-command="toolbarCommand" '+(i[n].value?' data-value="'+i[n].value+'" ':"")+' href="#">'),i[n].icon?e.push('<span class="youi-icon icon-'+i[n].icon+'"/>'):e.push('<span class="youi-icon icon-empty"/>'),e.push(i[n].caption.replace(/{[0-9]}/g,'<span class="value"></span>')),e.push("</a></li>");this.element.html(e.join(""))},_initAction:function(){if(this._on({"click [data-command=toolbarCommand]:not(.disabled)":function(e){var i=t(e.currentTarget).parent();if(i.hasClass("disabled"))return!1;var n,s,a,o=t.extend({},i.data());this.options.refWidgetId?o.name&&t("#"+this.options.refWidgetId).trigger("widgetCommand",o):this.execCommand(e.currentTarget,o),s=(n=i).data("name"),(a=n.parent().find("li.toolbar-item[data-name="+s+"]")).length>1&&(a.removeClass("active"),n.addClass("active"))}}),this.options.refWidgetId){var e=t("#"+this.options.refWidgetId);e.bind("activeTools",this._proxy("_activeTools")),e.bind("refreshTools",this._proxy("_refreshTools"))}},_refreshTools:function(e,i){if(i&&i.dropdowns){var n=[];t(i.dropdowns).each(function(){n.push(function(e){var i=['<li class="dropdown"><span class="youi-icon icon-" data-toggle="dropdown" aria-expanded="false">'+e.text+'</span><ul class="dropdown-menu">'];return t(e.items).each(function(){i.push('<li class="youi-toolbarItem toolbar-item" data-text="'+this.text+'" data-id="'+this.id+'" data-name="'+this.name+'" data-value="'+this.value+'"><a title="" data-command="toolbarCommand" href="#">'+this.text+"</a></li>")}),i.push("</ul></li>"),i.join("")}(this))}),this.element.append(n.join(""))}},_activeTools:function(e,i){this.element.find("[data-groups]").each(function(){var e=t(this).data("groups");if(e){t(this).addClass("disabled");var n=e.split(",");if(i&&i.groups)for(var s=0;s<n.length;s++)if(-1!==t.inArray(n[s],i.groups)){t(this).removeClass("disabled");break}}})},_resize:function(){},_destroy:function(){}}))}(jQuery)},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),function(t){function e(t,e){for(var i=0;i<t.length;i++)if(t[i].id==e)return t[i];return null}t.widget("youi.fieldLayout",t.youi.abstractWidget,t.extend({},{options:{},_initWidget:function(){this.fields=[],this._initFieldModels(),this._initFields()},parseFields:function(e){this.options.fields=e;var i=[],n=this.options.id;t(e).each(function(){this.id=this.id||n+"_"+this.property,i.push('<div class="form-group col-sm-6 label-80"><label class="control-label field-label">'+this.caption+"：</label>"),i.push('<div id="'+this.id+'" class="youi-field" data-property="'+this.property+'"></div>'),i.push("</div>")}),this.element.html(i.join("")),this._initWidget()},_initFieldModels:function(){if(this.options.fields&&this.options.fields.length){var e=this.options.fields,i=[],n=this.options.prefix;t(e).each(function(s){for(var a=t.youi.fieldUtils.getFieldId(this.property,n),o="",r="",l=s-1;e[l];){if("fieldHidden"!=e[l].type){o=t.youi.fieldUtils.getFieldId(e[l].property,n);break}l--}for(var d=s+1;e[d];){if("fieldHidden"!=e[d].type){r=t.youi.fieldUtils.getFieldId(e[d].property,n);break}d++}if(this.parentProperties&&this.parentProperties.length){var u=[];t(this.parentProperties).each(function(){u.push(t.youi.fieldUtils.getFieldId(this))}),this.parentIds=u}i.push(t.extend({id:a,type:"fieldText",column:1,nextField:r,prevField:o,prefix:n},this))}),this.fields=i}},fillRecord:function(e){this.element.find(".youi-field").each(function(i){var n=this.getAttribute("data-property"),s=t(".textInput:first",this).attr("showProperty"),a=t.youi.recordUtils.getPropertyValue(e,n);if(null!=a&&0!=a.length)try{var o=s?t.youi.recordUtils.getPropertyValue(e,s):null;t(this).fieldValue(a,o)}catch(t){_log.info("设置值异常："+t)}})},_initFields:function(){var i=this.fields;this.element.find(".youi-field").each(function(n){var s=this.getAttribute("id"),a=e(i,s);a&&t.youi[a.type]&&t(this)[a.type](a)})},_initAction:function(){this._on({"validate .youi-field":function(t,e){},"value .youi-field":function(t,e){}})},getFieldValues:function(){var i=[],n=this.fields;return this.element.find(".youi-field").each(function(s){var a,o=this.getAttribute("id"),r=e(n,o);t(this).hasClass("fieldCustom")&&(r={property:this.getAttribute("property")||t(this).data("property")}),r&&(a=t(this).fieldValue(),t.isArray(a)?i=i.concat(t.youi.recordUtils.recordToParameters(a,r.property)):i.push({property:r.property,value:a}))}),i}}))}(jQuery)},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-8
 */
i(0),i(1),function(t){function e(e,i){i.code;var n=i.show,s=(i.mixed,[]);return e&&t(e).each(function(){s.push(t.extend({},this,{value:this[n]||"",label:this[n]||"",propertyValue:this[i.propValueProperty]}))}),s}t.widget("youi.fieldAutocomplete",t.youi.abstractWidget,t.extend({},t.youi.field,t.youi.fieldSource,{_initField:function(){var i=this;this.options.code=this.options.code||"value",this.options.show=this.options.show||"label",this.options.propValueProperty=this.options.propValueProperty||this.options.code,this._initSource(),this.element.find("input.textInput").autocomplete({source:function(n,s){this.xhr&&this.xhr.abort();this.xhr=t.youi.ajaxUtils.ajax({url:i.options.src,notShowLoading:!0,data:n,success:function(n){var a=[];t.isArray(n)?a=n:n&&t.isArray(n.records)?a=n.records:n&&n.record&&n.record.items&&(a=n.record.items),s(e(a,i.options))},error:function(){s([])}})},code:this.options.show,term:this.options.property,response:function(e,i){this.selectedItem=null,t(e.target).next().val("")},select:function(t,e){this.selectedItem=e.item},search:function(t,e){},dataParser:function(t){return e(t,i.options)},open:function(t,e){},close:function(e,n){if(this.selectedItem){var s=this.selectedItem.propertyValue||this.selectedItem.value;i.setValue(s,this.selectedItem.value),t(e.target).attr("title",this.selectedItem.label),i._doChange(s)}this.selectedItem=null},change:function(t,e){},focus:function(t,e){if(e.item){var n=e.item.propertyValue||e.item.value;i.setValue(n,e.item.value),this.selectedItem=e.item}},messages:{noResults:"",results:function(t){return""}}})},_fieldHtmls:function(){var t=[],e=this.options.width-17;return t.push('<input style="width:'+e+'px;" type="text" class="textInput"></input>'),t.push('<input type="hidden" class="value"></input>'),t.push('<div class="field-invalid"></div>'),t.join("")},setValue:function(e,i){var n=i||e;this.options.convert&&t.youi.serverConfig.convertArray[this.options.convert]&&(n=t.youi.serverConfig.convertArray[this.options.convert][e]),this.element.find("input.textInput").val(n),this.element.find("input.value").val(e)},_reloadByParent:function(){this.clear()},getValue:function(){var t=this.element.find("input.textInput").val();return t&&""!=t?this.element.find("input.value").val():""},clear:function(){this.element.removeClass("validate-success").removeClass("validate-error").removeAttr("title"),this.element.find("input.value,input.textInput").val(""),this._doChange("","")},_initAction:function(){}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(4),i(1),(n=jQuery).widget("youi.fieldCalendar",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{options:{textFormat:"yyyy-MM-dd",format:"yyyy-MM-dd"},_defaultHtmls:function(){var t=[];t.push('<span class="form-control textInput" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"/>'),t.push('<input type="hidden" class="value" name="'+this.options.property+'"/>'),t.push('<div class="input-group-addon" data-toggle="dropdown" >'),t.push('\t<span class="icon-calendar"></span>'),t.push('</div><ul class="dropdown-menu"></ul>'),this.element.addClass("dropdown input-group").html(t.join(""))},_initField:function(){var t=this;this._initSource(),this.options.readonly&&this.element.find("[data-toggle]").removeAttr("data-toggle"),this.element.find(".dropdown-menu:first").datepicker({onSelect:function(e,i){t._setValueByDatepicker(i.selectDate),!1!==i.close&&n(this).dropdown("toggle")},onToday:function(e,i){t._setValueByDatepicker(i.selectDate)},onClear:function(e,i){t.clear()}}).addClass("loaded")},_initAction:function(){this._on({}),this._bindDropdownAction()},_setValueByDatepicker:function(t){this.setValue(n.youi.dateUtils.dateToStr(t,this.options.format),n.youi.dateUtils.dateToStr(t,this.options.textFormat)),this._doChange()},setValue:function(t,e){var i=n.youi.dateUtils.strToDate(t,this.options.format);e=e||n.youi.dateUtils.dateToStr(i,this.options.textFormat),this.element.find(".textInput").text(e||t),this.element.find(".value").val(t)},getValue:function(){var t=this.element.find(".value").val();return 1==this.options.multiple&&(t=t.split(",")),t},clear:function(){this.element.find(".textInput").text(""),this.element.find(".value").val("")}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),(n=jQuery).widget("youi.fieldCheckboxGroup",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{_initField:function(){this._initSource(),this.dropMenu=this.element.find(".content:first"),this._loadSrc()},_buildItemHtml:function(t,e){var i=t[this.options.show];return'<a href="###" data-value="'+t[this.options.code]+'" class="option-item youi-icon icon-check-empty">'+i+"</a> "},_buildEmptyItemHtml:function(){return""},_initAction:function(){this._on({"click .option-item":function(t){var e=n(t.currentTarget);e.hasClass("icon-check-empty")?e.removeClass("icon-check-empty").addClass("icon-check"):e.removeClass("icon-check").addClass("icon-check-empty"),this.validate()}})},setValue:function(t,e){n.isArray(t)&&this.element.find(".option-item").each(function(){var e=n(this);-1!=n.inArray(e.data("value"),t)&&e.removeClass("icon-check-empty").addClass("icon-check")})},getValue:function(){var t=[];return this.element.find(".option-item.icon-check").each(function(){t.push(n(this).data("value"))}),t},clear:function(){this.element.find(".option-item.icon-check").removeClass("icon-check").addClass("icon-check-empty")}}))},function(t,e,i){i(1),function(t){t.youi.log;t.widget("youi.fieldCustom",t.youi.abstractWidget,t.extend({},t.youi.field,{options:{},_initField:function(){if(this.isCustom()){var e=t.extend({},this.options,this.options.customOptions,{initHtml:!0});this.element[this.options.custom](e)}else this.element.addClass("youi-field"),t.extend(this,{getValue:this.options.getValue,setValue:this.options.setValue,clear:this.options.clear})},isCustom:function(){return this.options.custom&&this.element[this.options.custom]}}))}(jQuery)},function(t,e,i){i(1),function(t){t.youi.log;t.widget("youi.fieldFile",t.youi.abstractWidget,t.extend({},t.youi.field,{_initField:function(){},_fieldHtmls:function(){return[].join("")},setValue:function(t){},getValue:function(){return""},clear:function(){this.element.removeClass("validate-success").removeClass("validate-error").removeAttr("title"),this.element.find(".value").val("")}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),(n=jQuery).widget("youi.fieldHidden",n.youi.abstractWidget,n.extend({},n.youi.field,{_initField:function(){},setValue:function(t,e){this.element.find("input.value").val(t)},getValue:function(){var t=[],e=this.element.find(".value").val();return this.element.hasClass("array")?t=e.split(","):t.push(e),t},clear:function(){this.element.find(".value").val("")}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),(n=jQuery).widget("youi.fieldLabel",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{_initField:function(){this._initSource()},_initAction:function(){},_defaultHtmls:function(){this.element.addClass("fieldLabel").html('<span class="textShow form-control youi-bgcolor" onclick="return false;" href="#"></span><input name=""+'+this.options.property+'+"" type="hidden" class="value"></input>')},setValue:function(t,e){this.options.convert&&n.youi.serverConfig.convertArray[this.options.convert]&&(e=n.youi.serverConfig.convertArray[this.options.convert][t],this.options.mixed&&(e=t+" - "+e));var i=e||"";if("image"==this.options.format&&(i='<img height="'+(this.element.height()-20)+'px" src="'+t+'"></img>'),"file"==this.options.format)i='<a class="page-link" href="'+n.youi.serverConfig.contextPath+"upload/download/"+t+'.html">'+t+"</a>";else if(this.options.format&&this.options.textFormat)try{var s=n.youi.dateUtils.strToDate(t,this.options.format);s&&(i=n.youi.dateUtils.dateToStr(s,this.options.textFormat))}catch(t){}this.element.find(".textShow").html(i||t),this.element.find("input.value").val(t)},getValue:function(){return this.element.find(".value").val()},clear:function(){this.element.find(".textShow").text(""),this.element.find(".value").val("")}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),(n=jQuery).widget("youi.fieldList",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{options:{code:"code",show:"show",itemSpan:12},_initField:function(){this._initSource(),this.dropMenu=this.element,this.options.height&&this.element.height(this.options.height),this.options.src&&this._loadSrc()},_initAction:function(){this._on({"click .option-item":function(t){this._selectedItem(n(t.currentTarget))},"dblclick .option-item":function(t){var e=n(t.currentTarget).text();n.youi.messageUtils.confirm("确认删除【"+e+"】",function(){n(t.currentTarget).remove()})}})},_selectedItem:function(t){this.element.find(".option-item").not(t).removeClass("selected"),t.addClass("selected"),this._doChange()},_defaultHtmls:function(){},_buildItemHtml:function(t,e){var i=t[this.options.show];return'<div data-value="'+t[this.options.code]+'" class="option-item pull-left'+(this.options.itemSpan>0?" col-sm-"+this.options.itemSpan:"")+'">'+i+"</div>"},_buildEmptyItemHtml:function(){return""},setValue:function(t,e){if(this.options.src)this.element.find(".option-item.selected").removeClass("selected"),this.element.find(".option-item[data-value="+t+"]").addClass("selected");else if("array"==this.options.valueMode){for(var i=n.isArray(t)?t:[t],s=[],a=0;a<i.length;a++)s.push(this._buildItemHtml({code:i[a],show:i[a]}));this.dropMenu.html(s.join(""))}else if("object"==this.options.valueMode&&"object"==typeof t){for(var o in s=[],t)s.push(this._buildItemHtml({code:o,show:o}));this.dropMenu.html(s.join(""))}},getValue:function(){if("array"==this.options.valueMode){var t=[];return this.element.find(".option-item").each(function(){t.push(n(this).data("value"))}),t}if("objects"==this.options.valueMode){t=[];var e=this.options.code,i=this.options.show;return this.element.find(".option-item").each(function(){var s=n(this),a=n.extend({},s.data());a[e]=n(this).data("value"),a[i]=n(this).text(),t.push(a)}),t}return this.element.find(".option-item.selected:first").data("value")},clear:function(){"array"==this.options.valueMode?this.dropMenu.empty():this.element.find(".option-item.selected").removeClass("selected")}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(1),(n=jQuery).widget("youi.fieldPassword",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldInputValidate,{getValue:function(){return this.element.find(".value").val()},setValue:function(t){return this.element.find(".value").val(t)},clear:function(){this.element.find(".textInput.value").val("")}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),(n=jQuery).widget("youi.fieldRadioGroup",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{_initField:function(){this._initSource(),this.dropMenu=this.element.find(".content:first"),this._loadSrc()},_buildItemHtml:function(t,e){var i=t[this.options.show];return'<a href="###" data-value="'+t[this.options.code]+'" class="option-item youi-icon icon-circle-blank">'+i+"</a> "},_buildEmptyItemHtml:function(){return""},_initAction:function(){this._on({"click .option-item":function(t){var e=n(t.currentTarget);e.hasClass("icon-circle-blank")&&(this.element.find(".icon-ok-circle").removeClass("icon-ok-circle").addClass("icon-circle-blank"),e.addClass("icon-ok-circle").removeClass("icon-circle-blank"),this.validate(),this._doChange())}})},setValue:function(t,e){this.clear(),this.element.find(".option-item[data-value="+t+"]").addClass("icon-ok-circle").removeClass("icon-circle-blank")},getValue:function(){return this.element.find(".option-item.icon-ok-circle").data("value")},clear:function(){this.element.find(".option-item.icon-ok-circle").removeClass("icon-ok-circle").addClass("icon-circle-blank")}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),(n=jQuery).widget("youi.fieldSelect",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{_initField:function(){!0===this.options.multiple&&this.element.addClass("multiple"),this._initSource()},_defaultHtmls:function(){var t=[];t.push('<span class="form-control textInput" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"/>'),t.push('<input type="hidden" class="value" name="'+this.options.property+'"/>'),t.push('<div class="input-group-addon" data-toggle="dropdown" >'),t.push('\t<span class="caret"></span>'),t.push('</div><ul class="dropdown-menu"></ul>'),this.element.addClass("dropdown input-group").html(t.join(""))},_initAction:function(){this._on({"click .dropdown-menu>li":function(t){if(this._selectedItem(n(t.currentTarget)),1==this.options.multiple)return!1},"click .dropdown-handler":function(t){},"click .select-all":function(t){if(1==this.options.multiple){var e=n(t.currentTarget);return e.hasClass("selected")?this.element.find(".option-item.selected").removeClass("selected"):this.element.find(".option-item").addClass("selected"),this._selectedItem(e),!1}}}),this._bindDropdownAction(),this.options.readonly&&(this.element.find("[data-toggle]").removeAttr("data-toggle"),this.element.find(".dropdown-menu").hide())},_buildItemHtml:function(t,e){var i=t[this.options.show],s=t[this.options.code];"string"==typeof e&&(e=[e]);var a="";-1!=n.inArray(e,s)&&(a=" selected");var o=[];if(n.isArray(this.options.dataProperties))for(var r in t){var l=n.youi.stringUtils.convertDataProperty(r,"-");-1!=n.inArray(l,this.options.dataProperties)&&t[r]&&o.push("data-"+l+'="'+t[r]+'"')}return"<li "+o.join(" ")+' class="option-item'+a+'" data-value="'+s+'"><span class="youi-icon icon-item">'+i+"</span></li>"},_selectedItem:function(t){var e,i;if(1==this.options.multiple){t.toggleClass("selected");var s=[],a=[];this.element.find(".option-item.selected").each(function(){var t=n(this),e=t.data("value");n.youi.stringUtils.notEmpty(e)&&(s.push(t.data("value")),a.push(t.text()))}),e=s.join(),i=a.join()}else t.hasClass("selected")||(e=t.data("value"),i=t.text(),this.element.find(".option-item").not(t).removeClass("selected"),t.addClass("selected"));null!=e&&(this._setValue(e,i),this._doChange())},_setValue:function(t,e){this.element.find(".textInput").text(e||t),this.element.find(".value").val(t)},setValue:function(t,e){this._setValue(t,e);var i=this.element.find(".dropdown-menu");e||i.hasClass("loaded")?i.hasClass("loaded")&&(text=i.find("[data-value="+t+"]").text(),this.element.find(".textInput").text(text),i.find(".selected").removeClass("selected"),i.find(".option-item[data-value="+t+"]").addClass("selected")):this.element.find(".textInput").dropdown("toggle").dropdown("toggle")},getValue:function(){var t=this.element.find(".value").val();return 1==this.options.multiple&&(t=t.split(",")),t},clear:function(){this.element.find(".textInput").text(""),this.element.find(".value").val(""),this.element.find(".selected").removeClass("selected")}}))},function(t,e,i){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2015, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2015-7-2
 */
i(1),function(t){t.youi.log;function e(t){return function(){var e=this.inputElement.val();t.apply(this,arguments),this._refresh(),e!==this.inputElement.val()&&this._trigger("change")}}t.youi.editorFactory.registerEditor("fieldSpinner"),t.widget("youi.fieldSpinner",t.youi.abstractWidget,t.extend({},t.youi.field,{options:{culture:null,incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_defaultHtmls:function(){this.element.append('<input name="startIndex" type="text" class="form-control value textInput" aria-valuemin="1" aria-valuenow="1"><div class="input-group-addon youi-spinner-toggle"><div class="spinner-handler dropup"><span class="caret"></span></div><div class="spinner-handler"><span class="caret"></span></div></div>')},_initField:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.inputElement=this.element.find("input.value:first"),this._on(this.inputElement,this._inputEvents),this._on(this._events),this._on(this.window,{beforeunload:function(){this.inputElement.removeAttr("autocomplete")}})},_inputEvents:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.inputElement.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.inputElement.val()&&this._trigger("change",t))}},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_events:{"mousewheel input.value":function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .spinner-handler":function(e){var i;function n(){this.inputElement[0]===this.document[0].activeElement||(this.inputElement.focus(),this.previous=i,this._delay(function(){this.previous=i}))}i=this.inputElement[0]===this.document[0].activeElement?this.previous:this.inputElement.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("dropup")?1:-1,e)},"mouseup .spinner-handler":"_stop"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.getValue()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return i=t-(e=null!==n.min?n.min:0),t=e+(i=Math.round(i/n.step)*n.step),t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.inputElement.val());return this.options[t]=e,void this.inputElement.val(this._format(i))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),this._super(t,e),"disabled"===t&&(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable"))},_setOptions:e(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.inputElement.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.inputElement.val())})},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.inputElement.val(t),this._refresh()},getValue:function(){return this._parse(this.inputElement.val())},setValue:function(t){e(this._value).call(this,t)},clear:function(){this.inputElement.val("")}}))}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(0),i(1),(n=jQuery).widget("youi.fieldText",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldInputValidate,{_defaultHtmls:function(){this.element.html('<input type="text" name="'+this.options.property+'" class="form-control textInput value">')},_initAction:function(){this._on({"change .value":function(){this._doChange()}})},_getValidateParams:function(){return{maxlength:this.options.maxLength}},getValue:function(){var t=this.element.find(".value").val();return this._filterXss(t)},setValue:function(t){return this.element.find(".value").val(t)},clear:function(){this.element.find(".textInput.value").val("")}}))},function(t,e,i){i(1),function(t){t.youi.log;t.widget("youi.fieldArea",t.youi.abstractWidget,t.extend({},t.youi.field,{_initField:function(){},_fieldHtmls:function(){var t=[],e=this.options.width-17;return t.push('<textarea style="width:'+e+'px;" type="text" class="textInput value"></textarea>'),t.push('<div class="field-invalid"></div>'),t.join("")},_initAction:function(){this._on({"change textarea.value":function(t){this._doChange()}})},setValue:function(t){this.element.find("textarea.value").val(t),this._doChange()},getValue:function(){var t=this.element.find("textarea.value").val();return this._filterXss(t)},clear:function(){this.element.removeClass("validate-success").removeClass("validate-error").removeAttr("title"),this.element.find("textarea.value").val("")},validate:function(){this.element.removeClass("validate-error").removeAttr("title");var e=t.trim(this.getValue()),i="";return!!this._validateNotNull(e)&&(e&&this.options.maxLength&&e.length>this.options.maxLength?(i="最大长度不能超过"+this.options.maxLength,this._validateError(i),!1):e&&this.options.minLength&&e.length<this.options.minLength?(i="最小长度不能小于"+this.options.minLength,this._validateError(i),!1):void 0)}})),t.extend(t.youi.fieldArea,{defaults:t.extend({},t.youi.fieldDefaults,{})})}(jQuery)},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-5-4
 */
i(1),(n=jQuery).widget("youi.fieldTree",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{_initField:function(){this._initSource(),this.element.find(".youi-tree").tree({check:this.options.check,defaultSelectId:this.options.defaultValue,idAttr:this.options.code,textAttr:this.options.show,select:this._proxy("_treeNodeSelected"),clickNode:this._proxy("_treeNodeClick"),after:this._proxy("_fixShowText")})},_treeNodeSelected:function(t,e){var i=e.selectedNode;this.options.sourceStyle&&!i.hasClass(this.options.sourceStyle)||this._setValue(i.attr("id"),i.find(">span>a").text())},_treeNodeClick:function(t,e){this.options.popup&&e.clickNodeElement.hasClass("selected")&&this.close()},_initAction:function(){var t={"click .dropdown-menu":function(t){return!1},"click [data-command=fieldCommand]":function(t){this.execCommand(t.currentTarget,n(t.currentTarget).data())},"click .treeNode.selected>span>a":function(t){this.close()}};this._on(t)},_defaultHtmls:function(){var t=[],e='<div class="youi-tree"><li class="treeNode root" data-src="'+this.options.src+'"></li></div>';!1===this.options.popup?t.push(e):(t.push('<span class="form-control textInput" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></span>'),t.push('<input type="hidden" class="value" name="'+this.options.property+'"/>'),t.push('<div class="input-group-addon" data-toggle="dropdown">\t<span class="caret"></span></div>'),t.push('<div class="dropdown-menu" style="width:100%;">'),t.push(e),t.push("</div>")),t.push("</div></div>"),this.element.addClass("dropdown input-group").html(t.join(""))},_resetByParent:function(){if(this.options.src){var t=this.element.find(".youi-tree li.root:first");t.removeClass("loaded").find(">ul").empty(),t.data("src",this.options.src+"?"+this._getParentParams().join("&")),this.element.find(".youi-tree").tree("expandAll")}this.element.trigger("resetChildren")},_fixShowText:function(){var t=this.element.find(".value").val()||this.options.defaultValue;if(t){var e=this.element.find(".treeNode#"+t);this.element.find(".textInput").text(e.find(">span>a").text())}},_setValue:function(t,e){if(this.options.check&&n.isArray(t)){var i=[];if("object"===this.options.valueMode&&this.options.code){var s=this.options.code;n(t).each(function(){i.push(this[s])})}else i=t;var a=this.element.find(".youi-tree li:first");a.text()||a.removeClass("loaded"),this.element.find(".youi-tree").tree("checkedTreeNodes",i)}else this.element.find(".value").val(t),this._fixShowText();this._doChange()},setValue:function(t,e){this._setValue(t,e)},getValue:function(){if(1==this.options.check){var t=[],e=[],i=[],s=this.options.sourceStyle?"."+this.options.sourceStyle:"";if(this.element.find(".treeNode.checked"+s).not(".root").each(function(){t.push(this.getAttribute("id")),i.push(n.youi.treeUtils.getNodeText(n(this))||""),e.push(n(this).data())}),this.options.code&&"object"===this.options.valueMode){for(var a=[],o=this.options.codeAttr||this.options.code,r=this.options.show||"text",l=0;l<t.length;l++){var d={};d[o]=t[l],d[r]=i[l],a.push(n.extend({},d,e[l]))}return a}return t}return this.element.find(".value").val()},clear:function(){this.element.find(".value").val(""),this.element.find(".textInput").text(""),this.element.find(".treeNode.selected").removeClass("selected"),1==this.options.check&&this.element.find(".treeNode.checked").removeClass("checked")},close:function(){this.element.removeClass("open")}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-5-4
 */
i(0),i(1),(n=jQuery).widget("youi.fieldGrid",n.youi.abstractWidget,n.extend({},n.youi.field,n.youi.fieldSource,{_initField:function(){},_initAction:function(){},_defaultHtmls:function(){},setValue:function(t){n.isArray(t)&&this.element.find(">.youi-grid:first").grid("parseRecords",t,t.length)},getValue:function(){return this.element.find(">.youi-grid:first").grid("getRecords")},clear:function(){}}))},function(t,e,i){var n;
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-7
 */
i(1),(n=jQuery).widget("youi.fieldTreeList",n.youi.abstractWidget,n.extend({},n.youi.field,{_initField:function(){var t=this;this.element.find(".youi-tree:first").tree({select:function(e,i){t._listLoad({id:i.selectedNode.attr("id")})}})},_listLoad:function(t){if(this.options.listSrc){var e=this,i=n.youi.pageUtils.parsePageUrl(this.options.listSrc,t);n.youi.ajaxUtils.ajax({url:i,success:function(t){t&&t.records&&e._parseList(t.records)}})}},_parseList:function(t){var e=[],i=this.options.listCode||"code",s=this.options.listShow||"show";n(t).each(function(){e.push('<div class="option-item" data-value="'+this[i]+'">'+this[s]+"</div>")}),this.element.find(".list-container:first").html(e.join(""))},_initAction:function(){this._on({"click .treeNode":function(t){return!1},"click .option-item":function(t){var e=n(t.currentTarget).data();this._setValue(e.value,n(t.currentTarget).text())}})},_setValue:function(t,e){this.element.find(".value").val(t),this.element.find(".textInput").text(e||t)},_defaultHtmls:function(){var t=[];t.push('<span class="form-control textInput" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></span>'),t.push('<input type="hidden" class="value" name="'+this.options.property+'"/>'),t.push('<div class="input-group-addon" data-toggle="dropdown">\t<span class="caret"></span></div>'),t.push('<div class="dropdown-menu" style="width:100%;">');var e='<div class="youi-tree col-sm-6"><li class="treeNode root" data-src="'+this.options.treeSrc+'"></li></div>';t.push(e),t.push('<div class="col-sm-6 list-container"></div>'),t.push("</div>"),t.push("</div>"),this.element.addClass("dropdown input-group").html(t.join(""))},setValue:function(t,e){this._setValue(t,e)},getValue:function(){return this.element.find(".value").val()},clear:function(){this.element.find(".value").val(""),this.element.find(".textInput").text("")}}))}]);