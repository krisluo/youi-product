!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i(1),i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),e.exports=i(21)},function(e,t){!function(e){"use strict";e.youi=e.youi||{},window.getClientRects=window.getClientRects||function(){return[]},e.extend(e.youi,{designerUtils:{buildItemTreeNodes:function(t,i,n){return function(t,i,n){var r={},s=[];return e(t).each(function(){var t=e.extend({},this);e.isFunction(i)&&i(t);var o=this.level?parseInt(this.level):n;if(o==n)s.push(t);else if(o>n){var a=r[o-1+""];a&&(a.children=a.children||[],a.children.push(t),a.expanded=!0)}r[this.level]=t}),s}(t,i,n||0)},parseItemsFromTreeNode:function(t,i){return function t(i,n,r){var s=[],n=n||0;var o=r?"."+r:"";e(">ul>li.treeNode"+o,i).each(function(){var i=e(this),o=e.extend({id:i.attr("id")},i.data(),{text:e.youi.treeUtils.getNodeText(i),level:n});delete o.group,s.push(o),s=s.concat(t(i,n+1,r))});return s}(t,0,i)},parseTreeNodeItemList:function(t,i){return function(t,i){var n=[];return e("li.treeNode"+(i?"."+i:""),t).each(function(){var t=e(this),i=e.extend({id:t.attr("id")},t.data(),{text:e.youi.treeUtils.getNodeText(t)});delete i.group,n.push(i)}),n}(t,i)},getFormFieldStrValue:function(t,i){if(!t||!i)return"";var n=t[i];return e.isArray(n)&&(0==n.length&&n.push(""),n=n[0]),n}},itemUtils:{insertItem:function(e,t,i){return[].concat(e.slice(0,i)).concat([t]).concat(e.slice(i,e.length))},removeItem:function(e,t){var i=[].concat(e.slice(0,t));return t!=e.length-1&&(i=i.concat(e.slice(t+1,e.length))),i},removeItemById:function(e,t){for(var i=[],n=0;n<e.length;n++)e[n].id!=t&&i.push(e[n]);return i},findItemIndexes:function(t,i){var n={};if(e.isArray(t)&&e.isArray(i))for(var r=0;r<t.length;r++)-1!=e.inArray(t[r].id,i)&&(n[t[r].id]=r);return n},findInsertIndex:function(t,i,n){var r;i?r=e.youi.itemUtils.findItemIndexes(t,[i])[i]+n+1:r=t.length;return r}},sheetEditor:{insertCol:function(e,t){this._proxySheetAreaAction("insertCol")},appendCol:function(e,t){this._proxySheetAreaAction("appendCol")},appendBlankCol:function(e,t){this._proxySheetAreaAction("appendBlankCol")},deleteCol:function(e,t){this._proxySheetAreaAction("deleteCol")},setTextIndent:function(e,t){this._proxySheetCommandAction("setTextIndent",e,t)},setAlign:function(e,t){this._proxySheetCommandAction("setAlign",e,t)},setFontSize:function(e,t){this._proxySheetCommandAction("setFontSize",e,t)},setBorder:function(e,t){this._proxySheetCommandAction("setBorder",e,t)},mergeArea:function(e,t){this._proxySheetCommandAction("mergeArea",e,t)},setSequence:function(e,t){this._proxySheetCommandAction("setSequence",e,t)},clearArea:function(t,i){e.youi.messageUtils.confirm("确认清除选区文本信息?",this._proxy("_proxySheetCommandAction","clearAreaText",t,i))},moveAreaText:function(e,t){var i=parseInt(t.value),n=this.contentElem.sheet("getSelectedArea");this.contentElem.sheet("moveArea",n,i)},_proxySheetAreaAction:function(e){var t=this.contentElem.sheet("getSelectedArea");this.contentElem.sheet(e,t)},_proxySheetCommandAction:function(e,t,i){var n=this.contentElem.sheet("getSelectedArea");if("mergeCellText"==i.value){var r=this.contentElem.sheet("getSelectedTexts");this.contentElem.sheet("setCellText",{rowIndex:n.startRow,colIndex:n.startCol,text:r.join("")})}this.contentElem.sheet(e,t,i,n)}},abstractDesigner:e.extend({},e.youi.command,{options:{useModelTree:!0},_initContent:function(t){this.UUID=0,this.contentElem=this.element.find(">."+this.widgetName+"-content:first").addClass("auto-height"),e.isFunction(t)&&t(this.contentElem)},_initRefWidget:function(){this._initSubPages(),this._initModelTree()},_initModelTree:function(){var t,i;t=this.options.useModelTree,i=this.options.refs,t&&e.isArray(i)&&i.length>0&&(this.modelTreeElem=e("#"+this.options.refs[0]),this.modelTreeElem.hasClass("youi-tree")?(this._bindTreeMenuAction(),this.element.parents(".youi-treePage").length||(window[this.options.refs[0]+"_select"]=this._proxy("_treeNodeSelect"))):this.modelTreeElem=null)},_treeNodeSelect:function(e){},_bindTreeMenuAction:function(){var t=[],i=this.modelTreeElem.data("xmenu");i&&e("#"+i).find("li.youi-xmenuitem[data-name]").each(function(){t.push(e(this).data("name"))});for(var n=0;n<t.length;n++){var r=this.options.refs[0]+"_xmenu_"+t[n];if(!e.isFunction(window[r])&&(window[r]=this._proxy(t[n]),0==t[n].indexOf("open"))){var s=t[n].substring(4,5).toLocaleLowerCase()+t[n].substring(5);this.subPages[s]&&!e.isFunction(this[t[n]])&&(this[t[n]]=this._proxy("openSubPageByMenu",s))}}},_refreshModelTree:function(t,i){if(this.modelTreeElem&&this.modelTreeElem.length){var n=this.modelTreeElem.find("ul:first").empty(),r=[];e(t).each(function(){var t={};if(i)for(var n in i)this[n]&&i[n]&&(t[i[n]]=this[n]);r.push(e.youi.treeUtils.treeNodeHtml(this.id,this.text,t,{children:this.children,group:this.group}))}),n.html(r.join(""))}},_treeNodeMoveDown:function(){var e=this.modelTreeElem.tree("getSelected"),t=e.next("li.treeNode");if(t.length)return t.after(e),e},_treeNodeMoveUp:function(){var e=this.modelTreeElem.tree("getSelected"),t=e.prev("li.treeNode");if(t.length)return t.before(e),e},_treeNodeMoveLeft:function(){var e,t=this.modelTreeElem.tree("getSelected"),i=t.parents("li.treeNode:first");i.length&&(i.after(t),(e=i)&&(0==e.find(">ul>li").length?e.removeClass("expandable"):e.addClass("expandable")))},_treeNodeMoveRight:function(){var t=this.modelTreeElem.tree("getSelected"),i=t.prev("li.treeNode");if(i.length){this.modelTreeElem.tree("addNode",i,"temp_","temp_"),i.find(">ul>li:last").remove();var n=i.find(">ul");0==n.length&&(n=e("<ul></ul>").appendTo(i)),n.append(t)}},_updateTreeNode:function(t,i,n,r,s){e.isArray(t)&&(t=t[0]);var o=this.modelTreeElem.find(".treeNode."+i+"[data-id="+t+"]");for(var a in n&&o.find(">span>a").text(n),s&&this._setTreeNodeToolTips(o,s),r=r||{}){var l=r[a];if(e.youi.stringUtils.notEmpty(l)){var d="data-"+e.youi.stringUtils.convertDataProperty(a,"-");o.attr(d,l).data(a,l)}}return o},_removeTreeNode:function(e){this.modelTreeElem.tree("removeNode",e)},_setTreeNodeToolTips:function(e,t){t=t||"";var i=e.find(">.tree-span>span.tree-node-hint");0!=i.length?i.text(t):e.find(">.tree-span").append("<span class='tree-node-hint'>"+t+"</span>")},_buildChildItem:function(e){var t={};return e&&e.id&&(t.parentId=e.id,t.parentText=e.text),t},_addItemTreeNode:function(e,t,i,n){var r,s=e.parentId,o=0,a=["item",t];return s&&(o=(r=this.modelTreeElem.find(".treeNode."+t+"[data-id="+s+"]")).find(".treeNode."+t).length),r&&r.length||(r=this.modelTreeElem.find(".treeNode."+t+"-parent:first")),e.id=this._genUUID(n||"M",this.modelTreeElem),i&&(a=a.concat(i)),this.modelTreeElem.tree("addNode",r,e.id,e.text,{id:e.id,"mapped-id":e.mappedId,expression:e.expression},{tooltips:e.mappedId,group:a.join(" ")}),o},_addTreeNode:function(e,t,i,n,r,s){var o=[e.attr("id")];this.modelTreeElem.tree("visitParents",e,function(e){o.push(e.getAttribute("id"))}),o.reverse(),this.modelTreeElem.tree("openPath",o.join("/")+"/").tree("addNode",e,s||this._genUUID(t,this.modelTreeElem),i,n,r||{})},_initSubPages:function(){if(this.subPages=[],e.isArray(this.options.refs))for(var t=0;t<this.options.refs.length;t++){var i=this.options.refs[t].split("_subpage_");if(2==i.length){var n=i[1];this.subPages[n]={subPageId:this.options.refs[t]};var r="P_"+this.options.refs[t]+"_form_afterSubmit";e.isFunction(window[r])||(window[r]=this._proxy("_afterSubmitSubPage",{name:n}))}}},openSubPageByMenu:function(t,i,n){var r=e(t),s=r.parents(".treeNode:first"),o=s.data("id")?e.youi.treeUtils.getNodeText(s):"",a=e.extend({commandValue:i.value,text:e.youi.treeUtils.getNodeText(r),parentText:o,id:r.attr("id")},r.data()),l={record:a};this._openSubPage(n,l,a)},_openSubPage:function(t,i,n){if(this.subPages&&this.subPages[t]){var r=this.subPages[t].subPageId;e("#"+r).unbind("initPageData").bind("initPageData",this._proxy("_initPageData",i,t)).subpage("open",{},{},e.extend({},n,{subPageId:r}))}},_initPageData:function(t,i,n,r){if(n&&i&&e.isFunction(window[i.callback])){var s=null,o="_"+r+"FormRecord";e.isFunction(this[o])&&(s=this[o](n.record)),s=e.extend({},i.record,s||n.record);var a="P_"+this.subPages[r].subPageId+"_form";e("#"+a).form("reset").form("fillRecord",s),window[i.callback](s)}},_afterSubmitSubPage:function(t,i){var n=i.name;if(this.subPages&&this.subPages[n]){var r=this.subPages[n].subPageId;e("#"+r).dialog("close");var s="_"+n+"AfterFormSubmit";e.isFunction(this[s])&&this[s](t.record)}},_destroyDesigner:function(){this.model=null,this.contentElem=null,this.modelTreeElem=null,this.subPages=[]},_genUUID:function(e,t){e=e||"",t=t||this.contentElem||this.element;var i=e+this.UUID++;return t.find("#"+i).length?this._genUUID(e,t):i},setDirty:function(){this.element.attr("data-dirty","1")},isDirty:function(){return"1"===this.element.attr("data-dirty")},removeDirty:function(){this.element.removeAttr("data-dirty")},_resizeHeight:function(){var t=this.element.innerHeight();if(t>0){var i=0;this.element.find(">.fixed-height").each(function(){i+=e(this).outerHeight()}),this.element.find(">.auto-height").height(t-i-10)}}})})}(jQuery)},function(e,t){var i;(i=jQuery).widget("youi.treePage",i.youi.abstractWidget,i.extend({},{options:{bindResize:!0},_initWidget:function(){this.contentElem=this.element.find(">.treePage-content:first").addClass("auto-height"),this.treeElem=i("#"+this.options.refs[0]),this.element.attr("data-hash",!0),window[this.options.refs[0]+"_select"]=this._proxy("_treeNodeSelect"),window[this.options.refs[0]+"_afterLoad"]=this._proxy("_treeAfterLoad"),this.element.trigger("pagehash",{init:!0,startPage:this._parsePageUrl()||this.options.startPage}),this._bindWidgetCommand(),this.options.contentWidget&&this.contentElem[this.options.contentWidget](this.options)},_parsePageUrl:function(){var e=window.location.hash,t=e.indexOf("###nodeId:");return t>-1?e.substring(t+"###nodeId:".length):null},_treeAfterLoad:function(e){this._callGloablFunc("afterLoad");var t=this.treeElem.data("openPath");t&&window.setTimeout(this._proxy("_openPath",t),200),this.treeElem.find("li.root").removeClass("expanded").removeClass("expandable")},loadTreeNodes:function(e){var t=[];if(e&&(i(e).each(function(){t.push(i.youi.treeUtils.treeNodeHtml(this.id,this.text,{group:this.group},this))}),this.treeElem.find(">ul").html(t.join("")),this.options.sourceStyle&&-1==window.location.hash.indexOf("treepage###"))){var n=this.treeElem.find(".treeNode."+this.options.sourceStyle+":first").attr("id");window.setTimeout(this._proxy("_openPath",n),100)}},_openPath:function(e){this.treeElem.tree("openPath",e)},_treeNodeSelect:function(e){var t=e.attr("id"),i=[];try{this.treeElem.tree("visitParents",e,function(e){i.push(e.getAttribute("id"))}),(i=i.reverse()).push(t),this.element.trigger("setpagehash",{hash:i.join("/"),partHash:"treePage"})}catch(e){console.log(e)}this._callGloablFunc("select",e)},_initAction:function(){this._on({pagehash:function(e,t){var i=window.location.hash;t.init&&-1==i.indexOf("?")&&(window.location.hash=window.location.hash+"?treepage");var n=i.indexOf("###nodeId:");if(n>-1){var r=i.substring(n+"###nodeId:".length),s=r.split("/"),o=s[s.length-1];this.treeElem.find("li.treeNode#"+o),t.init?(this.treeElem.attr("data-open-path",r),this.element.trigger("resize")):r&&this.treeElem.tree("openPath",r)}return!1},setpagehash:function(e,t){var i=window.location.hash;if(t.hash&&t.partHash){var n=i.indexOf("###nodeId:");window.location.hash=-1!=n?i.substring(0,n)+"###nodeId:"+t.hash:i+"###nodeId:"+t.hash}return!1}})},_afterLoadPage:function(){},loadHtml:function(e){this.contentElem.html(e)},loadPage:function(e){i.youi.pageUtils.loadPage(this.contentElem,e,this._proxy("_afterLoadPage"))},_resize:function(){this._resizePageHeight()}}))},function(e,t){var i;(i=jQuery).widget("youi.gridPanel",i.youi.abstractWidget,i.extend({},{options:{bindResize:!0},_initWidget:function(){},_resize:function(){this._resizePageHeight()}}))},function(e,t){
/*!
 * youi JavaScript Library v3.0.0
 *
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2016-1-4
 */
!function(e){function t(e){for(var t="",i=e;i>0;){var n=i%26;0==n&&(n=26),t=String.fromCharCode(n+64)+t,i=(i-n)/26}return t}function i(t){var i=[],n=t.text;for(var r in delete t.text,delete t.rowIndex,delete t.colIndex,i.push("<td "),t.datas)e.youi.stringUtils.notEmpty(t.datas[r])&&i.push("data-"+e.youi.stringUtils.convertDataProperty(r)+'="'+t.datas[r]+'" ');for(var r in t)"string"==typeof t[r]&&e.youi.stringUtils.notEmpty(t[r])&&i.push(r+'="'+t[r]+'" ');return i.push(">"),i.push(n||""),i.push("</td>"),i.join("")}function n(t){var i={id:t.attr("id"),text:t.text()||t.find("input:first").val(),class:t[0].className,rowspan:t.attr("rowspan"),colspan:t.attr("colspan"),datas:{mergeId:t.attr("data-merge-id"),expression:t.attr("data-expression")}},n={textIndent:"0px",fontSize:"14px",color:"rgb(51, 51, 51)",backgroundColor:"rgba(0, 0, 0, 0)",textAlign:"start",borderTopColor:"rgb(192, 192, 192)",borderRightColor:"rgb(192, 192, 192)",borderBottomColor:"rgb(192, 192, 192)",borderLeftColor:"rgb(192, 192, 192)"};t.removeClass("selected");var r=[];for(var s in n){var o=t.css(s);o&&n[s]!=o&&r.push(e.youi.stringUtils.convertDataProperty(s)+":"+o)}return r.length&&(i.style=r.join(";")+";"),t[0].className=i.class,i}function r(e,t){return e-t}e.widget("youi.sheet",e.youi.abstractWidget,e.extend({},{options:{bindResize:!0,width:800,editable:!1,mode:"horizontal",expression:"records[{recordName}][{recordIndex}].items[{itemIndex}].values[valueIndex]"},_initWidget:function(){this._mouseInit(),this.tableDom=this.element.find("table")[0],this.element.addClass("page-editor");var t=this.options.xmenu||this.options.id+"_xmenu",i=e("#"+t);i.length&&(this.pasteHelper=e('<div class="paste-helper" style="position:absolute;z-index: -1;left:0px;top:0px;" contenteditable="true"></div>').insertBefore(this.element),this.options.xmenu=t,new ClipboardJS(i.find(".xmenu-item[data-name=copy]")[0],{text:this._proxy("_findCopyAreaText")}),this.pasteHelper.bind("paste",this._proxy("_paste",this.options.customPaste)),this.pasteHelper.bind("keypress",this._proxy("_copy")))},_copy:function(t){t.ctrlKey&&3==t.keyCode&&e("#"+this.options.xmenu).find(".xmenu-item[data-name=copy]").trigger("click")},_findCopyAreaText:function(e){return this.getSelectedTexts(!0).join("")},_paste:function(t,i){if(t&&t.originalEvent){e(t.currentTarget).empty();var n=t.originalEvent.clipboardData;n||(n=window.clipboardData);var r=n.getData("text");if(r){var s=r.replace(/\n|\r/g,"\t").split("\t");this.element.find(".cell.selected").each(function(t){var n=e(this);null==e.trim(s[t])||n.hasClass("readonly")||(e.isFunction(i)?i(n,s[t]):n.text(s[t]))})}}},_mouseStart:function(t){var i=e(t.target);i.hasClass("cell")?(this._clearSelectedArea(),this.dragElem=i,this.helper=this._createHelper()):i.is("span.cell-text")||i.hasClass("col-resize-handler")&&(this.dragElem=i.parent(),this.colResizeHelper=this._getResizeHelper().css({left:this.dragElem[0].offsetLeft+this.element.find(".pubHeader").outerWidth(),width:this.dragElem.outerWidth(),height:this.element.innerHeight()-10}).show())},_mouseDrag:function(t){var i=e(t.target);if(this.colResizeHelper){var n=this._computeHelperPos(t);this.colResizeHelper.width(n.width-25)}else if(this.dragElem){n=this._computeHelperPos(t);this.helper.css(n),i.hasClass("cell")&&(this.dropElem=i);var r=this.helper[0].offsetTop+this.helper.height()-this.element.height(),s=this.helper[0].offsetLeft+this.helper.width()-this.element.width();r>0&&this.element.scrollTop()<r&&r<e(this.tableDom).height()-this.element.height()+50&&this.element.scrollTop(r),s>0&&this.element.scrollLeft()<s&&this.element.scrollLeft(s)}},_mouseStop:function(e){this._colResizeStop(),this.dragElem&&this.dropElem&&this._showSelectedArea(this.dragElem,this.dropElem),this.helper&&this.helper.hide(),this.dropElem=null,this.dragElem=null},_colResizeStop:function(){this.colResizeHelper&&(this.dragElem.width(Math.max(this.colResizeHelper.width()+10,20)),this.colResizeHelper.hide(),this.colResizeHelper=null)},_getResizeHelper:function(t){var i=(t||"col")+"-resize-helper",n=this.element.find(">."+i);return n.length||(n=e('<div class="'+i+'">').appendTo(this.element)),n},_showSelectedArea:function(e,t){var i=this._cellAreaIter(e,t);this._selectCellsByArea(i),this.pasteHelper&&this.pasteHelper.focus()},_selectCellsByArea:function(t){var i=[];this._cellIter(t,function(t){var n="";t.hasClass("merged-cell")?n=t.attr("id"):t.hasClass("hide")&&(n=t.attr("data-merge-id")),n&&-1===e.inArray(n,i)&&i.push(n)}),i.length?this._showSelectedAreaWithMerge(t,i):this._addAreaSytle(t,"selected")},_showSelectedAreaWithMerge:function(e,t){if(t.length>0){for(var i=e.startRow,n=e.endRow,r=e.startCol,s=e.endCol,o=0;o<t.length;o++){var a=this.element.find("#"+t[o]);if(0!==a.length){var l=a.parent().prevAll().length,d=a.prevAll().length,c=parseInt(a.attr("rowspan")),h=parseInt(a.attr("colspan"));i=Math.min(i,l),n=Math.max(n,l+c-1),r=Math.min(r,d),s=Math.max(s,d+h-1)}}var u={startRow:i,endRow:n,rows:n-i+1,startCol:r,endCol:s,cols:s-r+1};this._needReSelectedArea(e,i,n,r,s)?this._selectCellsByArea(u):this._addAreaSytle(u,"selected")}},_needReSelectedArea:function(e,t,i,n,r){return e.startRow!==t||e.endRow!==i||e.startCol!==n||e.endCol!==r},getSelectedTexts:function(t){var i=[];return this.tableDom||(this.tableDom=this.element.find("table")[0]),this.tableDom&&e(".cell.selected",this.tableDom).each(function(){var n=e(this),r=e.trim(n.text());if(n.hasClass("dropdown")){var s=n.find("span:first");r=s.length?e.trim(s.text()):""}t&&(n.next(".selected").length?r+="\t":r+="\n"),i.push(r)}),i},_getSelectedAreaTexts:function(){var t=[[]];return this.tableDom||(this.tableDom=this.element.find("table")[0]),this.tableDom&&e(".cell.selected",this.tableDom).each(function(){var i=e(this),n=e.trim(i.text());if(i.hasClass("dropdown")){var r=i.find("span:first");n=r.length?e.trim(r.text()):""}t[t.length-1].push(n),i.next(".selected").length||t.push([])}),t},getSelectedRowTexts:function(){return this.getSelectedTexts(!0).join("").replace(/\t/g,"/").split("\n")},getSelectedColTexts:function(e){e=e||1;for(var t=this._getSelectedAreaTexts(),i=[],n=Math.min(t.length-1,e),r=0;r<t[0].length;r++){for(var s=[],o=0;o<n;o++)s.push(t[o][r]);i.push(s.join(""))}return i},_getAreaRecords:function(e){return this._cellAreaRecordsIter(e)},moveArea:function(t,i){for(var n=t.startRow;n<=t.endRow;n++){var r=e(this.tableDom.rows[n+1].cells[t.startCol-1]),s=e(this.tableDom.rows[n+1].cells[t.endCol+1]);i>0?r.before(s):i<0&&s.after(r)}},_cellAreaRecordsIter:function(t,i){var r=[];return this._cellIter(t,function(t,s,o,a){var l=e(t),d=e.extend({rowIndex:s,colIndex:o},n(l));e.isFunction(i)&&i(d,l,s,o,a),r.push(d)}),r},_cellAreaIter:function(t,i,n){var r=t.parent().prevAll().length,s=i.parent().prevAll().length,o=t.prevAll().length,a=i.prevAll().length,l={startRow:Math.min(r,s),endRow:Math.max(r,s),startCol:Math.min(o,a),endCol:Math.max(o,a),rows:Math.abs(r-s)+1,cols:Math.abs(o-a)+1};return e.isFunction(n)&&this._cellIter(l,n),l},_cellIter:function(t,i){if(this.tableDom||(this.tableDom=this.element.find("table")[0]),this.tableDom&&e.isFunction(i))for(var n=0;n<t.rows;n++)for(var r=0;r<t.cols;r++){var s=n+t.startRow+1,o=r+t.startCol;i(e(this.tableDom.rows[s].cells[o]),s,o,t)}},cellIter:function(e,t){this._cellIter(e,t)},_clearSelectedArea:function(){this.element.find(".cell.selected").removeClass("selected")},_createHelper:function(t){var i=this.element.find(".select-helper");return 0==i.length?i=e('<div class="select-helper"></div>').appendTo(this.element):i.show(),i},_computeHelperPos:function(e){var t=e.pageX,i=e.pageY,n=this.options.container?this.options.container.offset():this.element.offset(),r=this.dragElem.offset(),s=r.left>t?5:0,o=r.left>t?0:5,a=this.element.scrollLeft(),l=this.element.scrollTop();return{left:Math.min(r.left,t)-n.left+s+a,top:Math.min(r.top,i)-n.top+l,width:Math.abs(t-r.left)-o,height:Math.abs(i-r.top)}},_initAction:function(){this._on({click:function(){this._closeEditor()},"mouseout .cell .editor:not(.select-value)":function(t){var i=e(t.target).parents(".cell:first"),n=i.data("oldValue");this._closeEditor();var r=i.data("value")||i.text();(!n&&r||n!=r)&&(i.data("oldValue",r),i.trigger("cellChange",{oldValue:n,value:r}))},"click .cell .editor":function(){return!1},"click .cell .editor.select-value":function(t){return e(t.currentTarget).parents(".cell:first").trigger("click"),!1},"cellValue .cell":function(t,i){var n=e(t.currentTarget);(i.value||"0"==i.value)&&(i.text?n.hasClass("fieldSelect")?n.data("value",i.value).attr("data-value",i.value).empty().append('<span data-value="'+i.value+'" class="editor select-value">'+i.text+"</span>"):(n.data("value",i.value),n.text(i.text)):n.text(i.value))},"click .cell .option-item":function(t){var i=e(t.currentTarget),n=i.parents(".cell:first"),r=n.data("value"),s=i.data("value");if(n.data("value",s).attr("data-value",s).find("span.editor:first").text(i.text()),n.removeClass("open").removeClass("cell-editing"),n.is('[data-editor="fieldRadioGroup"]')){if(!0!==this.options.editable)return!1;i.addClass("icon-ok-circle").removeClass("icon-circle-blank"),n.find(".option-item").not(i).removeClass("icon-ok-circle").addClass("icon-circle-blank")}return(!r&&s||r!=s)&&n.trigger("cellChange",{oldValue:r,value:s}),!1},"click .cell":function(t){this._hiddenContextMenu();var i=e(t.target);return this._clickCell(i),!0!==this.options.editable||i.hasClass("readonly")?i.hasClass("readonly")&&this._closeEditor():this._openEditor(i),!1},"click .rowHeader":function(t){this._selectedRow(e(t.currentTarget).parent().prevAll().length+1)},"click .colHeader":function(t){this._selectedCol(e(t.currentTarget).prevAll().length)},"click .pubHeader":function(e){},"contextmenu .cell":function(t){if(this.options.xmenu){var i=e(t.currentTarget);return i.hasClass("catalog-value")?(i.trigger("contextmenuCatalog",{pageY:t.pageY,pageX:t.pageX}),!1):(i.hasClass("selected")||this._clickCell(i),this._showContextmenu(t,i),!1)}},"contextmenuAction .cell":function(e,t){t.name&&this.execCommand(e.currentTarget,{name:"xmenu_"+t.name,event:e})}})},_selectedRow:function(t){this._clearSelectedArea(),e(this.tableDom).find("tr:eq("+t+") td").addClass("selected"),this._selectAreaChanged()},_selectedCol:function(t){this._clearSelectedArea(),e(this.tableDom).find("tr").find("td:eq("+t+")").addClass("selected"),this._selectAreaChanged()},_clickCell:function(e){this._clearSelectedArea(),this.element.find(".cell.cell-click").not(e).removeClass("cell-click"),e.addClass("cell-click").addClass("selected"),this._selectAreaChanged()},_addAreaSytle:function(e,t){this._cellIter(e,function(e){e.addClass(t)}),this._selectAreaChanged()},_selectAreaChanged:function(){this._trigger("areaChange",{})},_openEditor:function(t){if(t.hasClass("cell-editing")||t.hasClass("conditional-item"))t.hasClass("fieldSelect")&&this._closeEditor();else{this._closeEditor();var i=t.data("value")||t.text();t.addClass("cell-editing").data("oldValue",i);var n=t.data("editor")||t.attr("data-editor")||"fieldText";if("fieldText"==n)t.hasClass("catalog-value")?e('<input style="width:100%;" class="editor fieldText" data-value="'+t.data("value")+'" value="'+t.text()+'"/>').appendTo(t.empty()).focus():e('<input style="width:100%;" class="editor fieldText" value="'+e.trim(i)+'"/>').appendTo(t.empty()).focus();else if("fieldRadioGroup"==n)e(function(e,t,i){var n=[];if(i&&t&&i[t])for(var r in i[t])n.push('<span class="option-item radio-item youi-icon icon-circle-blank" data-value="'+r+'">'+(i[t][r]||"")+"</span>");return n.join("")}(0,t.data("convert"),this.options.converts)).appendTo(t.empty()).focus();else if("fieldSelect"==n){t.addClass("open");var s=e(".editor.select-value:first",t),o={value:s.data("value"),text:s.text()};t.parent().prevAll().length>11?t.addClass("dropup"):t.addClass("dropdown"),e(function(t,i,n){var s=[];if(s.push('<span class="editor select-value" data-value="'+t.value+'" data-toggle="dropdown" aria-expanded="true">'+(t.text||"")+"</span>"),s.push('<ul class="dropdown-menu">'),s.push('<li class="option-item" data-value="">请选择</li>'),n&&i&&n[i]){var o=[];e.each(n[i],function(e,t){o[o.length]=e}),o.sort(r),e.each(o,function(e,t){s.push('<li class="option-item" data-value="'+t+'">'+t+" "+(n[i][t]||"")+"</li>")})}return s.push("</ul>"),s.join("")}(o,t.data("convert"),this.options.converts)).appendTo(t.empty()).focus()}else if("fieldAutocomplete"==n&&this.options.searchUrl){var a={id:t.data("editorId"),key:t.data("editorKey")},l=t.text(),d=e.youi.recordUtils.replaceByRecord(this.options.searchUrl,a),c=(this.options.searchValueAttr,this.options.searchTextAttr||"text"),h={url:d,notShowLoading:!0,success:function(t){var i=[];e(t.records).each(function(){i.push(e.extend({value:this[c],label:this[c]},this))}),this.response(i)}};e('<input style="width:100%;" class="editor select-value fieldAutocomplete" data-value="'+i+'" value="'+i+'"/>').appendTo(t.empty()).autocomplete({position:{my:"right bottom",at:"right top"},source:function(t,i){this.xhr&&this.xhr.abort(),this.xhr=e.youi.ajaxUtils.ajax(e.extend({data:t,response:i},h))},select:this._proxy("_itemValueSelect",t),close:this._proxy("_closeEditorBySelect",e.extend({},{cellElem:t,oldText:l}))})}}},_itemValueSelect:function(t,i,n){e(t.target).attr("data-value",i.item.value),i.cellElem=n,this._trigger("itemValueSelect",t,i)},_closeEditorBySelect:function(t,i,n){var r=e(t.target);e(n.cellElem).data("oldText",n.oldText),r.data("value")||r.val(""),this._closeEditor()},_closeEditor:function(){var t=e(".cell.cell-editing",this.tableDom),i=t.data("oldText")||"",r=e("input.editor",t),s=r.val()||"";if(t.length){if(t.find(".dropdown-menu").length)return void t.removeClass("cell-editing").removeClass("open");if("fieldAutocomplete"===t.data("editor")&&i&&(s=i),r.hasClass("select-value")&&"fieldAutocomplete"!==t.data("editor")&&(s=r.data("value")||""),t.removeClass("cell-editing").empty().text(s),s!==i){var o=e.extend({rowIndex:t.parent().prevAll().length,colIndex:t.prevAll().length},n(t));this._trigger("cellTextChange",null,{record:o,oldText:i})}}},_showContextmenu:function(t,i){var n=e("#"+this.options.xmenu);if(n.length){n.hasClass("hidden")&&n.removeClass("hidden");var r=n.parents(".page-container:first").offset(),s=i[0].className.split(" ");this.element.find(".cell.selected").length>1&&s.push("area"),n.trigger("open",{bind:i[0],left:t.pageX+10-r.left,top:t.pageY+10-r.top,groups:s})}},_hiddenContextMenu:function(){e("#"+this.options.xmenu).hide()},loadDatas:function(e,t,i){var n=['<table class="table">'];n.push(this._buildColHeaders(i)),n.push(this._buildBody(e,t,i)),n.push("</table>"),this.element.find("table").remove(),this.element.append(n.join("")),this.tableDom=this.element.find("table")[0]},fillRecords:function(t){if(e.isArray(t))for(var i=0;i<t.length;i++){var n=t[i];this._fillCellByRecord(n)}},_fillCellByRecord:function(t){if(t&&t.rowIndex>-1&&t.colIndex>-1){var n=e(this.tableDom.rows[t.rowIndex].cells[t.colIndex]),r=i(t);n.after(e(r)).remove()}},getActiveGroups:function(){var e=[],t=this.element.find(".selected").length;return t&&e.push("cell"),(this.element.find(".selected.merged-cell").length>0||t>1)&&e.push("merge"),e},loadXml:function(t){var i=['<table class="table">'];i.push(t),i.push("</table>"),this.element.find("table").remove(),this.element.append(i.join("")),this.tableDom=this.element.find("table")[0];var n=e("tbody",this.tableDom).data("colwidths").split(",");e(this.tableDom).prepend("</thead>"+this._buildColHeaders(n.length,n)+"</thead>"),e("tbody>tr",this.tableDom).each(function(t){e(this).prepend('<td class="rowHeader">'+(t+1)+"</td>")})},loadSheetHtml:function(e){this.element.html(e),this.tableDom=this.element.find("table")[0]},getSelectedArea:function(e,t){return this._selectedAreaIter()},getCellRecord:function(t){return e.extend({rowIndex:t.parent().prevAll().length,colIndex:t.prevAll().length},n(t))},processCellRecord:function(t,i){var n=e(this.tableDom.rows[t.rowIndex+1].cells[t.colIndex]);e.isFunction(i)&&i(t,n)},processArea:function(e,t){return this._cellAreaRecordsIter(e,t)},setCellText:function(t){e(this.tableDom.rows[t.rowIndex+1].cells[t.colIndex]).text(t.text)},insertRow:function(t,n){var r=this.tableDom.rows[0].cells.length-1,s=[""],o=(n=n||[],[]),a={},l=null;t.startRow+1<this.tableDom.rows.length-1&&(l=e(this.tableDom.rows[t.startRow+1]),e("td",l).each(function(i){var n=e(this).attr("data-merge-id");if(o[i]=n,n&&!a[n]){var r=e(".cell#"+n,this.parentNode.parentNode),s=parseInt(r.attr("rowspan"));r.attr("rowspan",s+t.rows),a[n]=n}}));for(var d=0;d<t.rows;d++){s.push('<tr class="rowTr"><td class="rowHeader"></td>');for(var c=0;c<r;c++){var h=e.extend({text:"",class:"cell",datas:{}},n[c]);o[c]&&(h.class="cell hide",h.datas.mergeId=o[c]),s.push(i(h))}s.push("</tr>")}return l?l.before(e(s.join(""))):e("tbody",this.tableDom).append(s.join("")),this._reBuildRowHeader(),t},appendRow:function(){var t=this.tableDom.rows[0].cells.length-1,n=[];n.push('<tr class="rowTr"><td class="rowHeader"></td>');for(var r=0;r<t;r++)n.push(i({class:"cell"}));n.push("</tr>"),e("tbody",this.tableDom).append(n.join("")),this._reBuildRowHeader()},reBuildRowHeader:function(){this._reBuildRowHeader()},insertRowHtmls:function(t,i){t.startRow+1<this.tableDom.rows.length-1?e(this.tableDom.rows[t.startRow+1]).before(e(i)):e("tbody",this.tableDom).append(e(i)),e("[data-old-rowspan]",this.tableDom).each(function(){var t=e(this),i=parseInt(t.attr("data-old-rowspan")),n=t.attr("data-merge-id");t.removeAttr("data-old-rowspan"),e("#"+n,t.parents("tbody:first")).attr("rowspan",i)}),this._reBuildRowHeader()},deleteRow:function(t){for(var i=e("<table></table>"),n=0;n<t.rows;n++)e(this.tableDom.rows[t.startRow+1]).appendTo(i);this._reBuildRowHeader();var r={};for(var s in i.find("[data-merge-id]").each(function(){var t=e(this).attr("data-merge-id");t&&!r[t]&&(r[t]=t)}),r){var o=e("#"+s,this.tableDom),a=parseInt(o.attr("rowspan")),l=o.parent().prevAll().length+a-1,d=0;t.endRow>l&&(d=t.endRow-l),o.attr("rowspan",a-t.rows+d),i.find("[data-merge-id="+s+"]:first").attr("data-old-rowspan",a)}var c=i.find("tbody").html();return i.remove(),c},insertCol:function(t,n){for(var r=this.tableDom.rows.length,s=t.startCol,o=(n=n||[],{}),a=0;a<r;a++){var l=[],d=e(this.tableDom.rows[a].cells[s]),c=d.attr("data-merge-id");if(d&&c){var h=o[c]||e("#"+c,this.tableDom);if(h.prevAll().length<=s){if(!o[c]){var u=parseInt(h.attr("colspan"));h.attr("colspan",u+t.cols)}}else c="";o[c]=h}for(var p=0;p<t.cols;p++)if(0===a)l.push('<th class="colHeader" style="width:100px;"></th>');else{var f=e.extend({text:"",class:"cell",datas:{}},n[a]);c&&(f.class="cell hide",f.datas.mergeId=c),l.push(i(f))}d.before(l.join(""))}return this._reBuildColHeader(),t},appendCol:function(){e("thead>tr",this.tableDom).append('<th class="colHeader"></th>'),e("tr.rowTr",this.tableDom).each(function(){e(this).append(i({class:"cell"}))}),this._reBuildColHeader()},appendBlankCol:function(){e(this.tableDom).addClass("tableNoBorder"),e("thead>tr",this.tableDom).append('<th class="blankHead"></th>'),e("tr.rowTr",this.tableDom).each(function(){e(this).append(i({class:"cell hide"}))}),this._reBuildColHeader()},deleteCol:function(t){for(var i=this.tableDom.rows.length,n={},r=[],s=t.startCol,o=0;o<i;o++){for(var a=e("<tr></tr>"),l=0;l<t.cols;l++){var d=e(this.tableDom.rows[o].cells[s]),c=d.attr("data-merge-id");if(c&&!n[c]){var h=e("#"+c,this.tableDom),u=parseInt(h.attr("colspan")),p=h.prevAll().length+u-1,f=0;t.endCol>p&&(f=t.endCol-p),h.attr("colspan",u-t.cols+f),d.attr("data-old-colspan",u),n[c]=c}a.append(d)}r.push(a.html()),a.remove()}return this._reBuildColHeader(),r},insertColHtmls:function(t,i){for(var n=this.tableDom.rows.length,r=t.startCol,s=this.tableDom.rows[0].cells.length===r,o=0;o<n;o++)s?e(this.tableDom.rows[o]).append(i[o]):e(this.tableDom.rows[o].cells[r]).before(i[o]),e("[data-old-colspan]",this.tableDom).each(function(){var t=e(this),i=parseInt(t.attr("data-old-colspan")),n=t.attr("data-merge-id");t.removeAttr("data-old-colspan"),e("#"+n,t.parents("tbody:first")).attr("colspan",i)});this._reBuildColHeader()},clearArea:function(t,i,n){return this._cellAreaRecordsIter(n,function(t,i,n,r){i.before(e('<td class="cell selected"></td>')).remove()})},clearAreaText:function(e,t,i){return this._cellAreaRecordsIter(i,function(e,t,i,n){t.text("")})},mergeArea:function(t,i,n){var r,s=!1,o=this._cellAreaRecordsIter(n,function(e,t,i,n){(t.hasClass("merged-cell")||t.is("[data-merge-id]"))&&(s=!0)});s?this._cellAreaRecordsIter(n,function(t,i,n,r){if(i.hasClass("merged-cell")){var s=i.attr("id");i.removeClass("merged-cell").removeAttr("id").removeAttr("rowspan").removeAttr("colspan"),e("[data-merge-id="+s+"]",i.parent().parent()).removeClass("hide").removeAttr("data-merge-id")}}):this._cellAreaRecordsIter(n,function(e,t,i,s){n.startRow===i-1&&n.startCol===s?(r="m_"+i+"_"+s+"_"+(new Date).getTime(),t.attr("id",r).addClass("merged-cell").attr("rowspan",n.rows).attr("colspan",n.cols).css("textAlign","center")):t.addClass("hide").attr("data-merge-id",r)});return o},setTextIndent:function(e,t,i){return this._cellAreaRecordsIter(i,function(e,i,n,r){i.css("textIndent",t.value)})},setAlign:function(e,t,i){return this._cellAreaRecordsIter(i,function(e,i,n,r){i.css("textAlign",t.value)})},setColor:function(e,t,i){return this._cellAreaRecordsIter(i,function(e,i,n,r){i.css("color",t.value)})},setBgColor:function(e,t,i){return this._cellAreaRecordsIter(i,function(e,i,n,r){i.css("backgroundColor",t.value)})},setFontSize:function(e,t,i){return this._cellAreaRecordsIter(i,function(e,i,n,r){i.css("fontSize",t.value)})},setSequence:function(e,t,i){var n=0;return this._cellAreaRecordsIter(i,function(e,t,i,r){t.text(++n)})},setBorder:function(t,i,n){var r=e.extend({},n,{startRow:n.startRow>0?n.startRow-1:n.startRow,startCol:n.startCol>1?n.startCol-1:n.startCol});if(r.cols=r.endCol-r.startCol+1,r.rows=r.endRow-r.startRow+1,"outerBorder"===i.value)return this._setOuterBorder(n,r);var s=i.value.split(",");return this._cellAreaRecordsIter(r,function(e,t,o,a){if(o!==n.startRow||a!==n.startCol-1)if(o===n.startRow)"1"===s[0]?t.css("borderBottomColor","black"):"0,0,0,0"==i.value&&t.css("borderBottomColor","");else if(a===n.startCol-1&&o>n.startRow)"1"==s[3]?t.css("borderRightColor","black"):"0,0,0,0"==i.value&&t.css("borderRightColor","");else if(o>n.startRow-1&&a>n.startCol-1){var l={borderRightColor:"",borderBottomColor:""};"1"===s[0]&&r.startRow!=o&&"1,0,0,0"==i.value&&n.endRow>=o&&(l.borderBottomColor="black"),"1"===s[1]&&(l.borderRightColor="black"),"1"===s[2]&&(l.borderBottomColor="black"),"1"===s[3]&&r.startCol!=a&&"0,0,0,1"==i.value&&n.endCol>a&&(l.borderRightColor="black"),t.css(l)}})},_setOuterBorder:function(e,t){return this._cellAreaRecordsIter(t,function(i,n,r,s){s>e.startCol-1&&(r===e.startRow||r===e.endRow+1)&&n.css("borderBottomColor","black"),r>e.startRow&&(s===t.startCol&&e.startCol!=t.startCol||s===t.endCol)&&n.css("borderRightColor","black")})},_selectedAreaIter:function(t){var i=e(".selected.cell:first",this.tableDom),n=e(".selected.cell:last",this.tableDom);return this._cellAreaIter(i,n,t)},buildXml:function(t){var r=[],s=[];for(var o in this.element.find("thead .colHeader").not(".pubHeader").each(function(){s.push(e(this).outerWidth())}),t=e.extend({},t,{colWidths:s.join()}),r.push("<tbody "),t)t[o]&&r.push("data-"+o+'="'+t[o]+'" ');return r.push(">"),this.element.find(".rowTr").each(function(){var t=[];e(this).find(".cell").each(function(){t.push(i(n(e(this))))}),t.length&&(r.push('<tr class="rowTr">'),(r=r.concat(t)).push("</tr>"))}),r.push("</tbody>"),r.join("")},_isEmptyRow:function(t){return!e(t.text())},_buildColHeaders:function(e,i){var n=[];i=i||[];n.push('<thead><tr><th style="width:25px;" class="pubHeader">&nbsp;</th>');for(var r=0;r<e;r++)n.push('<th class="colHeader" style="width:'+(i[r]||100)+'px">'+t(r+1)+' <span class="col-resize-handler pull-right"></span></th>');return n.push("</tr></thead>"),n.join("")},_buildBody:function(e,t,i){for(var n=["<tbody>"],r=0;r<t;r++){n.push('<tr class="rowTr"><td class="rowHeader">'+(r+1)+"</td>");for(var s=0;s<i;s++)n.push('<td class="cell"></td>');n.push("</tr>")}return n.push("</tbody>"),n.join("")},rebuildTable:function(){var t=0;this.element.find("table").find("tr").each(function(){var i=e(this)[0].cells.length;i>t&&(t=i)});var i=this._buildCell("");this.element.find("table").find("tr").each(function(){for(var n=e(this)[0].cells.length,r=t-n,s=n-1;r>0;)e(this).find("th:eq("+s+")").each(function(){e(this).after('<th class="colHeader"></th>')}),e(this).find("td:eq("+s+")").each(function(){e(this).after(i)}),r-=1}),this.removeLastEmptyCol(),this._reBuildRowHeader(),this._reBuildColHeader()},_removeLastEmptyRow:function(){for(var t=this.getLastEmptyRowIndex(),i=this.element.find("table")[0].rows.length;i>t;)this.element.find("table").find("tr:eq("+i+")").each(function(){e(this).remove()}),i-=1},removeLastEmptyCol:function(){for(var t=this.getLastEmptyColIndex(),i=this.element.find("table").find(".rowHeader").length;t<i;)i-=1,this.element.find("table").find("tr").find("th:eq("+i+")").each(function(){e(this).remove()}),this.element.find("table").find("tr").find("td:eq("+i+")").each(function(){e(this).remove()})},getLastEmptyRowIndex:function(){var t=1,i=1;return this.element.find(".rowTr").each(function(){var n=!1;e(this).find(".cell").each(function(){e(this).data("group")&&(n=!0),e(this).data("expression")&&(n=!0),e(this).text()&&(n=!0)}),n&&(i=t),t+=1}),i},getLastEmptyColIndex:function(){var t=1;return this.element.find(".rowTr").each(function(){var i=!1,n=1;e(this).find(".cell").each(function(){e(this).data("group")&&(i=!0),e(this).data("expression")&&(i=!0),e(this).text()&&(i=!0),i&&(n=e(this)[0].cellIndex+1)}),t<n&&(t=n)}),t},_reBuildRowHeader:function(){this.element.find("table").find(".rowHeader").each(function(t){e(this).text(t+1)})},_reBuildColHeader:function(){this.element.find("table").find(".colHeader").not(".pubHeader").each(function(i){e(this).html(t(i+1)+'<span class="col-resize-handler pull-right"></span>')})},_destroy:function(){this.tableDom=null,this.pasteHelper&&this.pasteHelper.remove(),this.pasteHelper=null},setEditable:function(e){this.options.editable=e},getEditable:function(){return this.options.editable},xmenu_paste:function(e,t){this.pasteHelper.trigger("paste")},_resize:function(){}}))}(jQuery)},function(e,t){!function(e){"use strict";function t(t,i,n){var r=[],s=t+"_"+i.name;return r.push('<div class="panel panel-default">'),r.push('<div class="panel-heading" role="tab" id="'+s+'_head">'),r.push('    <span class="panel-title">'),r.push('   <a role="button" data-toggle="collapse" data-parent="#accordion" href="#'+s+'" aria-expanded="'+n+'" aria-controls="'+s+'">'),r.push(i.text),r.push(" </a>"),r.push(" </span>"),r.push(" </div>"),r.push('<div id="'+s+'" class="panel-collapse collapse '+(n?" in":"")+'" role="tabpanel" aria-labelledby="'+s+'_head">'),r.push('    <div class="panel-body" data-id="'+i.name+'">'),e(i.items).each(function(){var e;r.push('<div class="expression-item col-sm-'+((e=this).column||6)+" "+e.id+'" data-expression="'+e.expression+'">'+(e.text||e.id)+"</div>")}),r.push("</div></div>"),r.push("</div>"),r.join("")}function i(t,i){return'<input type="button" '+function(t,i){var n=[];for(var r in i=i||[],t){var s=e.youi.stringUtils.convertDataProperty(r,"-");-1!=e.inArray(s,i)&&n.push("data-"+s+'="'+(t[r]||"")+'"')}return n.join(" ")}(t,i)+' class="keyword" value="'+t.text+'" title="'+t.text+'"/>'}e.widget("youi.expressionEditor",e.youi.abstractWidget,e.extend({},{options:{bindResize:!0,rootText:"项",itemCaption:"项",keyTreeUrl:"",treeNodeGroups:"",itemProps:"id,text",expressionItems:{operator:{text:"操作符",items:[{id:"add",text:"加",expression:"+"},{id:"subtract",text:"减",expression:"-"},{id:"multiply",text:"乘",expression:"*"},{id:"divide",text:"除",expression:"/"},{id:"pow",text:"平方",expression:"^"},{id:"mod",text:"求余",expression:"%"},{id:"lbrackets",text:"左括号",expression:"("},{id:"rbrackets",text:"右括号",expression:")"},{id:"sum",text:"求和",expression:"∑"}]},func:{text:"常用函数",items:[{id:"max",text:"最大值",expression:"max({0},{1})"},{id:"min",text:"最小值",expression:"min({0},{1})"},{id:"avg",text:"平均值",expression:"avg({0},{1})"},{id:"yearOnYear",text:"上年同期",expression:"yearOnYear({0})"},{id:"monthOnMonth",text:"上期值",expression:"monthOnMonth({0})"}]}}},_initWidget:function(){this.element.addClass("youi-field auto-height").attr("data-field-type",this.widgetName).attr("data-property",this.options.name),this.contentElem=this.element.find("."+this.widgetName+"-content:first"),"string"==typeof this.options.treeNodeGroups&&(this.options.treeNodeGroups=this.options.treeNodeGroups.split(",")),"string"==typeof this.options.itemProps&&(this.options.itemProps=this.options.itemProps.split(",")),this._initContentHtml()},_initContentHtml:function(){var e=[],i=this.element.attr("id"),n=i+"e";e.push('<div class="col-sm-3 panel-group no-padding" id="accordion" role="tablist" aria-multiselectable="true">'),e.push(t(i,{name:"indicators",text:this.options.itemCaption},!0)),e.push("</div>"),e.push('<div class="col-sm-9"><div id="'+n+'" class="expression-editor" style="height:100px;"></div></div>'),this.contentElem.html(e.join("")),this.itemContainer=this.contentElem.find(".panel-body[data-id=indicators]"),UE.delEditor(n),this.ueditor=UE.getEditor(n,{toolbars:[["undo","redo"]],initialFrameHeight:345,autoHeightEnabled:!0,autoFloatEnabled:!0,elementPathEnabled:!1}),this.options.keyTreeUrl&&this._initKeyTree()},_initKeyTree:function(){var t=this.element.attr("id")+"tree",i=["<ul>"];i.push(e.youi.treeUtils.treeNodeHtml("ROOT",this.options.rootText,{group:"root",src:this.options.keyTreeUrl})),i.push("</ul>"),this.keyTreeElem=this.itemContainer.attr("id",t).html(i.join("")).tree({xmenu:this.options.refs[0],dragable:!0,hideRoot:!0,check:"true"==this.options.check}),window[t+"_xmenu_addItem"]=this._proxy("_addItem")},_addItem:function(t,i){var n=this.keyTreeElem.tree("getSelected");if(i.value&&n.length){var r="_"+("yearOnYear"==i.value?"上年同期":"上期"),s=n.data(),o=e.extend({id:n.attr("id"),mappedId:s.reportCode+s.physicalTableNum},s,{text:e.youi.treeUtils.getNodeText(n)+r,expression:i.value});this._insertKeyItem(o)}},_initAction:function(){this._on({"dblclick .expressionEditor-content .expression-item":function(t,i){var n=e(t.currentTarget).data();this.ueditor.ready(function(){this.execCommand("inserthtml",n.expression)})},"dblclick .expressionEditor-content .option-item":function(t,i){var n=e(t.currentTarget),r=n.data(),s=e.extend({id:r.value,mappedId:""},r,{text:n.text()});this._insertKeyItem(s)},"dblclick .expressionEditor-content .treeNode":function(t,i){var n=e(t.currentTarget),r=n.data(),s=r.group;if(-1!=e.inArray(s,this.options.treeNodeGroups)){var o=e.extend({id:n.attr("id")},r,{text:e.youi.treeUtils.getNodeText(n)});this._insertKeyItem(o)}return!1}})},_insertKeyItem:function(e){var t=i(e,this.options.itemProps),n=this.ueditor;this.ueditor.ready(function(){n.execCommand("inserthtml",t)})},insertItems:function(t,n){var r=[],s=this.options.itemProps;e(t).each(function(t){var o=i(this,s);e.isFunction(n)&&(o=n(o,t)||o),r.push(o)});var o=this.ueditor;this.ueditor.ready(function(){o.execCommand("inserthtml",r.join(""))})},parseExpressionItems:function(i){var n=function(i,n){var r=[];for(var s in n)r.push(t(i,e.extend({},n[s],{name:s})));return r.join("")}(this.element.attr("id"),i);this.element.find(".panel-group:first").append(n)},parseItems:function(t){var i=[];t&&e(t.records).each(function(){i.push('<span data-id="'+this.id+'" class="option-item" data-expression="'+(this.expression||"")+'" data-value="'+this.id+'">'+this.text+"</span>")}),this.itemContainer.html(i.join(""))},getValue:function(){var t,i=this.ueditor.getContent(),n=[],r=e(i).appendTo(this.element);return r.find("input.keyword").each(function(t){var i=e(this);n.push(e.extend({text:i.val()},i.data())),e("<span>{"+t+"}</span>").insertBefore(i),i.remove()}),t=r.text(),r.remove(),{items:n,source:t}},setValue:function(t){if(t){var n=[],r=this.options.itemProps;e(t.items).each(function(){n.push(i(this,r))})}var s=e.youi.getMessage(t.source,n)||"";this.ueditor.ready(function(){s&&this.setContent(s)})},clear:function(){},validate:function(e){this.element.removeClass("validate-success").removeClass("validate-error").removeAttr("title");var t=[];t.length?this.element.removeClass("validate-success").addClass("validate-error").attr("title",t.join("")):this.element.removeClass("validate-error").addClass("validate-success")},_resize:function(){},_destroy:function(){this.ueditor=null}}))}(jQuery)},function(e,t){!function(e){e.youi.log;function t(e,t){for(var i=[],n=0;n<e.length;n++)"char2"==e[n].value&&3!=t&&5!=t||"empty"==e[n].value&&6!=t||(i.push('<input class="mode" type="radio"'),0==n&&i.push(' checked="checked" '),i.push(' name="mode'),i.push(t),i.push('" value="'),i.push(e[n].value),i.push('">'),i.push(e[n].text),i.push("</input>"));return i.join("")}function i(t){var i=[];return t.find("input.mode-value").each(function(){i.push(e(this).val())}),i.join("")}e.widget("youi.fieldCron",e.youi.abstractWidget,e.extend({},e.youi.field,{_defaultHtmls:function(){var e=[];e.push('<table width="'+this.options.width+'px" class="cronTable" cellpadding="1" cellspacing="1">');for(var i=["秒","分","时","日期","月","星期","年"],n=[{value:"char1",text:" * "},{value:"char2",text:" ? "},{value:"sect",text:"区间"},{value:"addo",text:"增量"},{value:"free",text:"自由"},{value:"empty",text:"空"}],r=[],s=0;s<7;s++){e.push("<tr>"),e.push('<td class="label">'+i[s]+":</td>");for(var o=0;o<n.length;o++)e.push('<td class="modePanel '+(0==o?"show ":"")+n[o].value+'">'+this["_"+n[o].value+"Html"]()+"</td>");e.push('<td class="modeSwitch">'),e.push(t(n,s)),e.push("</td>"),e.push("</tr>"),r.push('<td class="cronLabel cronLabel-'+s+'"> * </td>')}e.push("</table>"),e.push('<div class="cron-expression"><table><tr><td>周期表达式：</td>'),(e=e.concat(r)).push("</tr></table><div>"),e.push('<input type="hidden" class="value"/><div class="field-invalid"></div>'),this.element.append(e.join(""))},_char1Html:function(){return' *(每一时刻) <input  class="mode-value" type="hidden" value="*"/>'},_char2Html:function(){return' ?(占位符)<input  class="mode-value" type="hidden" value="?"/>'},_sectHtml:function(){var e=[];return e.push('<input class="mode-value" value="1" type="text" size="6"/>(起始)'),e.push(' - <input class="mode-value" type="hidden" value="-"/>'),e.push('<input class="mode-value" value="1" type="text" size="6"/>(结束)'),e.join("")},_emptyHtml:function(){return""},_addoHtml:function(){var e=[];return e.push('<input class="mode-value" value="1" type="text" size="6"/>(起始)'),e.push(' / <input class="mode-value" type="hidden" value="/"/>'),e.push('<input class="mode-value" value="1" type="text" size="6"/>(增量)'),e.join("")},_freeHtml:function(){return'<input class="mode-value" type="text" size="15"/>'},_initAction:function(){this.element.delegate("input.mode","click",function(t){var n=e(this).val(),r=e(this).parents("tr:first");e(".modePanel",r).not("."+n).removeClass("show");var s=e(".modePanel."+n,r);s.addClass("show");var o=r.prevAll().length;e(".cron-expression .cronLabel.cronLabel-"+o,t.livedFired).text(i(s)),r=null}).delegate("input.mode-value","change",function(t){var n=e(this).parents("tr:first"),r=e(this).parents("td.modePanel:first"),s=n.prevAll().length;e(".cron-expression .cronLabel.cronLabel-"+s,t.livedFired).text(i(r))})},setValue:function(t){this.element.find("input.mode[value=free]").click();var i=t.split(" ");this.element.find(".modePanel.free .mode-value").each(function(t){var n=i[t]||"";e(this).val(n),e(".cron-expression .cronLabel.cronLabel-"+t,e(this).parents(".youi-fieldCron:first")).text(n)})},getValue:function(){var t=[];return this.element.find(".cron-expression .cronLabel").each(function(){var i=e(this).text();i&&t.push(i)}),t.join(" ")},clear:function(){this.element.find("input.mode[value=char1]").click(),this.element.find(".cron-expression .cronLabel").text("*")},validate:function(){}}))}(jQuery)},function(e,t){
/*!
 * youi JavaScript Library v3.0.0
 * 
 *
 * Copyright 2016-2020, zhyi_12
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: 2019-9-15
 */
!function(e){e.widget("youi.fieldQueryParam",e.youi.abstractWidget,e.extend({},e.youi.field,{_initField:function(){},_initAction:function(){},loadParams:function(t){var i={},n=[];e(t).each(function(){i[this.property]||n.push(function(e){var t=[];return t.push('<div class="col-sm-4 input-group">'),t.push('<label class="input-group-addon">'+(e.text||e.property)+"</label>"),t.push('<input class="form-control text-input" name="'+e.property+'" type="text"></input>'),t.push("</div>"),t.join("")}(this)),i[this.property]=!0}),this.element.html(n.join(""))},_defaultHtmls:function(){},setValue:function(e){},getValue:function(){var t=[];return this.element.find("input.form-control.text-input").each(function(){var i=e(this),n=i.val();n&&t.push({property:i.attr("name"),value:n})}),t},clear:function(){}}))}(jQuery)},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){}]);